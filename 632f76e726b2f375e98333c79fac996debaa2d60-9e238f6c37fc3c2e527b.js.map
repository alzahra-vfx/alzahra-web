{"version":3,"sources":["webpack://alzahravfx-website/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://alzahravfx-website/./node_modules/@emotion/memoize/dist/memoize.browser.esm.js","webpack://alzahravfx-website/./node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js","webpack://alzahravfx-website/./node_modules/classnames/index.js","webpack://alzahravfx-website/./node_modules/email-validator/index.js","webpack://alzahravfx-website/./node_modules/granim/index.js","webpack://alzahravfx-website/./node_modules/granim/lib/Granim.js","webpack://alzahravfx-website/./node_modules/granim/lib/animateColors.js","webpack://alzahravfx-website/./node_modules/granim/lib/changeBlendingMode.js","webpack://alzahravfx-website/./node_modules/granim/lib/changeDirection.js","webpack://alzahravfx-website/./node_modules/granim/lib/changeState.js","webpack://alzahravfx-website/./node_modules/granim/lib/clear.js","webpack://alzahravfx-website/./node_modules/granim/lib/convertColorToRgba.js","webpack://alzahravfx-website/./node_modules/granim/lib/destroy.js","webpack://alzahravfx-website/./node_modules/granim/lib/eventPolyfill.js","webpack://alzahravfx-website/./node_modules/granim/lib/getColor.js","webpack://alzahravfx-website/./node_modules/granim/lib/getColorDiff.js","webpack://alzahravfx-website/./node_modules/granim/lib/getColorPos.js","webpack://alzahravfx-website/./node_modules/granim/lib/getColorPosDiff.js","webpack://alzahravfx-website/./node_modules/granim/lib/getCurrentColors.js","webpack://alzahravfx-website/./node_modules/granim/lib/getCurrentColorsPos.js","webpack://alzahravfx-website/./node_modules/granim/lib/getDimensions.js","webpack://alzahravfx-website/./node_modules/granim/lib/getElement.js","webpack://alzahravfx-website/./node_modules/granim/lib/getLightness.js","webpack://alzahravfx-website/./node_modules/granim/lib/makeGradient.js","webpack://alzahravfx-website/./node_modules/granim/lib/onResize.js","webpack://alzahravfx-website/./node_modules/granim/lib/onScroll.js","webpack://alzahravfx-website/./node_modules/granim/lib/pause.js","webpack://alzahravfx-website/./node_modules/granim/lib/pauseWhenNotInView.js","webpack://alzahravfx-website/./node_modules/granim/lib/play.js","webpack://alzahravfx-website/./node_modules/granim/lib/prepareImage.js","webpack://alzahravfx-website/./node_modules/granim/lib/refreshColorsAndPos.js","webpack://alzahravfx-website/./node_modules/granim/lib/setColors.js","webpack://alzahravfx-website/./node_modules/granim/lib/setDirection.js","webpack://alzahravfx-website/./node_modules/granim/lib/setSizeAttributes.js","webpack://alzahravfx-website/./node_modules/granim/lib/triggerError.js","webpack://alzahravfx-website/./node_modules/granim/lib/validateInput.js","webpack://alzahravfx-website/./node_modules/jsonp/index.js","webpack://alzahravfx-website/./node_modules/jsonp/node_modules/debug/src/browser.js","webpack://alzahravfx-website/./node_modules/jsonp/node_modules/debug/src/debug.js","webpack://alzahravfx-website/./node_modules/ms/index.js","webpack://alzahravfx-website/./node_modules/react-fast-compare/index.js","webpack://alzahravfx-website/./node_modules/react-helmet/es/Helmet.js","webpack://alzahravfx-website/./node_modules/react-intl/lib/src/components/useIntl.js","webpack://alzahravfx-website/./node_modules/react-side-effect/lib/index.js","webpack://alzahravfx-website/./src/_i18n/components/Link.tsx","webpack://alzahravfx-website/./src/_i18n/components/localizedLink.tsx","webpack://alzahravfx-website/./src/_i18n/helpers/useIntlHelper.tsx","webpack://alzahravfx-website/./src/components/Layout/Footer/Footer.tsx","webpack://alzahravfx-website/./src/components/Layout/Footer/Footer.module.scss","webpack://alzahravfx-website/./src/components/Layout/Metadata/Meta/Facebook.tsx","webpack://alzahravfx-website/./src/components/Layout/Metadata/Meta/Twitter.tsx","webpack://alzahravfx-website/./src/components/Layout/Metadata/Meta/SEO.tsx","webpack://alzahravfx-website/./src/components/Layout/Metadata/DocumentHead.tsx","webpack://alzahravfx-website/./src/context/Hooks/useLocaleContext.ts","webpack://alzahravfx-website/./src/components/Layout/Metadata/getMetadata.ts","webpack://alzahravfx-website/./src/components/Layout/Subscribe/SubscribeOverlay.tsx","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/use-unmount-effect.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/PresenceContext.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/use-constant.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.js","webpack://alzahravfx-website/./node_modules/framesync/dist/es/on-next-frame.js","webpack://alzahravfx-website/./node_modules/framesync/dist/es/index.js","webpack://alzahravfx-website/./node_modules/framesync/dist/es/create-render-step.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/noop.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/geometry/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/compare-by-depth.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/utils.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/batch-layout.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/types.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/batcher.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/SharedLayoutContext.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/components/AnimatePresence/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/use-force-update.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/definitions.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/LazyContext.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/use-features.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/MotionConfigContext.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/MotionContext/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/LayoutGroupContext.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/is-browser.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/use-visual-element.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/is-ref-object.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/variants.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/MotionContext/create.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/context/MotionContext/utils.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/motion-proxy.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/lowercase-elements.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/scale-correction.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/transform.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/value/utils/is-motion-value.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/build-transform.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/utils.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/numbers/units.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/numbers/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/type-int.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/number.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/build-styles.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/create-render-state.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/use-props.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/valid-prop.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/filter-props.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/path.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/use-props.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/use-render.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/render.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/render.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/resolve-value.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/use-visual-state.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/config-motion.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/config-motion.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/types.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/events/use-dom-event.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/utils/event-type.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/events/event-info.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/events/use-pointer-event.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/events/utils.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/pipe.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/gestures.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/shallow-compare.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/clamp.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/utils/find-spring.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/generators/spring.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/progress.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/mix.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/color/utils.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/color/rgba.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/color/hex.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/color/hsla.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/mix-color.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/color/index.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/complex/index.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/inc.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/mix-complex.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/interpolate.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/easing/utils.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/easing/index.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/generators/keyframes.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/utils/detect-animation-from-options.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/generators/decay.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/utils/elapsed.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/index.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/velocity-per-second.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/time-conversion.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/easing/cubic-bezier.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/easing.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/is-animatable.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/default-transitions.js","webpack://alzahravfx-website/./node_modules/style-value-types/dist/es/complex/filter.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/defaults.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/animation/utils/transitions.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/animations/inertia.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/array.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/subscription-manager.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/value/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/test.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/value-types/find.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/setters.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/animation.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/animation-state.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/animations.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/is-point.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/is-point-3d.js","webpack://alzahravfx-website/./node_modules/popmotion/dist/es/utils/distance.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/PanSession.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/each-axis.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/measure.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/layout/utils.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/is-draggable.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/drag.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/gestures/drag/use-drag.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/layout/Animate.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/layout/Measure.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/motion/features/layout/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/state.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/lifecycles.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/projection.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/flat-tree.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/index.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/utils/motion-values.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/html/visual-element.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/utils/is-numerical-string.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/svg/visual-element.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/create-visual-element.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/motion.js","webpack://alzahravfx-website/./node_modules/framer-motion/dist/es/render/dom/utils/create-config.js","webpack://alzahravfx-website/./src/context/Context/FramerContext.tsx","webpack://alzahravfx-website/./src/components/Layout/Subscribe/SubscribeNotification.tsx","webpack://alzahravfx-website/./src/components/Granim/Granim.tsx","webpack://alzahravfx-website/./src/components/Granim/granim_options.ts","webpack://alzahravfx-website/./src/components/Granim/GranimSSR.tsx","webpack://alzahravfx-website/./src/components/Granim/GranimSSR.module.scss","webpack://alzahravfx-website/./src/components/Layout/Layout.tsx","webpack://alzahravfx-website/./src/components/Layout/Layout.module.scss","webpack://alzahravfx-website/./src/components/Layout/Navigation/Navigation.module.scss","webpack://alzahravfx-website/./src/components/Layout/Navigation/Items/Navigation.tsx","webpack://alzahravfx-website/./src/_assets/icons/social/instagram.tsx","webpack://alzahravfx-website/./src/_assets/icons/social/linkedin.tsx","webpack://alzahravfx-website/./src/_assets/icons/social/youtube.tsx","webpack://alzahravfx-website/./src/_assets/icons/social/twitter.tsx","webpack://alzahravfx-website/./src/components/Layout/Navigation/Items/SocialLinks.tsx","webpack://alzahravfx-website/./src/_assets/icons/theme/SunIcon.tsx","webpack://alzahravfx-website/./src/_assets/icons/theme/MoonIcon.tsx","webpack://alzahravfx-website/./src/components/Layout/Navigation/Items/ThemeSwitch.tsx","webpack://alzahravfx-website/./src/components/Layout/Navigation/useStickynav.tsx","webpack://alzahravfx-website/./src/components/Layout/Navigation/Navigation.tsx","webpack://alzahravfx-website/./src/_assets/icons/general/loader.tsx","webpack://alzahravfx-website/./src/components/Layout/Subscribe/Subscribe.tsx","webpack://alzahravfx-website/./node_modules/gatsby-plugin-mailchimp/index.js","webpack://alzahravfx-website/./src/components/Layout/Subscribe/Subscribe.module.scss","webpack://alzahravfx-website/./src/_assets/images/alzahra-logo.png"],"names":["_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","reactPropsRegex","fn","cache","arg","undefined","prop","test","charCodeAt","hasOwn","hasOwnProperty","classNames","classes","arguments","argType","push","Array","isArray","inner","apply","toString","prototype","call","join","module","exports","default","tester","validate","email","parts","split","some","part","Granim","options","this","getElement","element","x1","y1","name","elToSetClassOn","direction","customDirection","validateInput","isPausedWhenNotInView","states","stateTransitionSpeed","previousTimeStamp","progress","isPaused","isCleared","isPausedBecauseNotInView","context","canvas","getContext","channels","channelsIndex","activeState","defaultStateName","isChangingState","currentColors","currentColorsPos","activetransitionSpeed","eventPolyfill","scrollDebounceThreshold","scrollDebounceTimeout","isImgLoaded","isCanvasInWindowView","firstScrollInit","animating","gradientLength","gradients","image","position","stretchMode","blendingMode","events","start","CustomEvent","end","gradientChange","details","detail","isLooping","colorsFrom","colorsTo","bubbles","cancelable","callbacks","onStart","onGradientChange","onEnd","getDimensions","setAttribute","setColors","prepareImage","pauseWhenNotInViewNameSpace","pauseWhenNotInView","bind","setSizeAttributesNameSpace","setSizeAttributes","onResize","onScroll","refreshColorsAndPos","animation","requestAnimationFrame","animateColors","dispatchEvent","changeBlendingMode","changeDirection","changeState","clear","convertColorToRgba","destroy","getColor","getColorDiff","getColorPos","getColorPosDiff","getCurrentColors","getCurrentColorsPos","getLightness","makeGradient","pause","play","setDirection","triggerError","timestamp","progressPercent","nextGradient","wasWindowIdled","isLoop","loop","toFixed","transitionSpeed","cancelAnimationFrame","newBlendingMode","clearRect","globalCompositeOperation","newDirection","newState","_this","activeColorsDiff","activeColorsPosDiff","activeColors","activeColorsPos","forEach","gradientColor","arr","nextColors","nextColorsPos","colorDiff","colorPosDiff","match","regex","hexa","rgba","rgb","hsla","hsl","hue2rgb","p","q","t","hslaToRgb","h","s","l","a","r","g","b","Math","round","color","colorTypes","exec","identifyColorType","hex","shorthandRegex","replace","m","result","parseInt","hexToRgba","parseFloat","event","params","evt","document","createEvent","initCustomEvent","window","Event","colorA","colorB","pos","posA","posB","j","offsetWidth","offsetHeight","HTMLCanvasElement","Error","querySelector","lightnessAverage","gradientAverage","colorsAverage","map","el","max","gradient","elToSetClassOnClass","classList","drawImage","imageNode","imagePosition","x","y","width","height","addColorStop","remove","add","fillStyle","fillRect","type","addEventListener","removeEventListener","state","clearTimeout","setTimeout","elPos","getBoundingClientRect","bottom","right","left","innerWidth","top","innerHeight","setImagePosition","setImageAxisPosition","axis","imageAxisPosition","canvasWidthOrHeight","imgOriginalWidthOrHeight","imageAlignIndex","Image","onerror","onload","imgOriginalWidth","imgOriginalHeight","src","activeChannel","activeChannelPos","ceil","colors","colorsDiff","colorsPos","colorsPosDiff","colorPos","rgbaColor","isCurrentColorsSet","getCustomCoordinateInPixels","coordinate","size","ctx","createLinearGradient","createRadialGradient","x0","y0","inputType","stretchModeValues","array","value","definedInPixelsOrPercentage","splittedValue","unit","filter","areDefinedInPixelsOrPercentage","debug","url","opts","script","timer","prefix","id","count","param","timeout","enc","encodeURIComponent","getElementsByTagName","head","cleanup","parentNode","removeChild","noop","data","createElement","insertBefore","load","storage","e","process","DEBUG","log","console","Function","formatArgs","args","useColors","namespace","humanize","diff","c","splice","index","lastC","save","namespaces","removeItem","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","toLowerCase","RegExp","$1","chrome","local","localStorage","localstorage","formatters","v","JSON","stringify","err","message","enable","prevTime","createDebug","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","val","logFn","hash","abs","selectColor","init","stack","disable","names","skips","len","substr","d","plural","n","floor","str","String","parse","isNaN","long","fmtShort","hasElementType","Element","hasMap","Map","hasSet","Set","hasArrayBuffer","ArrayBuffer","isView","equal","constructor","it","entries","next","done","has","get","flags","valueOf","$$typeof","error","warn","clock","Component","_class","_temp","ATTRIBUTE_NAMES","TAG_NAMES","BASE","BODY","HEAD","HTML","LINK","META","NOSCRIPT","SCRIPT","STYLE","TITLE","TAG_PROPERTIES","REACT_TAG_MAP","accesskey","charset","class","contenteditable","contextmenu","itemprop","tabindex","HELMET_PROPS","HTML_TAG_MAP","reduce","obj","SELF_CLOSING_TAGS","HELMET_ATTRIBUTE","_typeof","Symbol","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","_extends","assign","objectWithoutProperties","possibleConstructorReturn","ReferenceError","encodeSpecialCharacters","encode","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","innermostTemplate","innermostDefaultTitle","getOnChangeClientState","getAttributesFromPropsList","tagType","tagAttrs","current","getBaseTagFromPropsList","primaryAttributes","reverse","innermostBaseTag","tag","lowerCaseAttributeKey","concat","getTagsFromPropsList","tagName","approvedSeenTags","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","attributeKey","tagUnion","property","rafPolyfill","now","callback","currentTime","cafPolyfill","webkitRequestAnimationFrame","mozRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msg","_helmetCallback","commitTagChanges","cb","baseTag","bodyAttributes","htmlAttributes","linkTags","metaTags","noscriptTags","onChangeClientState","scriptTags","styleTags","title","titleAttributes","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","_tagUpdates$tagType","newTags","oldTags","flattenArray","possibleArray","attributes","elementTag","helmetAttributeString","getAttribute","helmetAttributes","attributesToRemove","attributeKeys","attribute","indexToSave","_i","removeAttribute","tags","headElement","tagNodes","querySelectorAll","slice","indexToDelete","newElement","innerHTML","styleSheet","cssText","appendChild","createTextNode","existingTag","isEqualNode","generateElementAttributesAsString","attr","convertElementAttributestoReactProps","initProps","getMethodsForTag","toComponent","_initProps","attributeString","flattenedTitle","generateTitleAsString","_mappedTag","mappedTag","mappedAttribute","content","dangerouslySetInnerHTML","__html","generateTagsAsReactComponent","attributeHtml","string","tagContent","isSelfClosing","generateTagsAsString","mapStateOnServer","_ref","_ref$title","base","link","meta","noscript","HelmetSideEffects","defer","HelmetExport","_React$Component","HelmetWrapper","subClass","superClass","create","setPrototypeOf","__proto__","inherits","shouldComponentUpdate","nextProps","mapNestedChildrenToProps","child","nestedChildren","flattenArrayTypeChildren","_babelHelpers$extends","arrayTypeChildren","newChildProps","mapObjectTypeChildren","_ref2","_babelHelpers$extends2","_babelHelpers$extends3","newProps","mapArrayTypeChildrenToProps","newFlattenedProps","arrayChildName","_babelHelpers$extends4","warnOnInvalidChildren","mapChildrenToProps","children","_this2","_child$props","initAttributes","convertReactPropstoHtmlAttributes","render","_props","set","canUseDOM","propTypes","defaultTitle","titleTemplate","defaultProps","peek","rewind","mappedState","renderStatic","useIntl","intl","ex","React","React__default","_defineProperty","reducePropsToState","handleStateChangeOnClient","WrappedComponent","mountedInstances","emitChange","SideEffect","_PureComponent","recordedState","_proto","UNSAFE_componentWillMount","componentDidUpdate","componentWillUnmount","PureComponent","displayName","getDisplayName","Link","STORYBOOK","to","href","LocalizedLink","locale","onClick","activeLocale","LocaleContext","targetLocale","locales","isIndex","path","formatMessage","formatDate","date","formatOptions","useIntlHelper","className","cx","year","Facebook","desc","Helmet","Twitter","username","SEO","titleSeparator","description","pathname","article","siteLanguage","siteLocale","siteDirection","twitterUsername","author","datePublished","dateModified","seo","toISOString","copyrightYear","getFullYear","schemaOrgWebPage","headline","inLanguage","mainEntityOfPage","copyrightHolder","creator","publisher","itemListElement","item","schemaArticle","logo","breadcrumb","lang","dir","rel","template","site","notFound","siteImg","twitter","language","page","frontmatter","excerpt","post","childImageSharp","gatsbyImageData","getMetadata","useLocation","styles","siteLogo","alt","Subscribe","useUnmountEffect","useEffect","createContext","useConstant","ref","useRef","presenceId","getPresenceId","PresenceChild","_a","initial","isPresent","_onExitComplete","onExitComplete","custom","presenceAffectsLayout","presenceChildren","newChildrenMap","useMemo","childId","allComplete","isComplete","register","delete","_","defaultTimestep","getCurrentTime","performance","onNextFrame","useDefaultElapsed","runNextFrame","isProcessing","delta","stepsOrder","steps","acc","toRun","toRunNextFrame","numToRun","toKeepAlive","WeakSet","step","schedule","keepAlive","immediate","addToCurrentFrame","buffer","cancel","frameData","createRenderStep","sync","startLoop","cancelSync","flushSync","processStep","stepId","processFrame","min","getFrameData","any","convertBoundingBoxToAxisBox","zeroDelta","translate","scale","origin","originPoint","__assign","compareByDepth","depth","isProjecting","visualElement","projection","isEnabled","shouldResetTransform","collectProjectingAncestors","ancestors","parent","updateLayoutMeasurement","box","layoutState","getLayoutState","notifyBeforeLayoutMeasure","layout","isHydrated","measureViewportBox","layoutCorrected","notifyLayoutMeasure","prevViewportBox","rebaseProjectionTarget","unresolvedJobs","pushJob","job","pointer","batchLayout","flushLayout","reads","writes","setRead","setWrite","numStacks","executeJob","Presence","VisibilityAction","defaultHandler","layoutReady","notifyLayoutReady","createBatcher","queue","flush","_b","read","write","order","from","sort","__spreadArray","__read","resetTransform","restoreTransform","presence","Present","preRender","assignProjectionToSnapshot","SharedLayoutContext","FramerTreeLayoutContext","isSharedLayout","forceUpdate","getChildKey","AnimatePresence","exitBeforeEnter","_c","forceRender","unloadingRef","useState","forcedRenderCount","setForcedRenderCount","useCallback","useForceUpdate","layoutContext","useContext","isInitialRender","filteredChildren","filtered","Children","isValidElement","onlyElements","presentChildren","allChildren","exiting","updateChildLookup","childrenToRender","presentKeys","targetKeys","numPresent","insertionIndex","removeIndex","findIndex","presentChild","cloneElement","createDefinition","propNames","featureDefinitions","measureLayout","exit","drag","focus","hover","tap","pan","layoutAnimation","LazyContext","strict","featureNames","numFeatures","MotionConfigContext","transformPagePoint","isStatic","MotionContext","usePresence","useUniqueId","counter","incrementId","LayoutGroupContext","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useVisualElement","visualState","createVisualElement","config","lazyContext","presenceContext","layoutId","layoutGroupId","useLayoutId","visualElementRef","renderer","blockInitialAnimation","setProps","isPresenceRoot","syncRender","animationState","animateChanges","notifyUnmount","isRefObject","isVariantLabels","isVariantLabel","resolveVariantFromProps","definition","currentValues","currentVelocity","variants","resolveVariant","getProps","forEachValue","getCurrent","velocity","getVelocity","checkIfControllingVariants","animate","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","Boolean","useCreateMotionContext","inherit","getCurrentTreeVariants","variantLabelsAsDependency","preloadedFeatures","useRender","useVisualState","features","loadFeatures","forwardRef","externalRef","name_1","useFeatures","Provider","mount","unmount","useMotionRef","createMotionProxy","createConfig","customMotionComponentConfig","componentCache","Proxy","_target","lowercaseSVGElements","isSVGComponent","includes","valueScaleCorrection","transformAxes","transformProps","sortTransformProps","operationKey","axesKey","transformPropSet","isTransformProp","transformOriginProps","isTransformOriginProp","isForcedMotionValue","isMotionValue","translateAlias","z","transformPerspective","isCSSVariable","startsWith","getValueAsType","transform","clamp","sanitize","Number","floatRegex","colorRegex","singleColorRegex","isString","createUnitType","endsWith","degrees","percent","px","vh","vw","progressPercentage","number","alpha","numberValueTypes","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","maxWidth","maxHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","opacity","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","buildHTMLStyles","latestValues","transformTemplate","buildProjectionTransform","buildProjectionTransformOrigin","vars","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","correctedValue","applyTo","num","deltaFinal","treeScale","transformIsDefault","enableHardwareAcceleration","_d","allowTransformNone","transformString","transformHasZ","numTransformKeys","trim","buildTransform","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","useStyle","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","shouldForward","emotionIsPropValid_1","calcOrigin","offset","progressToPixels","dashKeys","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","__rest","attrs","dimensions","totalPathLength","calcSVGTransformOrigin","totalLength","spacing","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","forwardMotionProps","filteredProps","isDom","filterProps","elementProps","CAMEL_CASE_PATTERN","camelToDash","renderHTML","setProperty","camelCaseAttributes","renderSVG","renderState","scrapeMotionValuesFromProps","newValues","toUpperCase","isAnimationControls","isKeyframesTarget","resolveMotionValue","unwrappedValue","mix","toValue","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","values","motionValues","isControllingVariants","isVariantNode","variantToSet","resolved","transitionEnd","transition","svgMotionConfig","getBBox","getTotalLength","AnimationType","htmlMotionConfig","addDomEvent","eventName","handler","useDomEvent","isMouseEvent","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","info","setActive","Hover","isNodeOrChild","parentElement","combineFunctions","pipe","transformers","makeRenderlessComponent","hook","gestureAnimations","onTap","onTapStart","onTapCancel","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","getInstance","onPointerCancel","Focus","onHoverStart","onHoverEnd","shallowCompare","prevLength","safeMin","findSpring","envelope","derivative","duration","bounce","_e","mass","dampingRatio","undampedFreq","exponentialDecay","calcAngularFreq","exp","pow","f","initialGuess","approximateRoot","stiffness","damping","sqrt","durationKeys","physicsKeys","isSpringType","spring","restSpeed","restDelta","springOptions","isResolvedFromDuration","derived","getSpringOptions","resolveSpring","zero","resolveVelocity","createSpring","initialVelocity","initialDelta","undampedAngularFreq","angularFreq_1","sin","cos","dampedAngularFreq_1","freqForT","sinh","cosh","isBelowVelocityThreshold","isBelowDisplacementThreshold","flipTarget","needsInterpolation","_t","toFromDifference","isColorString","testProp","splitColor","aName","bName","cName","clampRgbUnit","rgbUnit","red","green","blue","alpha$1","hue","saturation","lightness","mixLinearColor","fromExpo","toExpo","getColorType","find","notAnimatable","mixColor","fromColorType","toColorType","fromColor","toColor","blended","mixFunc","colorToken","numberToken","analyse","numColors","numbers","tokenised","createTransformer","numValues","output","convertNumbersToZero","complex","getAnimatableNone","parsed","transformer","isNum","getMixer","mixComplex","mixArray","blendValue","fromThis","mixObject","numNumbers","numRGB","numHSL","originStats","targetStats","mixNumber","createMixers","ease","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","interpolate","input","isClamp","inputLength","interpolator","fastInterpolate","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","slowInterpolate","power","reverseEasing","easing","mirrorEasing","createBackIn","linear","easeIn","easeOut","easeInOut","circIn","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","backEasing","createAnticipate","bounceOut","p2","bounceIn","defaultEasing","keyframes","times","o","convertOffsetToTimes","_value","defaultOffset","createInterpolator","types","decay","timeConstant","_f","modifyTarget","amplitude","ideal","loopElapsed","elapsed","delay","framesync","update","passTimestamp","stop","driverControls","latest","interpolateFromNumber","autoplay","driver","_g","repeat","repeatMax","_h","repeatType","_j","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate","repeatCount","computedDuration","isForwardPlayback","animator","detectAnimationFromOptions","reverseElapsed","hasRepeatDelayElapsed","velocityPerSecond","frameDuration","secondsToMilliseconds","seconds","a1","a2","calcBezier","getSlope","kSampleStepSize","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","Float32Array","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","easingLookup","bounceInOut","easingDefinitionToFunction","isAnimatable","underDampedSpring","criticallyDampedSpring","linearTween","defaultTransitions","backgroundColor","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","functions","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","WebkitFilter","getDefaultValueType","defaultValueType","convertTransitionToAnimationOptions","yoyo","flip","isEasingArray","getPopmotionAnimationOptions","valueKey","transitionFactory","hydrateKeyframes","when","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","getAnimation","valueTransition","getValueTransition","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","currentAnimation","bounceStiffness","bounceDamping","_onUpdate","isOutOfBounds","boundaryNearest","startAnimation","startSpring","prev_1","current_1","boundary_1","heading_1","inertia","potentialUnitType","delayTimer","controls","getDelayFromTransition","addUniqueItem","SubscriptionManager","subscriptions","notify","numSubscriptions","getSize","MotionValue","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","scheduleVelocityCheck","velocityCheck","hasAnimated","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","getPrevious","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","motionValue","testValueType","dimensionValueTypes","findDimensionValueType","valueTypes","findValueType","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","getOriginFromTransition","animateVariant","variant","getDefaultTransition","transitionOverride","animateTarget","getChildAnimations","variantChildren","forwardDelay","animations","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","notifyAnimationComplete","all","animateChildren","first","last","animationTypeState","getState","valueTarget","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","numAnimationTypes","animateList","notifyAnimationStart","resolvedDefinition","animateVisualElement","createAnimationState","createTypeState","allAnimatedKeys","buildResolvedTypeValues","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","subscribe","isPoint","isPoint3D","distance1D","xDelta","yDelta","zDelta","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","lastDevicePoint","startDevicePoint","timestampedPoint","lastPoint","time","eachAxis","applyConstraints","elastic","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","topLeft","bottomRight","transformBoundingBox","isNear","maxDistance","calcLength","sourceLength","targetLength","updateAxisDelta","updateBoxDelta","defaultOrigin","calcRelativeAxis","relative","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isDraggable","_dragX","resetAxis","originAxis","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","originEvent","snapToCursor","stopMotion","initialPoint","getViewportPointFromEvent","cancelLayout","addChild","collectProjectingChildren","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","getAxisMotionValue","isExternalDrag","scheduleUpdateLayoutProjection","axisValue","postRender","resolveDragConstraints","dragPropagation","onDragStart","dragDirectionLock","lockThreshold","getCurrentDirection","onDirectionLock","updateAxis","onDrag","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateAxisMotionValue","updateVisualElementAxis","nextValue","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","setProjectionTargetAxis","dragMomentum","remainingProps","dragKey","_dragY","dragTransition","isRelative","projectionParent","getProjectionParent","getLatestValues","convertToRelativeProjection","relativeConstraints_1","targetFinal","momentumAnimations","startAxisValueAnimation","startLayoutAnimation","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","onReady","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","cssVariableRegex","getVariableValue","parseCSSVariable","token","fallback","getComputedStyle","getPropertyValue","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","_layoutState","defaultScaleCorrectors","boxShadow","original","containsCSSVariables","cssVariables","shadow","xScale","yScale","averageScale","i_1","cssVariable","_super","frameTarget","currentAnimationTarget","stopAxisAnimation","isAnimatingTree","originBox","targetBox","visibilityAction","shouldStackAnimate","prevParent","safeToRemove","prevParentViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","isTargetLocked","animateAxis","setVisibility","Show","notifyLayoutAnimationComplete","__extends","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","correctors","addScaleCorrection","axisIsEqual","layoutProgress","getProjectionAnimationProgress","frame","tweenAxis","unsubscribeProgress","layoutTransition","defaultLayoutTransition","isZeroBox","zeroAxis","Measure","syncLayout","framerSyncLayout","onUnmount","getSnapshotBeforeUpdate","syncUpdate","snapshotViewportBox","layoutAnimations","createLayoutState","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","identityProjection","buildLayoutProjectionTransformOrigin","updateLayoutDeltas","treePath","treeLength","node","applyTreeDeltas","FlatTree","isDirty","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","_resetTransform","_restoreTransform","removeValueFromRenderState","_sortNodePosition","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","createLifecycles","leadProjection","leadLatestValues","hasViewportBoxUpdated","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","_updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","isVisible","isMounted","newInstance","pointTo","addVariantChild","updateLayoutProjection","closestVariantNode","getClosestVariantNode","other","updateTreeLayoutProjection","getStaticValue","setStaticValue","visibility","scheduleRender","canMutate","removeValue","removeOnChange","latestValue","removeOnRenderRequest","bindToMotionValue","readValue","setBaseTarget","prevValue","existingValue","updateMotionValuesFromProps","getVariant","startAtParent","context_1","numVariantProps","variantProps","setCrossfader","newCrossfader","relativeTarget","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","parentProjection","calcRelativeBox","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","Entering","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","getPosFromMatrix","matrix","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","parseDomVariant","HTMLElement","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","mutableState","getOrigin","newValueKeys","numNewValues","targetValue","checkTargetForNewValues","isProjectionTranform","htmlVisualElement","svgVisualElement","_element","featureBundle","motion","baseConfig","enter","location","div","handleClose","ReactGranim","granim","granimRef","darkGradients","shuffle","random","granimStates","dark","light","GranimSSR","theme","ThemeContext","stickyRef","header","bodyClass","BodyClass","siteNavBackground","siteNavLogo","navigation","Navigation","navClass","items","navItem","role","Instagram","xmlns","viewBox","LinkedIn","Youtube","version","xmlSpace","xmlnsXlink","Switch","setTheme","useStickynav","isPost","activeClass","currentClass","setCurrentClass","navBackgroundClass","setNavBackgroundClass","lastScrollY","scrollY","ticking","trigger","triggerOffset","throttledScroll","passive","navLogo","SiteNav","postTitle","isHome","StickyNavigation","enableBackground","successMessage","setSuccessMessage","formClassname","setFormClassname","setEmail","onSubmit","preventDefault","addToMailchimp","catch","placeholder","autoComplete","_jsonp","require","__esModule","_emailValidator","subscribeEmailToMailchimp","reject","convertListFields","fields","queryParams","field","fieldTransformed","substring","_default","endpointOverride","isEmailValid","emailEncoded","endpoint","__GATSBY_PLUGIN_MAILCHIMP_ADDRESS__","__GATSBY_PLUGIN_MAILCHIMP_TIMEOUT__","subscribeSuccessMessage","subscribeCloseOverlay","subscribeCloseButton","subscribeOverlay","subscribeOverlayContent","subscribeForm","subscribeOverlayLogo","subscribeOverlayTitle","subscribeOverlayDescription","formGroup","subscribeEmail","loading","buttonLoader","subscribeFormTitle","subscribeFormDescription","messageError","messageSuccess","buttonContent","success","subscribeNotification","subscribeFailureMessage","subscribeFailure","subscribeSuccess"],"mappings":"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","file":"632f76e726b2f375e98333c79fac996debaa2d60-9e238f6c37fc3c2e527b.js","sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;","import memoize from '@emotion/memoize';\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\nexport default index;","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg)) {\n        if (arg.length) {\n          var inner = classNames.apply(null, arg);\n\n          if (inner) {\n            classes.push(inner);\n          }\n        }\n      } else if (argType === 'object') {\n        if (arg.toString === Object.prototype.toString) {\n          for (var key in arg) {\n            if (hasOwn.call(arg, key) && arg[key]) {\n              classes.push(key);\n            }\n          }\n        } else {\n          classes.push(arg.toString());\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","\"use strict\";\n\nvar tester = /^[-!#$%&'*+\\/0-9=?A-Z^_a-z{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/; // Thanks to:\n// http://fightingforalostcause.net/misc/2006/compare-email-regex.php\n// http://thedailywtf.com/Articles/Validating_Email_Addresses.aspx\n// http://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses/201378#201378\n\nexports.validate = function (email) {\n  if (!email) return false;\n  if (email.length > 254) return false;\n  var valid = tester.test(email);\n  if (!valid) return false; // Further checking of some things regex can't handle\n\n  var parts = email.split(\"@\");\n  if (parts[0].length > 64) return false;\n  var domainParts = parts[1].split(\".\");\n  if (domainParts.some(function (part) {\n    return part.length > 63;\n  })) return false;\n  return true;\n};","module.exports = require('./lib/Granim.js');","'use strict';\n\nfunction Granim(options) {\n  this.getElement(options.element);\n  this.x1 = 0;\n  this.y1 = 0;\n  this.name = options.name || false;\n  this.elToSetClassOn = options.elToSetClassOn || 'body';\n  this.direction = options.direction || 'diagonal';\n  this.customDirection = options.customDirection || {};\n  this.validateInput('direction');\n  this.isPausedWhenNotInView = options.isPausedWhenNotInView || false;\n  this.states = options.states;\n  this.stateTransitionSpeed = options.stateTransitionSpeed || 1000;\n  this.previousTimeStamp = null;\n  this.progress = 0;\n  this.isPaused = false;\n  this.isCleared = false;\n  this.isPausedBecauseNotInView = false;\n  this.context = this.canvas.getContext('2d');\n  this.channels = {};\n  this.channelsIndex = 0;\n  this.activeState = options.defaultStateName || 'default-state';\n  this.isChangingState = false;\n  this.currentColors = [];\n  this.currentColorsPos = [];\n  this.activetransitionSpeed = null;\n  this.eventPolyfill();\n  this.scrollDebounceThreshold = options.scrollDebounceThreshold || 300;\n  this.scrollDebounceTimeout = null;\n  this.isImgLoaded = false;\n  this.isCanvasInWindowView = false;\n  this.firstScrollInit = true;\n  this.animating = false;\n  this.gradientLength = this.states[this.activeState].gradients[0].length;\n\n  if (options.image && options.image.source) {\n    this.image = {\n      source: options.image.source,\n      position: options.image.position || ['center', 'center'],\n      stretchMode: options.image.stretchMode || false,\n      blendingMode: options.image.blendingMode || false\n    };\n  }\n\n  this.events = {\n    start: new CustomEvent('granim:start'),\n    end: new CustomEvent('granim:end'),\n    gradientChange: function gradientChange(details) {\n      return new CustomEvent('granim:gradientChange', {\n        detail: {\n          isLooping: details.isLooping,\n          colorsFrom: details.colorsFrom,\n          colorsTo: details.colorsTo,\n          activeState: details.activeState\n        },\n        bubbles: false,\n        cancelable: false\n      });\n    }\n  };\n  this.callbacks = {\n    onStart: typeof options.onStart === 'function' ? options.onStart : false,\n    onGradientChange: typeof options.onGradientChange === 'function' ? options.onGradientChange : false,\n    onEnd: typeof options.onEnd === 'function' ? options.onEnd : false\n  };\n  this.getDimensions();\n  this.canvas.setAttribute('width', this.x1);\n  this.canvas.setAttribute('height', this.y1);\n  this.setColors();\n\n  if (this.image) {\n    this.validateInput('image');\n    this.prepareImage();\n  }\n\n  this.pauseWhenNotInViewNameSpace = this.pauseWhenNotInView.bind(this);\n  this.setSizeAttributesNameSpace = this.setSizeAttributes.bind(this);\n  this.onResize();\n\n  if (this.isPausedWhenNotInView) {\n    this.onScroll();\n  } else {\n    if (!this.image) {\n      this.refreshColorsAndPos();\n      this.animation = requestAnimationFrame(this.animateColors.bind(this));\n      this.animating = true;\n    }\n  } // Callback and Event\n\n\n  if (this.callbacks.onStart) this.callbacks.onStart();\n  this.canvas.dispatchEvent(this.events.start);\n}\n\nGranim.prototype.animateColors = require('./animateColors.js');\nGranim.prototype.changeBlendingMode = require('./changeBlendingMode.js');\nGranim.prototype.changeDirection = require('./changeDirection.js');\nGranim.prototype.changeState = require('./changeState.js');\nGranim.prototype.clear = require('./clear.js');\nGranim.prototype.convertColorToRgba = require('./convertColorToRgba.js');\nGranim.prototype.destroy = require('./destroy.js');\nGranim.prototype.eventPolyfill = require('./eventPolyfill.js');\nGranim.prototype.getColor = require('./getColor.js');\nGranim.prototype.getColorDiff = require('./getColorDiff.js');\nGranim.prototype.getColorPos = require('./getColorPos.js');\nGranim.prototype.getColorPosDiff = require('./getColorPosDiff.js');\nGranim.prototype.getCurrentColors = require('./getCurrentColors.js');\nGranim.prototype.getCurrentColorsPos = require('./getCurrentColorsPos.js');\nGranim.prototype.getDimensions = require('./getDimensions.js');\nGranim.prototype.getElement = require('./getElement.js');\nGranim.prototype.getLightness = require('./getLightness.js');\nGranim.prototype.makeGradient = require('./makeGradient.js');\nGranim.prototype.onResize = require('./onResize.js');\nGranim.prototype.onScroll = require('./onScroll.js');\nGranim.prototype.pause = require('./pause.js');\nGranim.prototype.pauseWhenNotInView = require('./pauseWhenNotInView.js');\nGranim.prototype.play = require('./play.js');\nGranim.prototype.prepareImage = require('./prepareImage.js');\nGranim.prototype.refreshColorsAndPos = require('./refreshColorsAndPos.js');\nGranim.prototype.setColors = require('./setColors.js');\nGranim.prototype.setDirection = require('./setDirection.js');\nGranim.prototype.setSizeAttributes = require('./setSizeAttributes.js');\nGranim.prototype.triggerError = require('./triggerError.js');\nGranim.prototype.validateInput = require('./validateInput.js');\nmodule.exports = Granim;","'use strict';\n\nmodule.exports = function (timestamp) {\n  var wasWindowIdled = timestamp - this.previousTimeStamp > 100;\n  var isLoop = this.states[this.activeState].loop !== undefined ? this.states[this.activeState].loop : true;\n  var progressPercent, isLooping, nextGradient; // If tab was inactive then resumed, reset the previous timestamp\n\n  if (this.previousTimeStamp === null || wasWindowIdled) {\n    this.previousTimeStamp = timestamp;\n  } // Compute progress and save the timestamp\n\n\n  this.progress = this.progress + (timestamp - this.previousTimeStamp);\n  progressPercent = (this.progress / this.activetransitionSpeed * 100).toFixed(2);\n  this.previousTimeStamp = timestamp; // Set the new gradient colors in a property\n\n  this.refreshColorsAndPos(progressPercent); // Continue the animation or prepare for the next one\n\n  if (progressPercent < 100) {\n    this.animation = requestAnimationFrame(this.animateColors.bind(this));\n  } else {\n    // if the current animation index is inferior to the penultimate gradient\n    // or to the last gradient with the loop mode activated\n    if (this.channelsIndex < this.states[this.activeState].gradients.length - 2 || isLoop) {\n      // Set the active transition speed to the active state one after changing state\n      if (this.isChangingState) {\n        this.activetransitionSpeed = this.states[this.activeState].transitionSpeed || 5000;\n        this.isChangingState = false;\n      } // Resetting properties\n\n\n      this.previousTimeStamp = null;\n      this.progress = 0;\n      this.channelsIndex++;\n      isLooping = false; // If it's going to loop or if it's the transition after the loop\n\n      if (this.channelsIndex === this.states[this.activeState].gradients.length - 1) {\n        isLooping = true;\n      } else if (this.channelsIndex === this.states[this.activeState].gradients.length) {\n        this.channelsIndex = 0;\n      } // Checking the next gradient to send in args of an event and a callback\n\n\n      nextGradient = this.states[this.activeState].gradients[this.channelsIndex + 1] === undefined ? this.states[this.activeState].gradients[0] : this.states[this.activeState].gradients[this.channelsIndex + 1]; // Compute the colors for the transition and render a new frame\n\n      this.setColors();\n      this.animation = requestAnimationFrame(this.animateColors.bind(this)); // Callback and Event\n\n      if (this.callbacks.onGradientChange) {\n        this.callbacks.onGradientChange({\n          isLooping: isLooping,\n          colorsFrom: this.states[this.activeState].gradients[this.channelsIndex],\n          colorsTo: nextGradient,\n          activeState: this.activeState\n        });\n      }\n\n      this.canvas.dispatchEvent(this.events.gradientChange({\n        isLooping: isLooping,\n        colorsFrom: this.states[this.activeState].gradients[this.channelsIndex],\n        colorsTo: nextGradient,\n        activeState: this.activeState\n      })); // Else if it was the last gradient on the list and the loop mode is off\n    } else {\n      cancelAnimationFrame(this.animation); // Callback and Event\n\n      if (this.callbacks.onEnd) this.callbacks.onEnd();\n      this.canvas.dispatchEvent(new CustomEvent('granim:end'));\n    }\n  }\n};","'use strict';\n\nmodule.exports = function (newBlendingMode) {\n  this.context.clearRect(0, 0, this.x1, this.y1);\n  this.context.globalCompositeOperation = this.image.blendingMode = newBlendingMode;\n  this.validateInput('blendingMode');\n  if (this.isPaused) this.refreshColorsAndPos();\n};","'use strict';\n\nmodule.exports = function (newDirection) {\n  this.context.clearRect(0, 0, this.x1, this.y1);\n  this.direction = newDirection;\n  this.validateInput('direction');\n  if (this.isPaused) this.refreshColorsAndPos();\n};","'use strict';\n\nmodule.exports = function (newState) {\n  var _this = this; // Prevent transitioning to the same state\n\n\n  if (this.activeState === newState) {\n    return;\n  } // Setting the good properties for the transition\n\n\n  if (!this.isPaused) {\n    this.isPaused = true;\n    this.pause();\n  }\n\n  this.channelsIndex = -1;\n  this.activetransitionSpeed = this.stateTransitionSpeed;\n  this.activeColorsDiff = [];\n  this.activeColorsPosDiff = [];\n  this.activeColors = this.getCurrentColors();\n  this.activeColorsPos = this.getCurrentColorsPos();\n  this.progress = 0;\n  this.previousTimeStamp = null;\n  this.isChangingState = true; // Compute the gradient color and pos diff between the last frame gradient\n  // and the first one of the new state\n\n  this.states[newState].gradients[0].forEach(function (gradientColor, i, arr) {\n    var nextColors = _this.convertColorToRgba(_this.getColor(gradientColor));\n\n    var nextColorsPos = _this.getColorPos(gradientColor, i);\n\n    var colorDiff = _this.getColorDiff(_this.activeColors[i], nextColors);\n\n    var colorPosDiff = _this.getColorPosDiff(_this.activeColorsPos[i], nextColorsPos);\n\n    _this.activeColorsDiff.push(colorDiff);\n\n    _this.activeColorsPosDiff.push(colorPosDiff);\n  }); // Start the animation\n\n  this.activeState = newState;\n  this.play();\n};","'use strict';\n\nmodule.exports = function () {\n  if (!this.isPaused) {\n    cancelAnimationFrame(this.animation);\n  } else {\n    this.isPaused = false;\n  }\n\n  this.isCleared = true;\n  this.context.clearRect(0, 0, this.x1, this.y1);\n};","'use strict';\n\nvar regex = {\n  hexa: /^#(?:[0-9a-fA-F]{3}){1,2}$/,\n  rgba: /^rgba\\((\\d{1,3}), ?(\\d{1,3}), ?(\\d{1,3}), ?(.?\\d{1,3})\\)$/,\n  rgb: /^rgb\\((\\d{1,3}), ?(\\d{1,3}), ?(\\d{1,3})\\)$/,\n  hsla: /^hsla\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%, ?(.?\\d{1,3})\\)$/,\n  hsl: /^hsl\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%\\)$/\n},\n    match;\n\nmodule.exports = function (color) {\n  switch (identifyColorType(color)) {\n    default:\n      this.triggerError('colorType');\n\n    case 'hexa':\n      return hexToRgba(color);\n\n    case 'rgba':\n      return [parseInt(match[1], 10), parseInt(match[2], 10), parseInt(match[3], 10), parseFloat(match[4])];\n\n    case 'rgb':\n      return [parseInt(match[1], 10), parseInt(match[2], 10), parseInt(match[3], 10), 1];\n\n    case 'hsla':\n      return hslaToRgb(parseInt(match[1], 10) / 360, parseInt(match[2], 10) / 100, parseInt(match[3], 10) / 100, parseFloat(match[4]));\n\n    case 'hsl':\n      return hslaToRgb(parseInt(match[1], 10) / 360, parseInt(match[2], 10) / 100, parseInt(match[3], 10) / 100, 1);\n  }\n};\n\nfunction identifyColorType(color) {\n  var colorTypes = Object.keys(regex);\n  var i = 0;\n\n  for (i; i < colorTypes.length; i++) {\n    match = regex[colorTypes[i]].exec(color);\n    if (match) return colorTypes[i];\n  }\n\n  return false;\n}\n\nfunction hexToRgba(hex) {\n  // Expand shorthand form (e.g. '03F') to full form (e.g. '0033FF')\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n    return r + r + g + g + b + b;\n  });\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16), 1] : null;\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nfunction hslaToRgb(h, s, l, a) {\n  var r, g, b, q, p;\n\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), a];\n}","'use strict';\n\nmodule.exports = function () {\n  this.onResize('removeListeners');\n  this.onScroll('removeListeners');\n  this.clear();\n};","'use strict';\n\nmodule.exports = function () {\n  if (typeof window.CustomEvent === 'function') return;\n\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n};","'use strict';\n\nmodule.exports = function (gradientColor) {\n  if (typeof gradientColor === 'string') {\n    return gradientColor;\n  } else if (typeof gradientColor === 'object' && gradientColor.color) {\n    return gradientColor.color;\n  } else {\n    this.triggerError('gradient.color');\n  }\n};","'use strict';\n\nmodule.exports = function (colorA, colorB) {\n  var i = 0;\n  var colorDiff = [];\n\n  for (i; i < 4; i++) {\n    colorDiff.push(colorB[i] - colorA[i]);\n  }\n\n  return colorDiff;\n};","'use strict';\n\nmodule.exports = function (gradientColor, i) {\n  if (typeof gradientColor === 'object' && gradientColor.pos) {\n    return gradientColor.pos;\n  } else {\n    // Ensure first and last position to be 0 and 100\n    return parseFloat(!i ? 0 : (1 / (this.gradientLength - 1) * i).toFixed(2));\n  }\n};","'use strict';\n\nmodule.exports = function (posA, posB) {\n  return posB - posA;\n};","'use strict';\n\nmodule.exports = function () {\n  var i, j;\n  var currentColors = [];\n\n  for (i = 0; i < this.currentColors.length; i++) {\n    currentColors.push([]);\n\n    for (j = 0; j < 4; j++) {\n      currentColors[i].push(this.currentColors[i][j]);\n    }\n  } // Return a deep copy of the current colors\n\n\n  return currentColors;\n};","'use strict';\n\nmodule.exports = function () {\n  var currentColorsPos = [],\n      i;\n\n  for (i = 0; i < this.currentColorsPos.length; i++) {\n    currentColorsPos.push(this.currentColorsPos[i]);\n  } // Return a deep copy of the current colors\n\n\n  return currentColorsPos;\n};","'use strict';\n\nmodule.exports = function () {\n  this.x1 = this.canvas.offsetWidth;\n  this.y1 = this.canvas.offsetHeight;\n};","'use strict';\n\nmodule.exports = function (element) {\n  if (element instanceof HTMLCanvasElement) {\n    this.canvas = element;\n  } else if (typeof element === 'string') {\n    this.canvas = document.querySelector(element);\n  } else {\n    throw new Error('The element you used is neither a String, nor a HTMLCanvasElement');\n  }\n\n  if (!this.canvas) {\n    throw new Error('`' + element + '` could not be found in the DOM');\n  }\n};","'use strict';\n\nmodule.exports = function () {\n  var currentColors = this.getCurrentColors();\n  var gradientAverage = null;\n  var lightnessAverage, i;\n  var colorsAverage = currentColors.map(function (el) {\n    // Compute the average lightness of each color\n    // in the current gradient\n    return Math.max(el[0], el[1], el[2]);\n  });\n\n  for (i = 0; i < colorsAverage.length; i++) {\n    // Add all the average lightness of each color\n    gradientAverage = gradientAverage === null ? colorsAverage[i] : gradientAverage + colorsAverage[i];\n\n    if (i === colorsAverage.length - 1) {\n      // if it's the last lightness average\n      // divide it by the total length to\n      // have the global average lightness\n      lightnessAverage = Math.round(gradientAverage / (i + 1));\n    }\n  }\n\n  return lightnessAverage >= 128 ? 'light' : 'dark';\n};","'use strict';\n\nmodule.exports = function () {\n  var gradient = this.setDirection();\n  var elToSetClassOnClass = document.querySelector(this.elToSetClassOn).classList;\n  var i = 0;\n  this.context.clearRect(0, 0, this.x1, this.y1);\n\n  if (this.image) {\n    this.context.drawImage(this.imageNode, this.imagePosition.x, this.imagePosition.y, this.imagePosition.width, this.imagePosition.height);\n  }\n\n  for (i; i < this.currentColors.length; i++) {\n    gradient.addColorStop(this.currentColorsPos[i], 'rgba(' + this.currentColors[i][0] + ', ' + this.currentColors[i][1] + ', ' + this.currentColors[i][2] + ', ' + this.currentColors[i][3] + ')');\n  }\n\n  if (this.name) {\n    if (this.getLightness() === 'light') {\n      elToSetClassOnClass.remove(this.name + '-dark');\n      elToSetClassOnClass.add(this.name + '-light');\n    } else {\n      elToSetClassOnClass.remove(this.name + '-light');\n      elToSetClassOnClass.add(this.name + '-dark');\n    }\n  }\n\n  this.context.fillStyle = gradient;\n  this.context.fillRect(0, 0, this.x1, this.y1);\n};","'use strict';\n\nmodule.exports = function (type) {\n  if (type === 'removeListeners') {\n    window.removeEventListener('resize', this.setSizeAttributesNameSpace);\n    return;\n  }\n\n  window.addEventListener('resize', this.setSizeAttributesNameSpace);\n};","'use strict';\n\nmodule.exports = function (type) {\n  if (type === 'removeListeners') {\n    window.removeEventListener('scroll', this.pauseWhenNotInViewNameSpace);\n    return;\n  }\n\n  window.addEventListener('scroll', this.pauseWhenNotInViewNameSpace);\n  this.pauseWhenNotInViewNameSpace();\n};","'use strict';\n\nmodule.exports = function (state) {\n  var isPausedBecauseNotInView = state === 'isPausedBecauseNotInView';\n  if (this.isCleared) return;\n  if (!isPausedBecauseNotInView) this.isPaused = true;\n  cancelAnimationFrame(this.animation);\n  this.animating = false;\n};","'use strict';\n\nmodule.exports = function () {\n  var _this = this;\n\n  if (this.scrollDebounceTimeout) clearTimeout(this.scrollDebounceTimeout);\n  this.scrollDebounceTimeout = setTimeout(function () {\n    var elPos = _this.canvas.getBoundingClientRect();\n\n    _this.isCanvasInWindowView = !(elPos.bottom < 0 || elPos.right < 0 || elPos.left > window.innerWidth || elPos.top > window.innerHeight);\n\n    if (_this.isCanvasInWindowView) {\n      if (!_this.isPaused || _this.firstScrollInit) {\n        if (_this.image && !_this.isImgLoaded) {\n          return;\n        }\n\n        _this.isPausedBecauseNotInView = false;\n\n        _this.play('isPlayedBecauseInView');\n\n        _this.firstScrollInit = false;\n      }\n    } else {\n      if (!_this.image && _this.firstScrollInit) {\n        _this.refreshColorsAndPos();\n\n        _this.firstScrollInit = false;\n      }\n\n      if (!_this.isPaused && !_this.isPausedBecauseNotInView) {\n        _this.isPausedBecauseNotInView = true;\n\n        _this.pause('isPausedBecauseNotInView');\n      }\n    }\n  }, this.scrollDebounceThreshold);\n};","'use strict';\n\nmodule.exports = function (state) {\n  var isPlayedBecauseInView = state === 'isPlayedBecauseInView';\n  if (!isPlayedBecauseInView) this.isPaused = false;\n  this.isCleared = false;\n\n  if (!this.animating) {\n    this.animation = requestAnimationFrame(this.animateColors.bind(this));\n    this.animating = true;\n  }\n};","'use strict';\n\nmodule.exports = function () {\n  var _this = this;\n\n  if (!this.imagePosition) {\n    this.imagePosition = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  }\n\n  if (this.image.blendingMode) {\n    this.context.globalCompositeOperation = this.image.blendingMode;\n  }\n\n  if (this.imageNode) {\n    setImagePosition();\n    return;\n  }\n\n  this.imageNode = new Image();\n\n  this.imageNode.onerror = function () {\n    throw new Error('Granim: The image source is invalid.');\n  };\n\n  this.imageNode.onload = function () {\n    _this.imgOriginalWidth = _this.imageNode.width;\n    _this.imgOriginalHeight = _this.imageNode.height;\n    setImagePosition();\n\n    _this.refreshColorsAndPos();\n\n    if (!_this.isPausedWhenNotInView || _this.isCanvasInWindowView) {\n      _this.animation = requestAnimationFrame(_this.animateColors.bind(_this));\n    }\n\n    _this.isImgLoaded = true;\n  };\n\n  this.imageNode.src = this.image.source;\n\n  function setImagePosition() {\n    var i, currentAxis;\n\n    for (i = 0; i < 2; i++) {\n      currentAxis = !i ? 'x' : 'y';\n      setImageAxisPosition(currentAxis);\n    }\n\n    function setImageAxisPosition(axis) {\n      var canvasWidthOrHeight = _this[axis + '1'];\n      var imgOriginalWidthOrHeight = _this[axis === 'x' ? 'imgOriginalWidth' : 'imgOriginalHeight'];\n      var imageAlignIndex = axis === 'x' ? _this.image.position[0] : _this.image.position[1];\n      var imageAxisPosition;\n\n      switch (imageAlignIndex) {\n        case 'center':\n          imageAxisPosition = imgOriginalWidthOrHeight > canvasWidthOrHeight ? -(imgOriginalWidthOrHeight - canvasWidthOrHeight) / 2 : (canvasWidthOrHeight - imgOriginalWidthOrHeight) / 2;\n          _this.imagePosition[axis] = imageAxisPosition;\n          _this.imagePosition[axis === 'x' ? 'width' : 'height'] = imgOriginalWidthOrHeight;\n          break;\n\n        case 'top':\n          _this.imagePosition['y'] = 0;\n          _this.imagePosition['height'] = imgOriginalWidthOrHeight;\n          break;\n\n        case 'bottom':\n          _this.imagePosition['y'] = canvasWidthOrHeight - imgOriginalWidthOrHeight;\n          _this.imagePosition['height'] = imgOriginalWidthOrHeight;\n          break;\n\n        case 'right':\n          _this.imagePosition['x'] = canvasWidthOrHeight - imgOriginalWidthOrHeight;\n          _this.imagePosition['width'] = imgOriginalWidthOrHeight;\n          break;\n\n        case 'left':\n          _this.imagePosition['x'] = 0;\n          _this.imagePosition['width'] = imgOriginalWidthOrHeight;\n          break;\n      }\n\n      if (_this.image.stretchMode) {\n        imageAlignIndex = axis === 'x' ? _this.image.stretchMode[0] : _this.image.stretchMode[1];\n\n        switch (imageAlignIndex) {\n          case 'none':\n            break;\n\n          case 'stretch':\n            _this.imagePosition[axis] = 0;\n            _this.imagePosition[axis === 'x' ? 'width' : 'height'] = canvasWidthOrHeight;\n            break;\n\n          case 'stretch-if-bigger':\n            if (imgOriginalWidthOrHeight < canvasWidthOrHeight) break;\n            _this.imagePosition[axis] = 0;\n            _this.imagePosition[axis === 'x' ? 'width' : 'height'] = canvasWidthOrHeight;\n            break;\n\n          case 'stretch-if-smaller':\n            if (imgOriginalWidthOrHeight > canvasWidthOrHeight) break;\n            _this.imagePosition[axis] = 0;\n            _this.imagePosition[axis === 'x' ? 'width' : 'height'] = canvasWidthOrHeight;\n            break;\n        }\n      }\n    }\n  }\n};","'use strict';\n\nmodule.exports = function (progressPercent) {\n  var _this = this,\n      activeChannel,\n      activeChannelPos,\n      i,\n      j; // Loop through each colors of the active gradient\n\n\n  for (i = 0; i < this.activeColors.length; i++) {\n    // Generate RGBA colors\n    for (j = 0; j < 4; j++) {\n      // If color value [0-255] round to the integer,\n      // Else if opacity [0-1] round to 2 decimals\n      activeChannel = _this.activeColors[i][j] + (j !== 3 ? Math.ceil(_this.activeColorsDiff[i][j] / 100 * progressPercent) : Math.round(_this.activeColorsDiff[i][j] / 100 * progressPercent * 100) / 100); // Prevent colors values from going < 0 & > 255\n\n      if (activeChannel <= 255 && activeChannel >= 0) {\n        _this.currentColors[i][j] = activeChannel;\n      }\n    } // Generate gradient color position\n\n\n    activeChannelPos = parseFloat((_this.activeColorsPos[i] + _this.activeColorsPosDiff[i] / 100 * progressPercent).toFixed(4));\n\n    if (activeChannelPos <= 1 && activeChannelPos >= 0) {\n      _this.currentColorsPos[i] = activeChannelPos;\n    }\n  }\n\n  this.makeGradient();\n};","'use strict';\n\nmodule.exports = function () {\n  var _this = this,\n      colorDiff,\n      colorPosDiff,\n      nextColors,\n      nextColorsPos;\n\n  if (!this.channels[this.activeState]) this.channels[this.activeState] = []; // If the actual channel exist, reassign properties and exit\n  // (each channel is saved to prevent recomputing it each time)\n\n  if (this.channels[this.activeState][this.channelsIndex] !== undefined) {\n    this.activeColors = this.channels[this.activeState][this.channelsIndex].colors;\n    this.activeColorsDiff = this.channels[this.activeState][this.channelsIndex].colorsDiff;\n    this.activeColorsPos = this.channels[this.activeState][this.channelsIndex].colorsPos;\n    this.activeColorsPosDiff = this.channels[this.activeState][this.channelsIndex].colorsPosDiff;\n    return;\n  } // Set blank properties\n\n\n  this.channels[this.activeState].push([{}]);\n  this.channels[this.activeState][this.channelsIndex].colors = [];\n  this.channels[this.activeState][this.channelsIndex].colorsDiff = [];\n  this.channels[this.activeState][this.channelsIndex].colorsPos = [];\n  this.channels[this.activeState][this.channelsIndex].colorsPosDiff = [];\n  this.activeColors = [];\n  this.activeColorsDiff = [];\n  this.activeColorsPos = [];\n  this.activeColorsPosDiff = []; // Go on each gradient of the current state\n\n  this.states[this.activeState].gradients[this.channelsIndex].forEach(function (color, i) {\n    // Push the hex color converted to rgba on the channel and the active color properties\n    var colorPos = _this.getColorPos(color, i);\n\n    var color = _this.getColor(color);\n\n    var rgbaColor = _this.convertColorToRgba(color);\n\n    var activeChannel = _this.channels[_this.activeState];\n\n    activeChannel[_this.channelsIndex].colors.push(rgbaColor);\n\n    _this.activeColors.push(rgbaColor);\n\n    activeChannel[_this.channelsIndex].colorsPos.push(colorPos);\n\n    _this.activeColorsPos.push(colorPos); // If it's the first channel to be set, set the currentColors\n\n\n    if (!_this.isCurrentColorsSet) {\n      _this.currentColors.push(_this.convertColorToRgba(color));\n\n      _this.currentColorsPos.push(colorPos);\n    } // If it's the last gradient, compute the color diff between the last gradient and the first one,\n    // else between the penultimate one and the last one\n\n\n    if (_this.channelsIndex === _this.states[_this.activeState].gradients.length - 1) {\n      colorDiff = _this.getColorDiff(activeChannel[_this.channelsIndex].colors[i], activeChannel[0].colors[i]);\n      colorPosDiff = _this.getColorPosDiff(activeChannel[_this.channelsIndex].colorsPos[i], activeChannel[0].colorsPos[i]);\n    } else {\n      nextColors = _this.convertColorToRgba(_this.getColor(_this.states[_this.activeState].gradients[_this.channelsIndex + 1][i]));\n      nextColorsPos = _this.getColorPos(_this.states[_this.activeState].gradients[_this.channelsIndex + 1][i], i);\n      colorDiff = _this.getColorDiff(activeChannel[_this.channelsIndex].colors[i], nextColors);\n      colorPosDiff = _this.getColorPosDiff(activeChannel[_this.channelsIndex].colorsPos[i], nextColorsPos);\n    }\n\n    activeChannel[_this.channelsIndex].colorsDiff.push(colorDiff);\n\n    _this.activeColorsDiff.push(colorDiff);\n\n    activeChannel[_this.channelsIndex].colorsPosDiff.push(colorPosDiff);\n\n    _this.activeColorsPosDiff.push(colorPosDiff);\n  });\n  this.activetransitionSpeed = this.states[this.activeState].transitionSpeed || 5000;\n  this.isCurrentColorsSet = true;\n};","'use strict';\n\nmodule.exports = function () {\n  var ctx = this.context;\n\n  switch (this.direction) {\n    case 'diagonal':\n      return ctx.createLinearGradient(0, 0, this.x1, this.y1);\n\n    case 'left-right':\n      return ctx.createLinearGradient(0, 0, this.x1, 0);\n\n    case 'top-bottom':\n      return ctx.createLinearGradient(this.x1 / 2, 0, this.x1 / 2, this.y1);\n\n    case 'radial':\n      return ctx.createRadialGradient(this.x1 / 2, this.y1 / 2, this.x1 / 2, this.x1 / 2, this.y1 / 2, 0);\n\n    case 'custom':\n      return ctx.createLinearGradient(getCustomCoordinateInPixels(this.customDirection.x0, this.x1), getCustomCoordinateInPixels(this.customDirection.y0, this.y1), getCustomCoordinateInPixels(this.customDirection.x1, this.x1), getCustomCoordinateInPixels(this.customDirection.y1, this.y1));\n  }\n};\n\nfunction getCustomCoordinateInPixels(coordinate, size) {\n  return coordinate.indexOf('%') > -1 ? size / 100 * parseInt(coordinate.split('%')[0], 10) : parseInt(coordinate.split('px')[0], 10);\n}","'use strict';\n\nmodule.exports = function () {\n  this.getDimensions();\n  this.canvas.setAttribute('width', this.x1);\n  this.canvas.setAttribute('height', this.y1);\n  if (this.image) this.prepareImage();\n  this.refreshColorsAndPos();\n};","'use strict';\n\nmodule.exports = function (element) {\n  var siteURL = 'https://sarcadass.github.io/granim.js/api.html';\n  throw new Error('Granim: Input error on \"' + element + '\" option.\\nCheck the API ' + siteURL + '.');\n};","'use strict';\n\nmodule.exports = function (inputType) {\n  var xPositionValues = ['left', 'center', 'right'];\n  var yPositionValues = ['top', 'center', 'bottom'];\n  var stretchModeValues = ['none', 'stretch', 'stretch-if-smaller', 'stretch-if-bigger'];\n  var blendingModeValues = ['multiply', 'screen', 'normal', 'overlay', 'darken', 'lighten', 'lighter', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  var directionValues = ['diagonal', 'left-right', 'top-bottom', 'radial', 'custom'];\n\n  switch (inputType) {\n    case 'image':\n      // Validate image.position\n      if (!Array.isArray(this.image.position) || this.image.position.length !== 2 || xPositionValues.indexOf(this.image.position[0]) === -1 || yPositionValues.indexOf(this.image.position[1]) === -1) {\n        this.triggerError('image.position');\n      } // Validate image.stretchMode\n\n\n      if (this.image.stretchMode) {\n        if (!Array.isArray(this.image.stretchMode) || this.image.stretchMode.length !== 2 || stretchModeValues.indexOf(this.image.stretchMode[0]) === -1 || stretchModeValues.indexOf(this.image.stretchMode[1]) === -1) {\n          this.triggerError('image.stretchMode');\n        }\n      }\n\n      break;\n\n    case 'blendingMode':\n      if (blendingModeValues.indexOf(this.image.blendingMode) === -1) {\n        this.clear();\n        this.triggerError('blendingMode');\n      }\n\n      break;\n\n    case 'direction':\n      if (directionValues.indexOf(this.direction) === -1) {\n        this.triggerError('direction');\n      } else {\n        if (this.direction === 'custom') {\n          if (!areDefinedInPixelsOrPercentage([this.customDirection.x0, this.customDirection.x1, this.customDirection.y0, this.customDirection.y1])) {\n            this.triggerError('customDirection');\n          }\n        }\n      }\n\n      break;\n  }\n};\n\nfunction areDefinedInPixelsOrPercentage(array) {\n  var definedInPixelsOrPercentage = true,\n      i = 0,\n      value;\n\n  while (definedInPixelsOrPercentage && i < array.length) {\n    value = array[i];\n\n    if (typeof value !== 'string') {\n      definedInPixelsOrPercentage = false;\n    } else {\n      var splittedValue = null;\n      var unit = null;\n      if (value.indexOf('px') !== -1) unit = 'px';\n      if (value.indexOf('%') !== -1) unit = '%';\n      splittedValue = value.split(unit).filter(function (value) {\n        return value.length > 0;\n      }); // Check if there is a unit ('px' or '%'),\n      // a char before the unit,\n      // no char after the unit,\n      // the string without the unit is only composed of digits\n\n      if (!unit || splittedValue.length > 2 || !splittedValue[0] || splittedValue[1] || !/^-?\\d+\\.?\\d*$/.test(splittedValue[0])) {\n        definedInPixelsOrPercentage = false;\n      }\n    }\n\n    i++;\n  }\n\n  return definedInPixelsOrPercentage;\n}","/**\n * Module dependencies\n */\nvar debug = require('debug')('jsonp');\n/**\n * Module exports.\n */\n\n\nmodule.exports = jsonp;\n/**\n * Callback index.\n */\n\nvar count = 0;\n/**\n * Noop function.\n */\n\nfunction noop() {}\n/**\n * JSONP handler\n *\n * Options:\n *  - param {String} qs parameter (`callback`)\n *  - prefix {String} qs parameter (`__jp`)\n *  - name {String} qs parameter (`prefix` + incr)\n *  - timeout {Number} how long after a timeout error is emitted (`60000`)\n *\n * @param {String} url\n * @param {Object|Function} optional options / callback\n * @param {Function} optional callback\n */\n\n\nfunction jsonp(url, opts, fn) {\n  if ('function' == typeof opts) {\n    fn = opts;\n    opts = {};\n  }\n\n  if (!opts) opts = {};\n  var prefix = opts.prefix || '__jp'; // use the callback name that was passed if one was provided.\n  // otherwise generate a unique name by incrementing our counter.\n\n  var id = opts.name || prefix + count++;\n  var param = opts.param || 'callback';\n  var timeout = null != opts.timeout ? opts.timeout : 60000;\n  var enc = encodeURIComponent;\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script;\n  var timer;\n\n  if (timeout) {\n    timer = setTimeout(function () {\n      cleanup();\n      if (fn) fn(new Error('Timeout'));\n    }, timeout);\n  }\n\n  function cleanup() {\n    if (script.parentNode) script.parentNode.removeChild(script);\n    window[id] = noop;\n    if (timer) clearTimeout(timer);\n  }\n\n  function cancel() {\n    if (window[id]) {\n      cleanup();\n    }\n  }\n\n  window[id] = function (data) {\n    debug('jsonp got', data);\n    cleanup();\n    if (fn) fn(null, data);\n  }; // add qs component\n\n\n  url += (~url.indexOf('?') ? '&' : '?') + param + '=' + enc(id);\n  url = url.replace('?&', '?');\n  debug('jsonp req \"%s\"', url); // create script\n\n  script = document.createElement('script');\n  script.src = url;\n  target.parentNode.insertBefore(script, target);\n  return cancel;\n}","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome && 'undefined' != typeof chrome.storage ? chrome.storage.local : localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['lightseagreen', 'forestgreen', 'goldenrod', 'dodgerblue', 'darkorchid', 'crimson'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  } // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\n\nexports.formatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n  args[0] = (useColors ? '%c' : '') + this.namespace + (useColors ? ' %c' : ' ') + args[0] + (useColors ? '%c ' : ' ') + '+' + exports.humanize(this.diff);\n  if (!useColors) return;\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if ('%%' === match) return;\n    index++;\n\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch (e) {}\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.debug;\n  } catch (e) {} // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\n\nexports.enable(load());\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}","/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0,\n      i;\n\n  for (i in namespace) {\n    hash = (hash << 5) - hash + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\n\nfunction createDebug(namespace) {\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n    var self = debug; // set `diff` timestamp\n\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr; // turn the `arguments` into a proper Array\n\n    var args = new Array(arguments.length);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    } // apply any `formatters` transformations\n\n\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val); // now we need to remove `args[index]` since it's inlined in the `format`\n\n        args.splice(index, 1);\n        index--;\n      }\n\n      return match;\n    }); // apply env-specific formatting (colors, etc.)\n\n    exports.formatArgs.call(self, args);\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace); // env-specific initialization logic for debug instances\n\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n  exports.names = [];\n  exports.skips = [];\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n\n    namespaces = split[i].replace(/\\*/g, '.*?');\n\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n/**\n * Disable debug output.\n *\n * @api public\n */\n\n\nfunction disable() {\n  exports.enable('');\n}\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\n\nfunction enabled(name) {\n  var i, len;\n\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}","/**\n * Helpers.\n */\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n};\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\n\nfunction parse(str) {\n  str = String(str);\n\n  if (str.length > 100) {\n    return;\n  }\n\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\n  if (!match) {\n    return;\n  }\n\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n\n    default:\n      return undefined;\n  }\n}\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n\n  return ms + 'ms';\n}\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') || plural(ms, h, 'hour') || plural(ms, m, 'minute') || plural(ms, s, 'second') || ms + ' ms';\n}\n/**\n * Pluralization helper.\n */\n\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView; // Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    } // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n\n\n    var it;\n\n    if (hasMap && a instanceof Map && b instanceof Map) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      }\n\n      return true;\n    }\n\n    if (hasSet && a instanceof Set && b instanceof Set) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n\n      while (!(i = it.next()).done) {\n        if (!b.has(i.value[0])) return false;\n      }\n\n      return true;\n    } // END: Modifications\n\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (a[i] !== b[i]) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    } // END: fast-deep-equal\n    // START: react-fast-compare\n    // custom handling for DOM elements\n\n\n    if (hasElementType && a instanceof Element) return false; // custom handling for React/Preact\n\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n        continue;\n      } // all other properties should be traversed as usual\n\n\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    } // END: react-fast-compare\n    // START: fast-deep-equal\n\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n} // end fast-deep-equal\n\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if ((error.message || '').match(/stack|recursion/i)) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    } // some other error. we should definitely know about these\n\n\n    throw error;\n  }\n};","import PropTypes from 'prop-types';\nimport withSideEffect from 'react-side-effect';\nimport isEqual from 'react-fast-compare';\nimport React from 'react';\nimport objectAssign from 'object-assign';\nvar ATTRIBUTE_NAMES = {\n  BODY: \"bodyAttributes\",\n  HTML: \"htmlAttributes\",\n  TITLE: \"titleAttributes\"\n};\nvar TAG_NAMES = {\n  BASE: \"base\",\n  BODY: \"body\",\n  HEAD: \"head\",\n  HTML: \"html\",\n  LINK: \"link\",\n  META: \"meta\",\n  NOSCRIPT: \"noscript\",\n  SCRIPT: \"script\",\n  STYLE: \"style\",\n  TITLE: \"title\"\n};\nvar VALID_TAG_NAMES = Object.keys(TAG_NAMES).map(function (name) {\n  return TAG_NAMES[name];\n});\nvar TAG_PROPERTIES = {\n  CHARSET: \"charset\",\n  CSS_TEXT: \"cssText\",\n  HREF: \"href\",\n  HTTPEQUIV: \"http-equiv\",\n  INNER_HTML: \"innerHTML\",\n  ITEM_PROP: \"itemprop\",\n  NAME: \"name\",\n  PROPERTY: \"property\",\n  REL: \"rel\",\n  SRC: \"src\",\n  TARGET: \"target\"\n};\nvar REACT_TAG_MAP = {\n  accesskey: \"accessKey\",\n  charset: \"charSet\",\n  class: \"className\",\n  contenteditable: \"contentEditable\",\n  contextmenu: \"contextMenu\",\n  \"http-equiv\": \"httpEquiv\",\n  itemprop: \"itemProp\",\n  tabindex: \"tabIndex\"\n};\nvar HELMET_PROPS = {\n  DEFAULT_TITLE: \"defaultTitle\",\n  DEFER: \"defer\",\n  ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n  ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n  TITLE_TEMPLATE: \"titleTemplate\"\n};\nvar HTML_TAG_MAP = Object.keys(REACT_TAG_MAP).reduce(function (obj, key) {\n  obj[REACT_TAG_MAP[key]] = key;\n  return obj;\n}, {});\nvar SELF_CLOSING_TAGS = [TAG_NAMES.NOSCRIPT, TAG_NAMES.SCRIPT, TAG_NAMES.STYLE];\nvar HELMET_ATTRIBUTE = \"data-react-helmet\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n  var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (encode === false) {\n    return String(str);\n  }\n\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n  var innermostTitle = getInnermostProperty(propsList, TAG_NAMES.TITLE);\n  var innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n\n  if (innermostTemplate && innermostTitle) {\n    // use function arg to avoid need to escape $ characters\n    return innermostTemplate.replace(/%s/g, function () {\n      return Array.isArray(innermostTitle) ? innermostTitle.join(\"\") : innermostTitle;\n    });\n  }\n\n  var innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n  return getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[tagType] !== \"undefined\";\n  }).map(function (props) {\n    return props[tagType];\n  }).reduce(function (tagAttrs, current) {\n    return _extends({}, tagAttrs, current);\n  }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[TAG_NAMES.BASE] !== \"undefined\";\n  }).map(function (props) {\n    return props[TAG_NAMES.BASE];\n  }).reverse().reduce(function (innermostBaseTag, tag) {\n    if (!innermostBaseTag.length) {\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n          return innermostBaseTag.concat(tag);\n        }\n      }\n    }\n\n    return innermostBaseTag;\n  }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n  // Calculate list of tags, giving priority innermost component (end of the propslist)\n  var approvedSeenTags = {};\n  return propsList.filter(function (props) {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n\n    if (typeof props[tagName] !== \"undefined\") {\n      warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n    }\n\n    return false;\n  }).map(function (props) {\n    return props[tagName];\n  }).reverse().reduce(function (approvedTags, instanceTags) {\n    var instanceSeenTags = {};\n    instanceTags.filter(function (tag) {\n      var primaryAttributeKey = void 0;\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase(); // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        } // Special case for innerHTML which doesn't work lowercased\n\n\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === TAG_PROPERTIES.INNER_HTML || attributeKey === TAG_PROPERTIES.CSS_TEXT || attributeKey === TAG_PROPERTIES.ITEM_PROP)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n\n      var value = tag[primaryAttributeKey].toLowerCase();\n\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n\n      return false;\n    }).reverse().forEach(function (tag) {\n      return approvedTags.push(tag);\n    }); // Update seen tags with tags from this instance\n\n    var keys = Object.keys(instanceSeenTags);\n\n    for (var i = 0; i < keys.length; i++) {\n      var attributeKey = keys[i];\n      var tagUnion = objectAssign({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n\n    return approvedTags;\n  }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n  for (var i = propsList.length - 1; i >= 0; i--) {\n    var props = propsList[i];\n\n    if (props.hasOwnProperty(property)) {\n      return props[property];\n    }\n  }\n\n  return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n  return {\n    baseTag: getBaseTagFromPropsList([TAG_PROPERTIES.HREF, TAG_PROPERTIES.TARGET], propsList),\n    bodyAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY, propsList),\n    defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n    encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n    htmlAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML, propsList),\n    linkTags: getTagsFromPropsList(TAG_NAMES.LINK, [TAG_PROPERTIES.REL, TAG_PROPERTIES.HREF], propsList),\n    metaTags: getTagsFromPropsList(TAG_NAMES.META, [TAG_PROPERTIES.NAME, TAG_PROPERTIES.CHARSET, TAG_PROPERTIES.HTTPEQUIV, TAG_PROPERTIES.PROPERTY, TAG_PROPERTIES.ITEM_PROP], propsList),\n    noscriptTags: getTagsFromPropsList(TAG_NAMES.NOSCRIPT, [TAG_PROPERTIES.INNER_HTML], propsList),\n    onChangeClientState: getOnChangeClientState(propsList),\n    scriptTags: getTagsFromPropsList(TAG_NAMES.SCRIPT, [TAG_PROPERTIES.SRC, TAG_PROPERTIES.INNER_HTML], propsList),\n    styleTags: getTagsFromPropsList(TAG_NAMES.STYLE, [TAG_PROPERTIES.CSS_TEXT], propsList),\n    title: getTitleFromPropsList(propsList),\n    titleAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE, propsList)\n  };\n};\n\nvar rafPolyfill = function () {\n  var clock = Date.now();\n  return function (callback) {\n    var currentTime = Date.now();\n\n    if (currentTime - clock > 16) {\n      clock = currentTime;\n      callback(currentTime);\n    } else {\n      setTimeout(function () {\n        rafPolyfill(callback);\n      }, 0);\n    }\n  };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n  return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n  return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(function () {\n      commitTagChanges(newState, function () {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n  var baseTag = newState.baseTag,\n      bodyAttributes = newState.bodyAttributes,\n      htmlAttributes = newState.htmlAttributes,\n      linkTags = newState.linkTags,\n      metaTags = newState.metaTags,\n      noscriptTags = newState.noscriptTags,\n      onChangeClientState = newState.onChangeClientState,\n      scriptTags = newState.scriptTags,\n      styleTags = newState.styleTags,\n      title = newState.title,\n      titleAttributes = newState.titleAttributes;\n  updateAttributes(TAG_NAMES.BODY, bodyAttributes);\n  updateAttributes(TAG_NAMES.HTML, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  var tagUpdates = {\n    baseTag: updateTags(TAG_NAMES.BASE, baseTag),\n    linkTags: updateTags(TAG_NAMES.LINK, linkTags),\n    metaTags: updateTags(TAG_NAMES.META, metaTags),\n    noscriptTags: updateTags(TAG_NAMES.NOSCRIPT, noscriptTags),\n    scriptTags: updateTags(TAG_NAMES.SCRIPT, scriptTags),\n    styleTags: updateTags(TAG_NAMES.STYLE, styleTags)\n  };\n  var addedTags = {};\n  var removedTags = {};\n  Object.keys(tagUpdates).forEach(function (tagType) {\n    var _tagUpdates$tagType = tagUpdates[tagType],\n        newTags = _tagUpdates$tagType.newTags,\n        oldTags = _tagUpdates$tagType.oldTags;\n\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  cb && cb();\n  onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n  return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n  if (typeof title !== \"undefined\" && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n\n  updateAttributes(TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n  var elementTag = document.getElementsByTagName(tagName)[0];\n\n  if (!elementTag) {\n    return;\n  }\n\n  var helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n  var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n  var attributesToRemove = [].concat(helmetAttributes);\n  var attributeKeys = Object.keys(attributes);\n\n  for (var i = 0; i < attributeKeys.length; i++) {\n    var attribute = attributeKeys[i];\n    var value = attributes[attribute] || \"\";\n\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n\n    var indexToSave = attributesToRemove.indexOf(attribute);\n\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n\n  for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n    elementTag.removeAttribute(attributesToRemove[_i]);\n  }\n\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n    elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n  }\n};\n\nvar updateTags = function updateTags(type, tags) {\n  var headElement = document.head || document.querySelector(TAG_NAMES.HEAD);\n  var tagNodes = headElement.querySelectorAll(type + \"[\" + HELMET_ATTRIBUTE + \"]\");\n  var oldTags = Array.prototype.slice.call(tagNodes);\n  var newTags = [];\n  var indexToDelete = void 0;\n\n  if (tags && tags.length) {\n    tags.forEach(function (tag) {\n      var newElement = document.createElement(type);\n\n      for (var attribute in tag) {\n        if (tag.hasOwnProperty(attribute)) {\n          if (attribute === TAG_PROPERTIES.INNER_HTML) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === TAG_PROPERTIES.CSS_TEXT) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n\n      newElement.setAttribute(HELMET_ATTRIBUTE, \"true\"); // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n\n      if (oldTags.some(function (existingTag, index) {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n\n  oldTags.forEach(function (tag) {\n    return tag.parentNode.removeChild(tag);\n  });\n  newTags.forEach(function (tag) {\n    return headElement.appendChild(tag);\n  });\n  return {\n    oldTags: oldTags,\n    newTags: newTags\n  };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n  return Object.keys(attributes).reduce(function (str, key) {\n    var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n    return str ? str + \" \" + attr : attr;\n  }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n  var attributeString = generateElementAttributesAsString(attributes);\n  var flattenedTitle = flattenArray(title);\n  return attributeString ? \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n  return tags.reduce(function (str, tag) {\n    var attributeHtml = Object.keys(tag).filter(function (attribute) {\n      return !(attribute === TAG_PROPERTIES.INNER_HTML || attribute === TAG_PROPERTIES.CSS_TEXT);\n    }).reduce(function (string, attribute) {\n      var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n      return string ? string + \" \" + attr : attr;\n    }, \"\");\n    var tagContent = tag.innerHTML || tag.cssText || \"\";\n    var isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n    return str + \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n  }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n  var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(attributes).reduce(function (obj, key) {\n    obj[REACT_TAG_MAP[key] || key] = attributes[key];\n    return obj;\n  }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n  var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(props).reduce(function (obj, key) {\n    obj[HTML_TAG_MAP[key] || key] = props[key];\n    return obj;\n  }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n  var _initProps; // assigning into an array to define toString function on it\n\n\n  var initProps = (_initProps = {\n    key: title\n  }, _initProps[HELMET_ATTRIBUTE] = true, _initProps);\n  var props = convertElementAttributestoReactProps(attributes, initProps);\n  return [React.createElement(TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n  return tags.map(function (tag, i) {\n    var _mappedTag;\n\n    var mappedTag = (_mappedTag = {\n      key: i\n    }, _mappedTag[HELMET_ATTRIBUTE] = true, _mappedTag);\n    Object.keys(tag).forEach(function (attribute) {\n      var mappedAttribute = REACT_TAG_MAP[attribute] || attribute;\n\n      if (mappedAttribute === TAG_PROPERTIES.INNER_HTML || mappedAttribute === TAG_PROPERTIES.CSS_TEXT) {\n        var content = tag.innerHTML || tag.cssText;\n        mappedTag.dangerouslySetInnerHTML = {\n          __html: content\n        };\n      } else {\n        mappedTag[mappedAttribute] = tag[attribute];\n      }\n    });\n    return React.createElement(type, mappedTag);\n  });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n  switch (type) {\n    case TAG_NAMES.TITLE:\n      return {\n        toComponent: function toComponent() {\n          return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n        },\n        toString: function toString() {\n          return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n        }\n      };\n\n    case ATTRIBUTE_NAMES.BODY:\n    case ATTRIBUTE_NAMES.HTML:\n      return {\n        toComponent: function toComponent() {\n          return convertElementAttributestoReactProps(tags);\n        },\n        toString: function toString() {\n          return generateElementAttributesAsString(tags);\n        }\n      };\n\n    default:\n      return {\n        toComponent: function toComponent() {\n          return generateTagsAsReactComponent(type, tags);\n        },\n        toString: function toString() {\n          return generateTagsAsString(type, tags, encode);\n        }\n      };\n  }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n  var baseTag = _ref.baseTag,\n      bodyAttributes = _ref.bodyAttributes,\n      encode = _ref.encode,\n      htmlAttributes = _ref.htmlAttributes,\n      linkTags = _ref.linkTags,\n      metaTags = _ref.metaTags,\n      noscriptTags = _ref.noscriptTags,\n      scriptTags = _ref.scriptTags,\n      styleTags = _ref.styleTags,\n      _ref$title = _ref.title,\n      title = _ref$title === undefined ? \"\" : _ref$title,\n      titleAttributes = _ref.titleAttributes;\n  return {\n    base: getMethodsForTag(TAG_NAMES.BASE, baseTag, encode),\n    bodyAttributes: getMethodsForTag(ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n    link: getMethodsForTag(TAG_NAMES.LINK, linkTags, encode),\n    meta: getMethodsForTag(TAG_NAMES.META, metaTags, encode),\n    noscript: getMethodsForTag(TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n    script: getMethodsForTag(TAG_NAMES.SCRIPT, scriptTags, encode),\n    style: getMethodsForTag(TAG_NAMES.STYLE, styleTags, encode),\n    title: getMethodsForTag(TAG_NAMES.TITLE, {\n      title: title,\n      titleAttributes: titleAttributes\n    }, encode)\n  };\n};\n\nvar Helmet = function Helmet(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_React$Component) {\n    inherits(HelmetWrapper, _React$Component);\n\n    function HelmetWrapper() {\n      classCallCheck(this, HelmetWrapper);\n      return possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n    }\n\n    HelmetWrapper.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n      return !isEqual(this.props, nextProps);\n    };\n\n    HelmetWrapper.prototype.mapNestedChildrenToProps = function mapNestedChildrenToProps(child, nestedChildren) {\n      if (!nestedChildren) {\n        return null;\n      }\n\n      switch (child.type) {\n        case TAG_NAMES.SCRIPT:\n        case TAG_NAMES.NOSCRIPT:\n          return {\n            innerHTML: nestedChildren\n          };\n\n        case TAG_NAMES.STYLE:\n          return {\n            cssText: nestedChildren\n          };\n      }\n\n      throw new Error(\"<\" + child.type + \" /> elements are self-closing and can not contain children. Refer to our API for more information.\");\n    };\n\n    HelmetWrapper.prototype.flattenArrayTypeChildren = function flattenArrayTypeChildren(_ref) {\n      var _babelHelpers$extends;\n\n      var child = _ref.child,\n          arrayTypeChildren = _ref.arrayTypeChildren,\n          newChildProps = _ref.newChildProps,\n          nestedChildren = _ref.nestedChildren;\n      return _extends({}, arrayTypeChildren, (_babelHelpers$extends = {}, _babelHelpers$extends[child.type] = [].concat(arrayTypeChildren[child.type] || [], [_extends({}, newChildProps, this.mapNestedChildrenToProps(child, nestedChildren))]), _babelHelpers$extends));\n    };\n\n    HelmetWrapper.prototype.mapObjectTypeChildren = function mapObjectTypeChildren(_ref2) {\n      var _babelHelpers$extends2, _babelHelpers$extends3;\n\n      var child = _ref2.child,\n          newProps = _ref2.newProps,\n          newChildProps = _ref2.newChildProps,\n          nestedChildren = _ref2.nestedChildren;\n\n      switch (child.type) {\n        case TAG_NAMES.TITLE:\n          return _extends({}, newProps, (_babelHelpers$extends2 = {}, _babelHelpers$extends2[child.type] = nestedChildren, _babelHelpers$extends2.titleAttributes = _extends({}, newChildProps), _babelHelpers$extends2));\n\n        case TAG_NAMES.BODY:\n          return _extends({}, newProps, {\n            bodyAttributes: _extends({}, newChildProps)\n          });\n\n        case TAG_NAMES.HTML:\n          return _extends({}, newProps, {\n            htmlAttributes: _extends({}, newChildProps)\n          });\n      }\n\n      return _extends({}, newProps, (_babelHelpers$extends3 = {}, _babelHelpers$extends3[child.type] = _extends({}, newChildProps), _babelHelpers$extends3));\n    };\n\n    HelmetWrapper.prototype.mapArrayTypeChildrenToProps = function mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n      var newFlattenedProps = _extends({}, newProps);\n\n      Object.keys(arrayTypeChildren).forEach(function (arrayChildName) {\n        var _babelHelpers$extends4;\n\n        newFlattenedProps = _extends({}, newFlattenedProps, (_babelHelpers$extends4 = {}, _babelHelpers$extends4[arrayChildName] = arrayTypeChildren[arrayChildName], _babelHelpers$extends4));\n      });\n      return newFlattenedProps;\n    };\n\n    HelmetWrapper.prototype.warnOnInvalidChildren = function warnOnInvalidChildren(child, nestedChildren) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!VALID_TAG_NAMES.some(function (name) {\n          return child.type === name;\n        })) {\n          if (typeof child.type === \"function\") {\n            return warn(\"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.\");\n          }\n\n          return warn(\"Only elements types \" + VALID_TAG_NAMES.join(\", \") + \" are allowed. Helmet does not support rendering <\" + child.type + \"> elements. Refer to our API for more information.\");\n        }\n\n        if (nestedChildren && typeof nestedChildren !== \"string\" && (!Array.isArray(nestedChildren) || nestedChildren.some(function (nestedChild) {\n          return typeof nestedChild !== \"string\";\n        }))) {\n          throw new Error(\"Helmet expects a string as a child of <\" + child.type + \">. Did you forget to wrap your children in braces? ( <\" + child.type + \">{``}</\" + child.type + \"> ) Refer to our API for more information.\");\n        }\n      }\n\n      return true;\n    };\n\n    HelmetWrapper.prototype.mapChildrenToProps = function mapChildrenToProps(children, newProps) {\n      var _this2 = this;\n\n      var arrayTypeChildren = {};\n      React.Children.forEach(children, function (child) {\n        if (!child || !child.props) {\n          return;\n        }\n\n        var _child$props = child.props,\n            nestedChildren = _child$props.children,\n            childProps = objectWithoutProperties(_child$props, [\"children\"]);\n        var newChildProps = convertReactPropstoHtmlAttributes(childProps);\n\n        _this2.warnOnInvalidChildren(child, nestedChildren);\n\n        switch (child.type) {\n          case TAG_NAMES.LINK:\n          case TAG_NAMES.META:\n          case TAG_NAMES.NOSCRIPT:\n          case TAG_NAMES.SCRIPT:\n          case TAG_NAMES.STYLE:\n            arrayTypeChildren = _this2.flattenArrayTypeChildren({\n              child: child,\n              arrayTypeChildren: arrayTypeChildren,\n              newChildProps: newChildProps,\n              nestedChildren: nestedChildren\n            });\n            break;\n\n          default:\n            newProps = _this2.mapObjectTypeChildren({\n              child: child,\n              newProps: newProps,\n              newChildProps: newChildProps,\n              nestedChildren: nestedChildren\n            });\n            break;\n        }\n      });\n      newProps = this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n      return newProps;\n    };\n\n    HelmetWrapper.prototype.render = function render() {\n      var _props = this.props,\n          children = _props.children,\n          props = objectWithoutProperties(_props, [\"children\"]);\n\n      var newProps = _extends({}, props);\n\n      if (children) {\n        newProps = this.mapChildrenToProps(children, newProps);\n      }\n\n      return React.createElement(Component, newProps);\n    };\n\n    createClass(HelmetWrapper, null, [{\n      key: \"canUseDOM\",\n      // Component.peek comes from react-side-effect:\n      // For testing, you may use a static peek() method available on the returned component.\n      // It lets you get the current state without resetting the mounted instance stack.\n      // Dont use it for anything other than testing.\n\n      /**\n       * @param {Object} base: {\"target\": \"_blank\", \"href\": \"http://mysite.com/\"}\n       * @param {Object} bodyAttributes: {\"className\": \"root\"}\n       * @param {String} defaultTitle: \"Default Title\"\n       * @param {Boolean} defer: true\n       * @param {Boolean} encodeSpecialCharacters: true\n       * @param {Object} htmlAttributes: {\"lang\": \"en\", \"amp\": undefined}\n       * @param {Array} link: [{\"rel\": \"canonical\", \"href\": \"http://mysite.com/example\"}]\n       * @param {Array} meta: [{\"name\": \"description\", \"content\": \"Test description\"}]\n       * @param {Array} noscript: [{\"innerHTML\": \"<img src='http://mysite.com/js/test.js'\"}]\n       * @param {Function} onChangeClientState: \"(newState) => console.log(newState)\"\n       * @param {Array} script: [{\"type\": \"text/javascript\", \"src\": \"http://mysite.com/js/test.js\"}]\n       * @param {Array} style: [{\"type\": \"text/css\", \"cssText\": \"div { display: block; color: blue; }\"}]\n       * @param {String} title: \"Title\"\n       * @param {Object} titleAttributes: {\"itemprop\": \"name\"}\n       * @param {String} titleTemplate: \"MySite.com - %s\"\n       */\n      set: function set$$1(canUseDOM) {\n        Component.canUseDOM = canUseDOM;\n      }\n    }]);\n    return HelmetWrapper;\n  }(React.Component), _class.propTypes = {\n    base: PropTypes.object,\n    bodyAttributes: PropTypes.object,\n    children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n    defaultTitle: PropTypes.string,\n    defer: PropTypes.bool,\n    encodeSpecialCharacters: PropTypes.bool,\n    htmlAttributes: PropTypes.object,\n    link: PropTypes.arrayOf(PropTypes.object),\n    meta: PropTypes.arrayOf(PropTypes.object),\n    noscript: PropTypes.arrayOf(PropTypes.object),\n    onChangeClientState: PropTypes.func,\n    script: PropTypes.arrayOf(PropTypes.object),\n    style: PropTypes.arrayOf(PropTypes.object),\n    title: PropTypes.string,\n    titleAttributes: PropTypes.object,\n    titleTemplate: PropTypes.string\n  }, _class.defaultProps = {\n    defer: true,\n    encodeSpecialCharacters: true\n  }, _class.peek = Component.peek, _class.rewind = function () {\n    var mappedState = Component.rewind();\n\n    if (!mappedState) {\n      // provide fallback if mappedState is undefined\n      mappedState = mapStateOnServer({\n        baseTag: [],\n        bodyAttributes: {},\n        encodeSpecialCharacters: true,\n        htmlAttributes: {},\n        linkTags: [],\n        metaTags: [],\n        noscriptTags: [],\n        scriptTags: [],\n        styleTags: [],\n        title: \"\",\n        titleAttributes: {}\n      });\n    }\n\n    return mappedState;\n  }, _temp;\n};\n\nvar NullComponent = function NullComponent() {\n  return null;\n};\n\nvar HelmetSideEffects = withSideEffect(reducePropsToState, handleClientStateChange, mapStateOnServer)(NullComponent);\nvar HelmetExport = Helmet(HelmetSideEffects);\nHelmetExport.renderStatic = HelmetExport.rewind;\nexport default HelmetExport;\nexport { HelmetExport as Helmet };","import * as React from 'react';\nimport { Context } from './injectIntl';\nimport { invariantIntlContext } from '../utils';\nexport default function useIntl() {\n  var intl = React.useContext(Context);\n  invariantIntlContext(intl);\n  return intl;\n}","'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient, mapStateOnServer) {\n  if (typeof reducePropsToState !== 'function') {\n    throw new Error('Expected reducePropsToState to be a function.');\n  }\n\n  if (typeof handleStateChangeOnClient !== 'function') {\n    throw new Error('Expected handleStateChangeOnClient to be a function.');\n  }\n\n  if (typeof mapStateOnServer !== 'undefined' && typeof mapStateOnServer !== 'function') {\n    throw new Error('Expected mapStateOnServer to either be undefined or a function.');\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (typeof WrappedComponent !== 'function') {\n      throw new Error('Expected WrappedComponent to be a React component.');\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n\n      if (SideEffect.canUseDOM) {\n        handleStateChangeOnClient(state);\n      } else if (mapStateOnServer) {\n        state = mapStateOnServer(state);\n      }\n    }\n\n    var SideEffect = /*#__PURE__*/function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      } // Try to use displayName of wrapped component\n      // Expose canUseDOM so tests can monkeypatch it\n\n\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      SideEffect.rewind = function rewind() {\n        if (SideEffect.canUseDOM) {\n          throw new Error('You may only call rewind() on the server. Call peek() to read the current state.');\n        }\n\n        var recordedState = state;\n        state = undefined;\n        mountedInstances = [];\n        return recordedState;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return /*#__PURE__*/React__default.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(React.PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    _defineProperty(SideEffect, \"canUseDOM\", canUseDOM);\n\n    return SideEffect;\n  };\n}\n\nmodule.exports = withSideEffect;","import * as React from 'react';\nimport LocalizedLink from '~src/_i18n/components/localizedLink';\n//import {Link }from 'gatsby';\n\nconst Link = process.env.STORYBOOK\n\t? ({ children, to, ...props }) => (\n\t\t\t<a href={to} {...props}>\n\t\t\t\t{children}\n\t\t\t</a>\n\t  )\n\t: LocalizedLink;\n\nexport default Link;\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Link from 'gatsby-link';\nimport { LocaleContext } from '~src/context/Context/LocaleContext';\nimport { locales } from '~src/_i18n/i18n';\nimport { LinkInterface } from '~src/types/intl';\n\n// Use the globally available context to choose the right path\nconst LocalizedLink: React.FC<LinkInterface> = ({ to, locale, onClick, ...props }) => {\n\tconst { activeLocale /* , setLocale */ } = React.useContext(LocaleContext);\n\tconst targetLocale = locale ? locales[locale] : locales[activeLocale];\n\n\tconst handleClick = e => {\n\t\t/* SEEMS UNNECESSARY: test and remove\n\t\tif (locale) {\n\t\t setLocale(locale)\n\t\t}\n\t\t*/\n\t\tif (onClick) {\n\t\t\tonClick(e);\n\t\t}\n\t};\n\n\tconst isIndex = to === `/`;\n\n\t// If it's the default language, don't do anything\n\t// If it's another language, add the \"path\"\n\t// However, if the homepage/index page is linked don't add the \"to\"\n\t// Because otherwise this would add a trailing slash\n\tconst path = targetLocale.default ? to : `/${targetLocale.path}${isIndex ? `` : `${to}`}`;\n\n\treturn <Link onClick={handleClick} {...props} to={path} />;\n};\n\nLocalizedLink.propTypes = {\n\tchildren: PropTypes.node,\n\tto: PropTypes.string,\n\tlocale: PropTypes.string,\n};\n\nexport default LocalizedLink;\n","import * as React from 'react';\nimport { FormatDateOptions, useIntl } from 'react-intl';\nimport { LocaleContext } from '~src/context/Context/LocaleContext';\n\nconst useIntlHelper = () => {\n\tconst { activeLocale, locales } = React.useContext(LocaleContext);\n\tconst intl = useIntl();\n\tconst formatMessage = (id: string) => intl.formatMessage({ id: id });\n\tconst formatDate = (date: string | number | Date, options?: FormatDateOptions) =>\n\t\toptions ? intl.formatDate(date, options) : intl.formatDate(date, locales[activeLocale].formatOptions);\n\treturn { intl, activeLocale, locales, formatMessage, formatDate };\n};\n\nexport default useIntlHelper;\n","import * as React from 'react';\nimport cx from 'classnames';\nimport * as styles from './Footer.module.scss';\n//import { useLocaleContext } from '~src/context/Hooks/useLocaleContext';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\n//import Link from '~src/_i18n/components/Link';\n\nconst Footer = () => {\n\tconst { formatMessage, formatDate } = useIntlHelper();\n\n\treturn (\n\t\t<footer className={cx(styles.siteFooter, `outer`)}>\n\t\t\t<div className={cx(styles.siteFooterContent, `inner`)}>\n\t\t\t\t<section className=\"copyright\">\n\t\t\t\t\t{formatMessage('meta.title')} {formatMessage('footer.copyright')}\n\t\t\t\t\t{formatDate(new Date(2010, 1, 1), { year: 'numeric' })}-{formatDate(new Date(), { year: 'numeric' })}\n\t\t\t\t</section>\n\t\t\t\t{/* \t\t\t\t<span id=\"locale-switch\" className={null} role=\"menuitem\">\n\t\t\t\t\t<Link locale={'en'} to=\"/\">\n\t\t\t\t\t\t{' English '}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<span />\n\t\t\t\t\t<Link locale={'ar'} to=\"/\">\n\t\t\t\t\t\t{'  '}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<span />\n\t\t\t\t\t<Link locale={'fa'} to=\"/\">\n\t\t\t\t\t\t{'  '}\n\t\t\t\t\t</Link>\n\t\t\t\t</span> */}\n\t\t\t\t<nav className={styles.siteFooterNav}>\n\t\t\t\t\t<a href=\"/\">{formatMessage('footer.latest')}</a>\n\t\t\t\t\t<a href=\"/\">{formatMessage('footer.facebook')}</a>\n\t\t\t\t\t<a href=\"/about\">{formatMessage('meta.title')}</a>\n\t\t\t\t</nav>\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n\nexport default Footer;\n","// extracted by mini-css-extract-plugin\nexport var siteFooter = \"s_bv\";\nexport var siteFooterContent = \"s_bw\";\nexport var siteFooterNav = \"s_bx\";","import * as React from 'react';\nimport { Helmet } from 'react-helmet';\n\ninterface Props {\n\turl: string;\n\ttype: string;\n\ttitle: string;\n\tdesc: string;\n\timage: string;\n\tlocale: string;\n}\n\nexport const Facebook = ({ url, type, title, desc, image, locale }: Props) => (\n\t<Helmet>\n\t\t<meta property=\"og:locale\" content={locale} />\n\t\t<meta property=\"og:url\" content={url} />\n\t\t<meta property=\"og:type\" content={type} />\n\t\t<meta property=\"og:title\" content={title} />\n\t\t<meta property=\"og:description\" content={desc} />\n\t\t<meta property=\"og:image\" content={image} />\n\t\t<meta property=\"og:image:alt\" content={desc} />\n\t</Helmet>\n);\n","import * as React from 'react';\nimport { Helmet } from 'react-helmet';\n\ninterface Props {\n\ttype?: string; // optional denoted with ?\n\tusername: string;\n\ttitle: string;\n\tdesc: string;\n\timage: string;\n}\n\nexport const Twitter = ({ type = 'summary_large_image', username, title, desc, image }: Props) => (\n\t<Helmet>\n\t\t{username && <meta name=\"twitter:creator\" content={username} />}\n\t\t<meta name=\"twitter:card\" content={type} />\n\t\t<meta name=\"twitter:title\" content={title} />\n\t\t<meta name=\"twitter:description\" content={desc} />\n\t\t<meta name=\"twitter:image\" content={image} />\n\t\t<meta name=\"twitter:image:alt\" content={desc} />\n\t</Helmet>\n);\n","import * as React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Facebook } from './Facebook';\nimport { Twitter } from './Twitter';\n\ninterface Props {\n\ttitle: string;\n\ttitleTemplate: string;\n\ttitleSeparator?: string;\n\tdescription: string;\n\tpathname: string;\n\tarticle?: boolean;\n\timage?: string;\n\tsiteLanguage: string;\n\tsiteLocale: string;\n\tsiteDirection: string;\n\ttwitterUsername: string;\n\tauthor?: string;\n\tdatePublished?: string;\n\tdateModified?: string;\n}\n\nexport const SEO = ({\n\ttitle,\n\ttitleTemplate,\n\ttitleSeparator,\n\tdescription,\n\tpathname,\n\tarticle = false,\n\timage,\n\tsiteLanguage,\n\tsiteLocale,\n\tsiteDirection,\n\ttwitterUsername,\n\tauthor = 'J Doe.',\n\tdatePublished,\n\tdateModified,\n}: Props) => {\n\tconst seo = {\n\t\ttitle: title.slice(0, 70),\n\t\tdescription: description.slice(0, 160),\n\t\tdatePublished: datePublished ? datePublished : new Date(Date.now()).toISOString(),\n\t\tdateModified: dateModified ? dateModified : new Date(Date.now()).toISOString(),\n\t};\n\n\tconst copyrightYear = new Date().getFullYear();\n\n\t// schema.org in JSONLD format\n\t// https://developers.google.com/search/docs/guides/intro-structured-data\n\t// You can fill out the 'author', 'creator' with more data or another type (e.g. 'Organization')\n\t// Structured Data Testing Tool >>\n\t// https://search.google.com/structured-data/testing-tool\n\n\tconst schemaOrgWebPage = {\n\t\t'@context': 'http://schema.org',\n\t\t'@type': 'WebPage',\n\t\turl: pathname,\n\t\theadline: seo.description,\n\t\tinLanguage: siteLanguage,\n\t\tmainEntityOfPage: pathname,\n\t\tdescription: seo.description,\n\t\tname: seo.title,\n\t\tauthor: {\n\t\t\t'@type': 'Person',\n\t\t\tname: author,\n\t\t},\n\t\tcopyrightHolder: {\n\t\t\t'@type': 'Person',\n\t\t\tname: author,\n\t\t},\n\t\tcopyrightYear,\n\t\tcreator: {\n\t\t\t'@type': 'Person',\n\t\t\tname: author,\n\t\t},\n\t\tpublisher: {\n\t\t\t'@type': 'Person',\n\t\t\tname: author,\n\t\t},\n\t\tdatePublished: seo.datePublished,\n\t\tdateModified: seo.dateModified,\n\t\timage: {\n\t\t\t'@type': 'ImageObject',\n\t\t\turl: `${image}`,\n\t\t},\n\t};\n\n\t// Initial breadcrumb list\n\n\tconst itemListElement = [\n\t\t{\n\t\t\t'@type': 'ListItem',\n\t\t\titem: {\n\t\t\t\t'@id': pathname,\n\t\t\t\tname: 'Homepage',\n\t\t\t},\n\t\t\tposition: 1,\n\t\t},\n\t];\n\n\tlet schemaArticle = null;\n\n\tif (article) {\n\t\tschemaArticle = {\n\t\t\t'@context': 'http://schema.org',\n\t\t\t'@type': 'Article',\n\t\t\tauthor: {\n\t\t\t\t'@type': 'Person',\n\t\t\t\tname: author,\n\t\t\t},\n\t\t\tcopyrightHolder: {\n\t\t\t\t'@type': 'Person',\n\t\t\t\tname: author,\n\t\t\t},\n\t\t\tcopyrightYear,\n\t\t\tcreator: {\n\t\t\t\t'@type': 'Person',\n\t\t\t\tname: author,\n\t\t\t},\n\t\t\tpublisher: {\n\t\t\t\t'@type': 'Organization',\n\t\t\t\tname: author,\n\t\t\t\tlogo: {\n\t\t\t\t\t'@type': 'ImageObject',\n\t\t\t\t\turl: `${image}`,\n\t\t\t\t},\n\t\t\t},\n\t\t\tdatePublished: seo.datePublished,\n\t\t\tdateModified: seo.dateModified,\n\t\t\tdescription: seo.description,\n\t\t\theadline: seo.title,\n\t\t\tinLanguage: siteLanguage,\n\t\t\turl: pathname,\n\t\t\tname: seo.title,\n\t\t\timage: {\n\t\t\t\t'@type': 'ImageObject',\n\t\t\t\turl: image,\n\t\t\t},\n\t\t\tmainEntityOfPage: pathname,\n\t\t};\n\t\t// Push current blog post into breadcrumb list\n\t\titemListElement.push({\n\t\t\t'@type': 'ListItem',\n\t\t\titem: {\n\t\t\t\t'@id': pathname,\n\t\t\t\tname: seo.title,\n\t\t\t},\n\t\t\tposition: 2,\n\t\t});\n\t}\n\n\tconst breadcrumb = {\n\t\t'@context': 'http://schema.org',\n\t\t'@type': 'BreadcrumbList',\n\t\tdescription: 'Breadcrumbs list',\n\t\tname: 'Breadcrumbs',\n\t\titemListElement,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Helmet title={seo.title} titleTemplate={`%s ${titleSeparator ? titleSeparator : ``} ${titleTemplate}`}>\n\t\t\t\t<html lang={siteLanguage ? siteLanguage : 'en'} dir={siteDirection ? siteDirection : 'ltr'} />\n\t\t\t\t<link rel=\"canonical\" href={pathname} />\n\t\t\t\t<meta name=\"description\" content={seo.description} />\n\n\t\t\t\t{!article && <script type=\"application/ld+json\">{JSON.stringify(schemaOrgWebPage)}</script>}\n\t\t\t\t{article && <script type=\"application/ld+json\">{JSON.stringify(schemaArticle)}</script>}\n\t\t\t\t<script type=\"application/ld+json\">{JSON.stringify(breadcrumb)}</script>\n\t\t\t</Helmet>\n\t\t\t{image && (\n\t\t\t\t<>\n\t\t\t\t\t<Facebook\n\t\t\t\t\t\tdesc={seo.description}\n\t\t\t\t\t\timage={image}\n\t\t\t\t\t\ttitle={seo.title}\n\t\t\t\t\t\ttype={article ? 'article' : 'website'}\n\t\t\t\t\t\turl={pathname}\n\t\t\t\t\t\tlocale={siteLocale ? siteLocale : 'en_gb'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Twitter title={seo.title} image={image} desc={seo.description} username={twitterUsername} />\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import * as React from 'react';\n//import * as PropTypes from 'prop-types';\nimport { Helmet } from 'react-helmet';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport { useLocaleContext } from '~src/context/Hooks/useLocaleContext';\nimport { SEO } from './Meta/SEO';\nimport { getMetadata } from './getMetadata';\nimport { useLocation } from '@reach/router';\nimport siteImg from '~src/_assets/images/alzahra-logo.png';\n\nconst DocumentHead = ({ className, template, data }) => {\n\tconst { activeLocale } = useLocaleContext();\n\tconst { formatMessage } = useIntlHelper();\n\tconst site = {\n\t\ttitle: formatMessage('meta.title'),\n\t\tdesc: formatMessage('meta.desc'),\n\t\tnotFound: formatMessage('notFound.title'),\n\t\timage: siteImg,\n\t\turl: 'https://alzahravfx.com',\n\t\ttwitter: 'twitter',\n\t\tlanguage: activeLocale == 'en' ? 'en' : 'fa',\n\t\tlocale: activeLocale == 'en' ? 'en_US' : 'fa_IR',\n\t\tdirection: activeLocale == 'en' ? 'ltr' : 'rtl',\n\t};\n\n\tconst seo = getMetadata(data, template, site, formatMessage);\n\tconst { pathname } = useLocation();\n\treturn (\n\t\t<>\n\t\t\t<SEO\n\t\t\t\ttitle={template === 'home' ? site.title : seo.title}\n\t\t\t\ttitleTemplate={template === 'home' ? site.desc : site.title}\n\t\t\t\ttitleSeparator={` - `}\n\t\t\t\tdescription={seo.desc || 'nothing'}\n\t\t\t\timage={seo.image}\n\t\t\t\tpathname={`${site.url}${pathname}`}\n\t\t\t\tsiteLanguage={site.language}\n\t\t\t\tsiteLocale={site.locale}\n\t\t\t\tsiteDirection={site.direction}\n\t\t\t\ttwitterUsername={template === 'author' ? seo.twitter : site.twitter}\n\t\t\t\tauthor={site.title}\n\t\t\t\tarticle={template === 'post' ? true : false}\n\t\t\t\tdatePublished={template === 'post' ? seo.date : null}\n\t\t\t/>\n\t\t\t<Helmet>\n\t\t\t\t<body className={className} />\n\t\t\t</Helmet>\n\t\t</>\n\t);\n};\n\n/* DocumentHead.propTypes = {\n\tsite: PropTypes.object.isRequired,\n\tclassName: PropTypes.string.isRequired,\n};\n */\nexport default DocumentHead;\n","import * as React from 'react';\nimport { LocaleContext } from '../Context/LocaleContext';\n\nexport const useLocaleContext = () => {\n\tconst localeContext = React.useContext(LocaleContext);\n\n\treturn localeContext;\n};\n","//import { Index } from '~src/pages/__generated__/Index';\nimport { Post } from '~src/templates/__generated__/Post';\nimport { Page } from '~src/templates/__generated__/Page';\nimport { Tag } from '~src/templates/__generated__/Tag';\n\ninterface MetaDataInterface {\n\ttitle: string;\n\tdesc: string;\n\timage: string;\n\tdate?: string;\n\tauthor?: string;\n\ttwitter?: string;\n}\nexport function getMetadata(\n\tdata: Page | Post | Tag,\n\ttemplate: string,\n\tsite: {\n\t\ttitle: string;\n\t\tdesc: string;\n\t\timage: string;\n\t\turl: string;\n\t\ttwitter: string;\n\t\tlanguage: string;\n\t\tlocale: string;\n\t\tdirection: string;\n\t\tnotFound: string;\n\t},\n\tformatMessage: { (id: string): string; (arg0: string): unknown },\n): MetaDataInterface {\n\tif (template === 'home') {\n\t\tconst seo = {\n\t\t\ttitle: site.title,\n\t\t\tdesc: site.desc,\n\t\t\timage: site.image,\n\t\t};\n\t\treturn seo;\n\t}\n\tif (template === 'notfound') {\n\t\tconst seo = {\n\t\t\ttitle: site.notFound,\n\t\t\tdesc: site.desc,\n\t\t\timage: site.image,\n\t\t};\n\t\treturn seo;\n\t}\n\tif (template === 'page') {\n\t\tconst seo = {\n\t\t\ttitle: (data as Page).page.frontmatter.title,\n\t\t\tdesc: (data as Page).page.excerpt,\n\t\t\timage: site.image,\n\t\t};\n\t\treturn seo;\n\t}\n\tif (template === 'post') {\n\t\tconst seo = {\n\t\t\ttitle: (data as Post).post.frontmatter.title,\n\t\t\tdesc: (data as Post).post.excerpt,\n\t\t\timage: `${site.url}${(data as Post).post.frontmatter.image.childImageSharp.gatsbyImageData.src}`,\n\t\t\tdate: (data as Post).post.frontmatter.date,\n\t\t\t//author: formatMessage(`authors.${(data as Post).post.frontmatter.authors[0].id}.title`) || site.title,\n\t\t};\n\n\t\treturn seo;\n\t}\n\n\tif (template === 'tag') {\n\t\tconst seo = {\n\t\t\ttitle: formatMessage(`tags.${(data as Tag).tag.id}.title`),\n\t\t\tdesc: formatMessage(`tags.${(data as Tag).tag.id}.desc`),\n\t\t\timage: (data as Tag).tag.image ? `${site.url}${(data as Tag).tag.image.childImageSharp.gatsbyImageData.src}` : site.image,\n\t\t};\n\t\treturn seo;\n\t} else {\n\t\tconst seo = {\n\t\t\ttitle: site.title,\n\t\t\tdesc: site.desc,\n\t\t\timage: site.image,\n\t\t};\n\t\treturn seo;\n\t}\n}\n","import * as React from 'react';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport siteLogo from '~src/_assets/images/alzahra-logo.png';\nimport * as styles from './Subscribe.module.scss';\nimport SubscribeForm from './Subscribe';\n\nconst SubscribeOverlay = () => {\n\tconst { formatMessage } = useIntlHelper();\n\t/* \tfunction handleClose(e: { preventDefault: () => void }) {\n\t\te.preventDefault();\n\t} */\n\treturn (\n\t\t<div id=\"subscribe\" className={styles.subscribeOverlay}>\n\t\t\t<a className={styles.subscribeCloseOverlay} /* onClick={() => handleClose()} */ href=\"##\"></a>\n\t\t\t<a className={styles.subscribeCloseButton} /* onClick={() => handleClose()} */ href=\"##\"></a>\n\t\t\t<div className={styles.subscribeOverlayContent}>\n\t\t\t\t<img className={styles.subscribeOverlayLogo} src={siteLogo} alt=\"Ghost\" />\n\t\t\t\t<div className={styles.subscribeForm}>\n\t\t\t\t\t<h1 className={styles.subscribeOverlayTitle}> {formatMessage('subscribe.title')}</h1>\n\t\t\t\t\t<p className={styles.subscribeOverlayDescription}>{formatMessage('subscribe.desc')}</p>\n\t\t\t\t\t<SubscribeForm />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default SubscribeOverlay;\n","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n  return useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\nexport { useUnmountEffect };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar PresenceContext = createContext(null);\nexport { PresenceContext };","import { useRef } from 'react';\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\n\nfunction useConstant(init) {\n  var ref = useRef(null);\n\n  if (ref.current === null) {\n    ref.current = init();\n  }\n\n  return ref.current;\n}\n\nexport { useConstant };","import * as React from 'react';\nimport { useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\nvar presenceId = 0;\n\nfunction getPresenceId() {\n  var id = presenceId;\n  presenceId++;\n  return id;\n}\n\nvar PresenceChild = function PresenceChild(_a) {\n  var children = _a.children,\n      initial = _a.initial,\n      isPresent = _a.isPresent,\n      _onExitComplete = _a.onExitComplete,\n      custom = _a.custom,\n      presenceAffectsLayout = _a.presenceAffectsLayout;\n  var presenceChildren = useConstant(newChildrenMap);\n  var id = useConstant(getPresenceId);\n  var context = useMemo(function () {\n    return {\n      id: id,\n      initial: initial,\n      isPresent: isPresent,\n      custom: custom,\n      onExitComplete: function onExitComplete(childId) {\n        presenceChildren.set(childId, true);\n        var allComplete = true;\n        presenceChildren.forEach(function (isComplete) {\n          if (!isComplete) allComplete = false;\n        });\n        allComplete && (_onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete());\n      },\n      register: function register(childId) {\n        presenceChildren.set(childId, false);\n        return function () {\n          return presenceChildren.delete(childId);\n        };\n      }\n    };\n  },\n  /**\n   * If the presence of a child affects the layout of the components around it,\n   * we want to make a new context value to ensure they get re-rendered\n   * so they can detect that layout change.\n   */\n  presenceAffectsLayout ? undefined : [isPresent]);\n  useMemo(function () {\n    presenceChildren.forEach(function (_, key) {\n      return presenceChildren.set(key, false);\n    });\n  }, [isPresent]);\n  /**\n   * If there's no `motion` components to fire exit animations, we want to remove this\n   * component immediately.\n   */\n\n  React.useEffect(function () {\n    !isPresent && !presenceChildren.size && (_onExitComplete === null || _onExitComplete === void 0 ? void 0 : _onExitComplete());\n  }, [isPresent]);\n  return React.createElement(PresenceContext.Provider, {\n    value: context\n  }, children);\n};\n\nfunction newChildrenMap() {\n  return new Map();\n}\n\nexport { PresenceChild };","var defaultTimestep = 1 / 60 * 1000;\nvar getCurrentTime = typeof performance !== \"undefined\" ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nvar onNextFrame = typeof window !== \"undefined\" ? function (callback) {\n  return window.requestAnimationFrame(callback);\n} : function (callback) {\n  return setTimeout(function () {\n    return callback(getCurrentTime());\n  }, defaultTimestep);\n};\nexport { defaultTimestep, onNextFrame };","import { onNextFrame, defaultTimestep } from './on-next-frame.js';\nimport { createRenderStep } from './create-render-step.js';\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = createRenderStep(function () {\n    return runNextFrame = true;\n  });\n  return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  var step = steps[key];\n\n  acc[key] = function (process, keepAlive, immediate) {\n    if (keepAlive === void 0) {\n      keepAlive = false;\n    }\n\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    if (!runNextFrame) startLoop();\n    return step.schedule(process, keepAlive, immediate);\n  };\n\n  return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\nvar flushSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n  acc[key] = function () {\n    return steps[key].process(frame);\n  };\n\n  return acc;\n}, {});\n\nvar processStep = function processStep(stepId) {\n  return steps[stepId].process(frame);\n};\n\nvar processFrame = function processFrame(timestamp) {\n  runNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (runNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nvar startLoop = function startLoop() {\n  runNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nvar getFrameData = function getFrameData() {\n  return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };","function createRenderStep(runNextFrame) {\n  var toRun = [];\n  var toRunNextFrame = [];\n  var numToRun = 0;\n  var isProcessing = false;\n  var toKeepAlive = new WeakSet();\n  var step = {\n    schedule: function schedule(callback, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n\n      if (immediate === void 0) {\n        immediate = false;\n      }\n\n      var addToCurrentFrame = immediate && isProcessing;\n      var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n      if (keepAlive) toKeepAlive.add(callback);\n\n      if (buffer.indexOf(callback) === -1) {\n        buffer.push(callback);\n        if (addToCurrentFrame && isProcessing) numToRun = toRun.length;\n      }\n\n      return callback;\n    },\n    cancel: function cancel(callback) {\n      var index = toRunNextFrame.indexOf(callback);\n      if (index !== -1) toRunNextFrame.splice(index, 1);\n      toKeepAlive.delete(callback);\n    },\n    process: function process(frameData) {\n      var _a;\n\n      isProcessing = true;\n      _a = [toRunNextFrame, toRun], toRun = _a[0], toRunNextFrame = _a[1];\n      toRunNextFrame.length = 0;\n      numToRun = toRun.length;\n\n      if (numToRun) {\n        for (var i = 0; i < numToRun; i++) {\n          var callback = toRun[i];\n          callback(frameData);\n\n          if (toKeepAlive.has(callback)) {\n            step.schedule(callback);\n            runNextFrame();\n          }\n        }\n      }\n\n      isProcessing = false;\n    }\n  };\n  return step;\n}\n\nexport { createRenderStep };","function noop(any) {\n  return any;\n}\n\nexport { noop };","import { __assign } from 'tslib';\nimport { noop } from '../noop.js';\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\n\nfunction convertBoundingBoxToAxisBox(_a) {\n  var top = _a.top,\n      left = _a.left,\n      right = _a.right,\n      bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\n\nfunction convertAxisBoxToBoundingBox(_a) {\n  var x = _a.x,\n      y = _a.y;\n  return {\n    top: y.min,\n    bottom: y.max,\n    left: x.min,\n    right: x.max\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\n\n\nfunction transformBoundingBox(_a, transformPoint) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n\n  if (transformPoint === void 0) {\n    transformPoint = noop;\n  }\n\n  var topLeft = transformPoint({\n    x: left,\n    y: top\n  });\n  var bottomRight = transformPoint({\n    x: right,\n    y: bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\n/**\n * Create an empty axis box of zero size\n */\n\n\nfunction axisBox() {\n  return {\n    x: {\n      min: 0,\n      max: 1\n    },\n    y: {\n      min: 0,\n      max: 1\n    }\n  };\n}\n\nfunction copyAxisBox(box) {\n  return {\n    x: __assign({}, box.x),\n    y: __assign({}, box.y)\n  };\n}\n/**\n * Create an empty box delta\n */\n\n\nvar zeroDelta = {\n  translate: 0,\n  scale: 1,\n  origin: 0,\n  originPoint: 0\n};\n\nfunction delta() {\n  return {\n    x: __assign({}, zeroDelta),\n    y: __assign({}, zeroDelta)\n  };\n}\n\nexport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox, copyAxisBox, delta, transformBoundingBox };","var compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\n\nexport { compareByDepth };","import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction isProjecting(visualElement) {\n  var isEnabled = visualElement.projection.isEnabled;\n  return isEnabled || visualElement.shouldResetTransform();\n}\n\nfunction collectProjectingAncestors(visualElement, ancestors) {\n  if (ancestors === void 0) {\n    ancestors = [];\n  }\n\n  var parent = visualElement.parent;\n  if (parent) collectProjectingAncestors(parent, ancestors);\n  if (isProjecting(visualElement)) ancestors.push(visualElement);\n  return ancestors;\n}\n\nfunction collectProjectingChildren(visualElement) {\n  var children = [];\n\n  var addChild = function addChild(child) {\n    if (isProjecting(child)) children.push(child);\n    child.children.forEach(addChild);\n  };\n\n  visualElement.children.forEach(addChild);\n  return children.sort(compareByDepth);\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\n\n\nfunction updateLayoutMeasurement(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  var layoutState = visualElement.getLayoutState();\n  visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n  layoutState.isHydrated = true;\n  layoutState.layout = visualElement.measureViewportBox();\n  layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n  visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n  sync.update(function () {\n    return visualElement.rebaseProjectionTarget();\n  });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\n\n\nfunction snapshotViewportBox(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n  /**\n   * Update targetBox to match the prevViewportBox. This is just to ensure\n   * that targetBox is affected by scroll in the same way as the measured box\n   */\n\n  visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\n\nexport { collectProjectingAncestors, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement };","var unresolvedJobs = new Set();\n\nfunction pushJob(stack, job, pointer) {\n  if (!stack[pointer]) stack[pointer] = [];\n  stack[pointer].push(job);\n}\n\nfunction batchLayout(callback) {\n  unresolvedJobs.add(callback);\n  return function () {\n    return unresolvedJobs.delete(callback);\n  };\n}\n\nfunction flushLayout() {\n  if (!unresolvedJobs.size) return;\n  var pointer = 0;\n  var reads = [[]];\n  var writes = [];\n\n  var setRead = function setRead(job) {\n    return pushJob(reads, job, pointer);\n  };\n\n  var setWrite = function setWrite(job) {\n    pushJob(writes, job, pointer);\n    pointer++;\n  };\n  /**\n   * Resolve jobs into their array stacks\n   */\n\n\n  unresolvedJobs.forEach(function (callback) {\n    callback(setRead, setWrite);\n    pointer = 0;\n  });\n  unresolvedJobs.clear();\n  /**\n   * Execute jobs\n   */\n\n  var numStacks = writes.length;\n\n  for (var i = 0; i <= numStacks; i++) {\n    reads[i] && reads[i].forEach(executeJob);\n    writes[i] && writes[i].forEach(executeJob);\n  }\n}\n\nvar executeJob = function executeJob(job) {\n  return job();\n};\n\nexport { batchLayout, flushLayout };","/**\n * @public\n */\nvar Presence;\n\n(function (Presence) {\n  Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n  Presence[Presence[\"Present\"] = 1] = \"Present\";\n  Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\n/**\n * @public\n */\n\n\nvar VisibilityAction;\n\n(function (VisibilityAction) {\n  VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n  VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(VisibilityAction || (VisibilityAction = {}));\n\nexport { Presence, VisibilityAction };","import { __spreadArray, __read } from 'tslib';\nimport sync, { flushSync } from 'framesync';\nimport { collectProjectingAncestors, updateLayoutMeasurement } from '../../../render/dom/projection/utils.js';\nimport { batchLayout, flushLayout } from '../../../render/dom/utils/batch-layout.js';\nimport { compareByDepth } from '../../../render/utils/compare-by-depth.js';\nimport { Presence } from '../types.js';\n/**\n * Default handlers for batching VisualElements\n */\n\nvar defaultHandler = {\n  layoutReady: function layoutReady(child) {\n    return child.notifyLayoutReady();\n  }\n};\n/**\n * Create a batcher to process VisualElements\n */\n\nfunction createBatcher() {\n  var queue = new Set();\n  return {\n    add: function add(child) {\n      return queue.add(child);\n    },\n    flush: function flush(_a) {\n      var _b = _a === void 0 ? defaultHandler : _a,\n          layoutReady = _b.layoutReady,\n          parent = _b.parent;\n\n      batchLayout(function (read, write) {\n        var order = Array.from(queue).sort(compareByDepth);\n        var ancestors = parent ? collectProjectingAncestors(parent) : [];\n        write(function () {\n          var allElements = __spreadArray(__spreadArray([], __read(ancestors)), __read(order));\n\n          allElements.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          order.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          ancestors.forEach(function (element) {\n            return element.restoreTransform();\n          });\n          order.forEach(layoutReady);\n        });\n        read(function () {\n          /**\n           * After all children have started animating, ensure any Entering components are set to Present.\n           * If we add deferred animations (set up all animations and then start them in two loops) this\n           * could be moved to the start loop. But it needs to happen after all the animations configs\n           * are generated in AnimateSharedLayout as this relies on presence data\n           */\n          order.forEach(function (child) {\n            if (child.isPresent) child.presence = Presence.Present;\n          });\n        });\n        write(function () {\n          /**\n           * Starting these animations will have queued jobs on the frame loop. In some situations,\n           * like when removing an element, these will be processed too late after the DOM is manipulated,\n           * leaving a flash of incorrectly-projected content. By manually flushing these jobs\n           * we ensure there's no flash.\n           */\n          flushSync.preRender();\n          flushSync.render();\n        });\n        read(function () {\n          /**\n           * Schedule a callback at the end of the following frame to assign the latest projection\n           * box to the prevViewportBox snapshot. Once global batching is in place this could be run\n           * synchronously. But for now it ensures that if any nested `AnimateSharedLayout` top-level\n           * child attempts to calculate its previous relative position against a prevViewportBox\n           * it will be against its latest projection box instead, as the snapshot is useless beyond this\n           * render.\n           */\n          sync.postRender(function () {\n            return order.forEach(assignProjectionToSnapshot);\n          });\n          queue.clear();\n        });\n      }); // TODO: Need to find a layout-synchronous way of flushing this\n\n      flushLayout();\n    }\n  };\n}\n\nfunction assignProjectionToSnapshot(child) {\n  child.prevViewportBox = child.projection.target;\n}\n\nexport { createBatcher };","import { createContext } from 'react';\nimport { createBatcher } from '../components/AnimateSharedLayout/utils/batcher.js';\nvar SharedLayoutContext = createContext(createBatcher());\n/**\n * @internal\n */\n\nvar FramerTreeLayoutContext = createContext(createBatcher());\n\nfunction isSharedLayout(context) {\n  return !!context.forceUpdate;\n}\n\nexport { FramerTreeLayoutContext, SharedLayoutContext, isSharedLayout };","import { __spreadArray, __read } from 'tslib';\nimport * as React from 'react';\nimport { useContext, useRef, cloneElement, Children, isValidElement } from 'react';\nimport { useForceUpdate } from '../../utils/use-force-update.js';\nimport { PresenceChild } from './PresenceChild.js';\nimport { SharedLayoutContext, isSharedLayout } from '../../context/SharedLayoutContext.js';\n\nfunction getChildKey(child) {\n  return child.key || \"\";\n}\n\nfunction updateChildLookup(children, allChildren) {\n  var seenChildren = process.env.NODE_ENV !== \"production\" ? new Set() : null;\n  children.forEach(function (child) {\n    var key = getChildKey(child);\n\n    if (process.env.NODE_ENV !== \"production\" && seenChildren) {\n      if (seenChildren.has(key)) {\n        console.warn(\"Children of AnimatePresence require unique keys. \\\"\" + key + \"\\\" is a duplicate.\");\n      }\n\n      seenChildren.add(key);\n    }\n\n    allChildren.set(key, child);\n  });\n}\n\nfunction onlyElements(children) {\n  var filtered = []; // We use forEach here instead of map as map mutates the component key by preprending `.$`\n\n  Children.forEach(children, function (child) {\n    if (isValidElement(child)) filtered.push(child);\n  });\n  return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * @library\n *\n * Any `Frame` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { Frame, AnimatePresence } from 'framer'\n *\n * // As items are added and removed from `items`\n * export function Items({ items }) {\n *   return (\n *     <AnimatePresence>\n *       {items.map(item => (\n *         <Frame\n *           key={item.id}\n *           initial={{ opacity: 0 }}\n *           animate={{ opacity: 1 }}\n *           exit={{ opacity: 0 }}\n *         />\n *       ))}\n *     </AnimatePresence>\n *   )\n * }\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * @motion\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\n\n\nvar AnimatePresence = function AnimatePresence(_a) {\n  var children = _a.children,\n      custom = _a.custom,\n      _b = _a.initial,\n      initial = _b === void 0 ? true : _b,\n      onExitComplete = _a.onExitComplete,\n      exitBeforeEnter = _a.exitBeforeEnter,\n      _c = _a.presenceAffectsLayout,\n      presenceAffectsLayout = _c === void 0 ? true : _c; // We want to force a re-render once all exiting animations have finished. We\n  // either use a local forceRender function, or one from a parent context if it exists.\n\n  var forceRender = useForceUpdate();\n  var layoutContext = useContext(SharedLayoutContext);\n\n  if (isSharedLayout(layoutContext)) {\n    forceRender = layoutContext.forceUpdate;\n  }\n\n  var isInitialRender = useRef(true); // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n\n  var filteredChildren = onlyElements(children); // Keep a living record of the children we're actually rendering so we\n  // can diff to figure out which are entering and exiting\n\n  var presentChildren = useRef(filteredChildren); // A lookup table to quickly reference components by key\n\n  var allChildren = useRef(new Map()).current; // A living record of all currently exiting components.\n\n  var exiting = useRef(new Set()).current;\n  updateChildLookup(filteredChildren, allChildren); // If this is the initial component render, just deal with logic surrounding whether\n  // we play onMount animations or not.\n\n  if (isInitialRender.current) {\n    isInitialRender.current = false;\n    return React.createElement(React.Fragment, null, filteredChildren.map(function (child) {\n      return React.createElement(PresenceChild, {\n        key: getChildKey(child),\n        isPresent: true,\n        initial: initial ? undefined : false,\n        presenceAffectsLayout: presenceAffectsLayout\n      }, child);\n    }));\n  } // If this is a subsequent render, deal with entering and exiting children\n\n\n  var childrenToRender = __spreadArray([], __read(filteredChildren)); // Diff the keys of the currently-present and target children to update our\n  // exiting list.\n\n\n  var presentKeys = presentChildren.current.map(getChildKey);\n  var targetKeys = filteredChildren.map(getChildKey); // Diff the present children with our target children and mark those that are exiting\n\n  var numPresent = presentKeys.length;\n\n  for (var i = 0; i < numPresent; i++) {\n    var key = presentKeys[i];\n\n    if (targetKeys.indexOf(key) === -1) {\n      exiting.add(key);\n    } else {\n      // In case this key has re-entered, remove from the exiting list\n      exiting.delete(key);\n    }\n  } // If we currently have exiting children, and we're deferring rendering incoming children\n  // until after all current children have exiting, empty the childrenToRender array\n\n\n  if (exitBeforeEnter && exiting.size) {\n    childrenToRender = [];\n  } // Loop through all currently exiting components and clone them to overwrite `animate`\n  // with any `exit` prop they might have defined.\n\n\n  exiting.forEach(function (key) {\n    // If this component is actually entering again, early return\n    if (targetKeys.indexOf(key) !== -1) return;\n    var child = allChildren.get(key);\n    if (!child) return;\n    var insertionIndex = presentKeys.indexOf(key);\n\n    var onExit = function onExit() {\n      allChildren.delete(key);\n      exiting.delete(key); // Remove this child from the present children\n\n      var removeIndex = presentChildren.current.findIndex(function (presentChild) {\n        return presentChild.key === key;\n      });\n      presentChildren.current.splice(removeIndex, 1); // Defer re-rendering until all exiting children have indeed left\n\n      if (!exiting.size) {\n        presentChildren.current = filteredChildren;\n        forceRender();\n        onExitComplete && onExitComplete();\n      }\n    };\n\n    childrenToRender.splice(insertionIndex, 0, React.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: false,\n      onExitComplete: onExit,\n      custom: custom,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child));\n  }); // Add `MotionContext` even to children that don't need it to ensure we're rendering\n  // the same tree between renders\n\n  childrenToRender = childrenToRender.map(function (child) {\n    var key = child.key;\n    return exiting.has(key) ? child : React.createElement(PresenceChild, {\n      key: getChildKey(child),\n      isPresent: true,\n      presenceAffectsLayout: presenceAffectsLayout\n    }, child);\n  });\n  presentChildren.current = childrenToRender;\n\n  if (process.env.NODE_ENV !== \"production\" && exitBeforeEnter && childrenToRender.length > 1) {\n    console.warn(\"You're attempting to animate multiple children within AnimatePresence, but its exitBeforeEnter prop is set to true. This will lead to odd visual behaviour.\");\n  }\n\n  return React.createElement(React.Fragment, null, exiting.size ? childrenToRender : childrenToRender.map(function (child) {\n    return cloneElement(child);\n  }));\n};\n\nexport { AnimatePresence };","import { __read } from 'tslib';\nimport { useCallback, useRef, useState } from 'react';\nimport { useUnmountEffect } from './use-unmount-effect.js';\n\nfunction useForceUpdate() {\n  var unloadingRef = useRef(false);\n\n  var _a = __read(useState(0), 2),\n      forcedRenderCount = _a[0],\n      setForcedRenderCount = _a[1];\n\n  useUnmountEffect(function () {\n    return unloadingRef.current = true;\n  });\n  return useCallback(function () {\n    !unloadingRef.current && setForcedRenderCount(forcedRenderCount + 1);\n  }, [forcedRenderCount]);\n}\n\nexport { useForceUpdate };","var createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\n\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\", \"_layoutResetTransform\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  layoutAnimation: createDefinition([\"layout\", \"layoutId\"])\n};\n\nfunction loadFeatures(features) {\n  for (var key in features) {\n    var Component = features[key];\n    if (Component !== null) featureDefinitions[key].Component = Component;\n  }\n}\n\nexport { featureDefinitions, loadFeatures };","import { createContext } from 'react';\nvar LazyContext = createContext({\n  strict: false\n});\nexport { LazyContext };","import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { featureDefinitions } from './definitions.js';\nimport { invariant } from 'hey-listen';\nimport { LazyContext } from '../../context/LazyContext.js';\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\n\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n        isEnabled = _a.isEnabled,\n        Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n\n    if (isEnabled(props) && Component) {\n      features.push(React.createElement(Component, __assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n\n  return features;\n}\n\nexport { useFeatures };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar MotionConfigContext = createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nexport { MotionConfigContext };","import { useContext, createContext } from 'react';\nvar MotionContext = createContext({});\n\nfunction useVisualElementContext() {\n  return useContext(MotionContext).visualElement;\n}\n\nexport { MotionContext, useVisualElementContext };","import { useContext, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\n\nfunction usePresence() {\n  var context = useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n      onExitComplete = context.onExitComplete,\n      register = context.register; // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n\n  var id = useUniqueId();\n  useEffect(function () {\n    return register(id);\n  }, []);\n\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\n\n\nfunction useIsPresent() {\n  return isPresent(useContext(PresenceContext));\n}\n\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\n\nvar counter = 0;\n\nvar incrementId = function incrementId() {\n  return counter++;\n};\n\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\n\nexport { isPresent, useIsPresent, usePresence };","import { createContext } from 'react';\n/**\n * @internal\n */\n\nvar LayoutGroupContext = createContext(null);\nexport { LayoutGroupContext };","var isBrowser = typeof window !== \"undefined\";\nexport { isBrowser };","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.js';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport { useIsomorphicLayoutEffect };","import { __assign } from 'tslib';\nimport { useContext, useRef, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { isPresent } from '../../components/AnimatePresence/use-presence.js';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.js';\nimport { useVisualElementContext } from '../../context/MotionContext/index.js';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.js';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { LazyContext } from '../../context/LazyContext.js';\n\nfunction useLayoutId(_a) {\n  var layoutId = _a.layoutId;\n  var layoutGroupId = useContext(LayoutGroupContext);\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var config = useContext(MotionConfigContext);\n  var lazyContext = useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = useContext(PresenceContext);\n  var layoutId = useLayoutId(props);\n  var visualElementRef = useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: __assign(__assign({}, props), {\n        layoutId: layoutId\n      }),\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    if (!visualElement) return;\n    visualElement.setProps(__assign(__assign(__assign({}, config), props), {\n      layoutId: layoutId\n    }));\n    visualElement.isPresent = isPresent(presenceContext);\n    visualElement.isPresenceRoot = !parent || parent.presenceId !== (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id);\n    /**\n     * Fire a render to ensure the latest state is reflected on-screen.\n     */\n\n    visualElement.syncRender();\n  });\n  useEffect(function () {\n    var _a;\n\n    if (!visualElement) return;\n    /**\n     * In a future refactor we can replace the features-as-components and\n     * have this loop through them all firing \"effect\" listeners\n     */\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\n\nexport { useVisualElement };","function isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\nexport { isRefObject };","/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\n\n\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\n\n\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\n\n\nfunction getVelocity(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\n\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n\n  return typeof definition === \"function\" ? definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity) : definition;\n}\n\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\n\nfunction checkIfControllingVariants(props) {\n  var _a;\n\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\n\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\n\nexport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel, isVariantLabels, resolveVariant, resolveVariantFromProps };","import { useMemo, useContext } from 'react';\nimport { MotionContext } from './index.js';\nimport { getCurrentTreeVariants } from './utils.js';\n\nfunction useCreateMotionContext(props, isStatic) {\n  var _a = getCurrentTreeVariants(props, useContext(MotionContext)),\n      initial = _a.initial,\n      animate = _a.animate;\n\n  return useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  },\n  /**\n   * Only break memoisation in static mode\n   */\n  isStatic ? [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)] : []);\n}\n\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };","import { checkIfControllingVariants, isVariantLabel } from '../../render/utils/variants.js';\n\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n        animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n\n  return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };","import * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { useFeatures } from './features/use-features.js';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { MotionContext } from '../context/MotionContext/index.js';\nimport { useVisualElement } from './utils/use-visual-element.js';\nimport { useMotionRef } from './utils/use-motion-ref.js';\nimport { useCreateMotionContext } from '../context/MotionContext/create.js';\nimport { loadFeatures } from './features/definitions.js';\nimport { isBrowser } from '../utils/is-browser.js';\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\n\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n      createVisualElement = _a.createVisualElement,\n      useRender = _a.useRender,\n      useVisualState = _a.useVisualState,\n      Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n\n  function MotionComponent(props, externalRef) {\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var isStatic = useContext(MotionConfigContext).isStatic;\n    var features = null;\n    /**\n     * Create the tree context. This is memoized and will only trigger renders\n     * when the current tree variant changes in static mode.\n     */\n\n    var context = useCreateMotionContext(props, isStatic);\n    /**\n     *\n     */\n\n    var visualState = useVisualState(props, isStatic);\n\n    if (!isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, props, createVisualElement);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       *\n       * TODO: The intention is to move these away from a React-centric to a\n       * VisualElement-centric lifecycle scheme.\n       */\n\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n\n\n    return React.createElement(React.Fragment, null, React.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic)), features);\n  }\n\n  return forwardRef(MotionComponent);\n}\n\nexport { createMotionComponent };","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.js';\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\n\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return useCallback(function (instance) {\n    var _a;\n\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\nexport { useMotionRef };","import { createMotionComponent } from '../../motion/index.js';\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\n\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n\n\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n\n      return componentCache.get(key);\n    }\n  });\n}\n\nexport { createMotionProxy };","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nexport { lowercaseSVGElements };","import { lowercaseSVGElements } from '../../svg/lowercase-elements.js';\n\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport { isSVGComponent };","var valueScaleCorrection = {};\n/**\n * @internal\n */\n\nfunction addScaleCorrection(correctors) {\n  for (var key in correctors) {\n    valueScaleCorrection[key] = correctors[key];\n  }\n}\n\nexport { addScaleCorrection, valueScaleCorrection };","/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\n\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\n\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\n\n\nvar transformPropSet = new Set(transformProps);\n\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\n\n\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nexport { isTransformOriginProp, isTransformProp, sortTransformProps, transformAxes, transformProps };","import { valueScaleCorrection } from '../../render/dom/projection/scale-correction.js';\nimport { isTransformProp, isTransformOriginProp } from '../../render/html/utils/transform.js';\n\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n      layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!valueScaleCorrection[key] || key === \"opacity\");\n}\n\nexport { isForcedMotionValue };","var isMotionValue = function isMotionValue(value) {\n  return value !== null && typeof value === \"object\" && value.getVelocity;\n};\n\nexport { isMotionValue };","import { sortTransformProps } from './transform.js';\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\n\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n      transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n      enableHardwareAcceleration = _c === void 0 ? true : _c,\n      _d = _b.allowTransformNone,\n      allowTransformNone = _d === void 0 ? true : _d; // The transform string we're going to build into.\n\n  var transformString = \"\"; // Transform keys into their default order - this will determine the output order.\n\n  transformKeys.sort(sortTransformProps); // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n\n  var transformHasZ = false; // Loop over each transform and build them into transformString\n\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    if (key === \"z\") transformHasZ = true;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  } // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n\n\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\n\n\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n      originX = _b === void 0 ? \"50%\" : _b,\n      _c = _a.originY,\n      originY = _c === void 0 ? \"50%\" : _c,\n      _d = _a.originZ,\n      originZ = _d === void 0 ? 0 : _d;\n  return originX + \" \" + originY + \" \" + originZ;\n}\n\nexport { buildTransform, buildTransformOrigin };","/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n  return key.startsWith(\"--\");\n}\n\nexport { isCSSVariable };","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\n\nexport { getValueAsType };","var clamp = function clamp(min, max) {\n  return function (v) {\n    return Math.max(Math.min(v, max), min);\n  };\n};\n\nvar sanitize = function sanitize(v) {\n  return v % 1 ? Number(v.toFixed(5)) : v;\n};\n\nvar floatRegex = /(-)?([\\d]*\\.?[\\d])+/g;\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))/gi;\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i;\n\nfunction isString(v) {\n  return typeof v === 'string';\n}\n\nexport { clamp, colorRegex, floatRegex, isString, sanitize, singleColorRegex };","import { __assign } from 'tslib';\nimport { isString } from '../utils.js';\n\nvar createUnitType = function createUnitType(unit) {\n  return {\n    test: function test(v) {\n      return isString(v) && v.endsWith(unit) && v.split(' ').length === 1;\n    },\n    parse: parseFloat,\n    transform: function transform(v) {\n      return \"\" + v + unit;\n    }\n  };\n};\n\nvar degrees = createUnitType('deg');\nvar percent = createUnitType('%');\nvar px = createUnitType('px');\nvar vh = createUnitType('vh');\nvar vw = createUnitType('vw');\n\nvar progressPercentage = __assign(__assign({}, percent), {\n  parse: function parse(v) {\n    return percent.parse(v) / 100;\n  },\n  transform: function transform(v) {\n    return percent.transform(v * 100);\n  }\n});\n\nexport { degrees, percent, progressPercentage, px, vh, vw };","import { __assign } from 'tslib';\nimport { clamp } from '../utils.js';\nvar number = {\n  test: function test(v) {\n    return typeof v === 'number';\n  },\n  parse: parseFloat,\n  transform: function transform(v) {\n    return v;\n  }\n};\n\nvar alpha = __assign(__assign({}, number), {\n  transform: clamp(0, 1)\n});\n\nvar scale = __assign(__assign({}, number), {\n  default: 1\n});\n\nexport { alpha, number, scale };","import { __assign } from 'tslib';\nimport { number } from 'style-value-types';\n\nvar int = __assign(__assign({}, number), {\n  transform: Math.round\n});\n\nexport { int };","import { px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { int } from './type-int.js';\nvar numberValueTypes = {\n  // Border props\n  borderWidth: px,\n  borderTopWidth: px,\n  borderRightWidth: px,\n  borderBottomWidth: px,\n  borderLeftWidth: px,\n  borderRadius: px,\n  radius: px,\n  borderTopLeftRadius: px,\n  borderTopRightRadius: px,\n  borderBottomRightRadius: px,\n  borderBottomLeftRadius: px,\n  // Positioning props\n  width: px,\n  maxWidth: px,\n  height: px,\n  maxHeight: px,\n  size: px,\n  top: px,\n  right: px,\n  bottom: px,\n  left: px,\n  // Spacing props\n  padding: px,\n  paddingTop: px,\n  paddingRight: px,\n  paddingBottom: px,\n  paddingLeft: px,\n  margin: px,\n  marginTop: px,\n  marginRight: px,\n  marginBottom: px,\n  marginLeft: px,\n  // Transform props\n  rotate: degrees,\n  rotateX: degrees,\n  rotateY: degrees,\n  rotateZ: degrees,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  scaleZ: scale,\n  skew: degrees,\n  skewX: degrees,\n  skewY: degrees,\n  distance: px,\n  translateX: px,\n  translateY: px,\n  translateZ: px,\n  x: px,\n  y: px,\n  z: px,\n  perspective: px,\n  transformPerspective: px,\n  opacity: alpha,\n  originX: progressPercentage,\n  originY: progressPercentage,\n  originZ: px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: alpha,\n  strokeOpacity: alpha,\n  numOctaves: int\n};\nexport { numberValueTypes };","import { valueScaleCorrection } from '../../dom/projection/scale-correction.js';\nimport { buildTransform, buildTransformOrigin } from './build-transform.js';\nimport { isCSSVariable } from '../../dom/utils/is-css-variable.js';\nimport { isTransformProp, isTransformOriginProp } from './transform.js';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.js';\nimport { numberValueTypes } from '../../dom/value-types/number.js';\n\nfunction buildHTMLStyles(state, latestValues, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var _a;\n\n  var style = state.style,\n      vars = state.vars,\n      transform = state.transform,\n      transformKeys = state.transformKeys,\n      transformOrigin = state.transformOrigin; // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n\n  transformKeys.length = 0; // Track whether we encounter any transform or transformOrigin values.\n\n  var hasTransform = false;\n  var hasTransformOrigin = false; // Does the calculated transform essentially equal \"none\"?\n\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n\n    if (isCSSVariable(key)) {\n      vars[key] = value;\n      continue;\n    } // Convert the value to its default value type, ie 0 -> \"0px\"\n\n\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key); // If we already know we have a non-default transform, early return\n\n      if (!transformIsNone) continue; // Otherwise check to see if this is a default transform\n\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType; // If this is a transform origin, flag and enable further transform-origin processing\n\n      hasTransformOrigin = true;\n    } else {\n      /**\n       * If layout projection is on, and we need to perform scale correction for this\n       * value type, perform it.\n       */\n      if ((projection === null || projection === void 0 ? void 0 : projection.isHydrated) && (layoutState === null || layoutState === void 0 ? void 0 : layoutState.isHydrated) && valueScaleCorrection[key]) {\n        var correctedValue = valueScaleCorrection[key].process(value, layoutState, projection);\n        /**\n         * Scale-correctable values can define a number of other values to break\n         * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n         */\n\n        var applyTo = valueScaleCorrection[key].applyTo;\n\n        if (applyTo) {\n          var num = applyTo.length;\n\n          for (var i = 0; i < num; i++) {\n            style[applyTo[i]] = correctedValue;\n          }\n        } else {\n          style[key] = correctedValue;\n        }\n      } else {\n        style[key] = valueAsType;\n      }\n    }\n  }\n\n  if (layoutState && projection && buildProjectionTransform && buildProjectionTransformOrigin) {\n    style.transform = buildProjectionTransform(layoutState.deltaFinal, layoutState.treeScale, hasTransform ? transform : undefined);\n\n    if (transformTemplate) {\n      style.transform = transformTemplate(transform, style.transform);\n    }\n\n    style.transformOrigin = buildProjectionTransformOrigin(layoutState);\n  } else {\n    if (hasTransform) {\n      style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n    }\n\n    if (hasTransformOrigin) {\n      style.transformOrigin = buildTransformOrigin(transformOrigin);\n    }\n  }\n}\n\nexport { buildHTMLStyles };","var createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\n\nexport { createHtmlRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\n\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\n\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n        style = state.style;\n    return __assign(__assign({}, vars), style);\n  }, [visualState]);\n}\n\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n\n  return style;\n}\n\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n\n  if (Boolean(props.drag)) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false; // Disable text selection\n\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\"; // Disable scrolling on the draggable direction\n\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\" + (props.drag === \"x\" ? \"y\" : \"x\");\n  }\n\n  htmlProps.style = style;\n  return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps, useStyle };","/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"_layoutResetTransform\", \"onLayoutAnimationComplete\", \"onViewportBoxUpdate\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\n\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\n\nexport { isValidMotionProp };","import { isValidMotionProp } from '../../../motion/utils/valid-prop.js';\n\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\n\n\ntry {\n  var emotionIsPropValid_1 = require(\"@emotion/is-prop-valid\").default;\n\n  shouldForward = function shouldForward(key) {\n    // Handle events explicitly as Emotion validates them all as true\n    if (key.startsWith(\"on\")) {\n      return !isValidMotionProp(key);\n    } else {\n      return emotionIsPropValid_1(key);\n    }\n  };\n} catch (_a) {// We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\n\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n\nexport { filterProps };","import { px } from 'style-value-types';\n\nfunction calcOrigin(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\n\n\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n  return pxOriginX + \" \" + pxOriginY;\n}\n\nexport { calcSVGTransformOrigin };","import { px } from 'style-value-types'; // Convert a progress 0-1 to a pixels value based on the provided length\n\nvar progressToPixels = function progressToPixels(progress, length) {\n  return px.transform(progress * length);\n};\n\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\n\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  } // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n\n\n  var keys = useDashCase ? dashKeys : camelKeys; // Build the dash offset\n\n  attrs[keys.offset] = progressToPixels(-offset, totalLength); // Build the dash array\n\n  var pathLength = progressToPixels(length, totalLength);\n  var pathSpacing = progressToPixels(spacing, totalLength);\n  attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\nexport { buildSVGPath };","import { __rest } from 'tslib';\nimport { buildHTMLStyles } from '../../html/utils/build-styles.js';\nimport { calcSVGTransformOrigin } from './transform-origin.js';\nimport { buildSVGPath } from './path.js';\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\n\nfunction buildSVGAttrs(state, _a, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var attrX = _a.attrX,\n      attrY = _a.attrY,\n      originX = _a.originX,\n      originY = _a.originY,\n      pathLength = _a.pathLength,\n      _b = _a.pathSpacing,\n      pathSpacing = _b === void 0 ? 1 : _b,\n      _c = _a.pathOffset,\n      pathOffset = _c === void 0 ? 0 : _c,\n      // This is object creation, which we try to avoid per-frame.\n  latest = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n\n  buildHTMLStyles(state, latest, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n      style = state.style,\n      dimensions = state.dimensions,\n      totalPathLength = state.totalPathLength;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  } // Parse transformOrigin\n\n\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  } // Treat x/y not as shortcuts but as actual attributes\n\n\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY; // Build SVG path if one has been measured\n\n  if (totalPathLength !== undefined && pathLength !== undefined) {\n    buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n  }\n}\n\nexport { buildSVGAttrs };","import { __assign } from 'tslib';\nimport { createHtmlRenderState } from '../../html/utils/create-render-state.js';\n\nvar createSvgRenderState = function createSvgRenderState() {\n  return __assign(__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\n\nexport { createSvgRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\n\nfunction useSVGProps(props, visualState) {\n  var visualProps = useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return __assign(__assign({}, state.attrs), {\n      style: __assign({}, state.style)\n    });\n  }, [visualState]);\n\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = __assign(__assign({}, rawStyles), visualProps.style);\n  }\n\n  return visualProps;\n}\n\nexport { useSVGProps };","import { __assign } from 'tslib';\nimport { createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.js';\nimport { filterProps } from './utils/filter-props.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\nimport { useSVGProps } from '../svg/use-props.js';\n\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n\n  var useRender = function useRender(Component, props, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n\n    var elementProps = __assign(__assign(__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n\n    return createElement(Component, elementProps);\n  };\n\n  return useRender;\n}\n\nexport { createUseRender };","var CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\n\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nexport { camelToDash };","function renderHTML(element, _a) {\n  var style = _a.style,\n      vars = _a.vars; // Directly assign style into the Element's style prop. In tests Object.assign is the\n  // fastest way to assign styles.\n\n  Object.assign(element.style, style); // Loop over any CSS variables and assign those.\n\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\nexport { renderHTML };","/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\"]);\nexport { camelCaseAttributes };","import { camelToDash } from '../../dom/utils/camel-to-dash.js';\nimport { renderHTML } from '../../html/utils/render.js';\nimport { camelCaseAttributes } from './camel-case-attrs.js';\n\nfunction renderSVG(element, renderState) {\n  renderHTML(element, renderState);\n\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\n\nexport { renderSVG };","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var style = props.style;\n  var newValues = {};\n\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","import { isMotionValue } from '../../../value/utils/is-motion-value.js';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","function isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\n\nexport { isAnimationControls };","var isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };","import { isCustomValue } from '../../utils/resolve-value.js';\nimport { isMotionValue } from './is-motion-value.js';\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\n\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\n\nexport { resolveMotionValue };","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.js';\n\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\n\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };","import { __rest } from 'tslib';\nimport { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { checkIfControllingVariants, checkIfVariantNode, resolveVariantFromProps } from '../../render/utils/variants.js';\nimport { useConstant } from '../../utils/use-constant.js';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.js';\nimport { MotionContext } from '../../context/MotionContext/index.js';\n\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n      createRenderState = _a.createRenderState,\n      onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n\n  return state;\n}\n\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = useContext(MotionContext);\n    var presenceContext = useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\n\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n\n  var initial = props.initial,\n      animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n\n  var variantToSet = blockInitialAnimation || initial === false ? animate : initial;\n\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n\n      var target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n\n      for (var key in target) {\n        values[key] = target[key];\n      }\n\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n\n  return values;\n}\n\nexport { makeUseVisualState };","import { renderSVG } from './utils/render.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n          latestValues = _a.latestValues;\n\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (isPath(instance)) {\n        renderState.totalPathLength = instance.getTotalLength();\n      }\n\n      buildSVGAttrs(renderState, latestValues, undefined, undefined, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate); // TODO: Replace with direct assignment\n\n      renderSVG(instance, renderState);\n    }\n  })\n};\n\nfunction isPath(element) {\n  return element.tagName === \"path\";\n}\n\nexport { svgMotionConfig };","import { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createHtmlRenderState\n  })\n};\nexport { htmlMotionConfig };","var AnimationType;\n\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\n\n\nfunction useDomEvent(ref, eventName, handler, options) {\n  useEffect(function () {\n    var element = ref.current;\n\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };","function isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n\n  return event instanceof MouseEvent;\n}\n\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };","import { isTouchEvent } from '../gestures/utils/event-type.js';\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\n\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\n\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\n\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\n\nfunction getViewportPointFromEvent(event) {\n  return extractEventInfo(event, \"client\");\n}\n\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\n\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n\n  return name;\n}\n\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };","import { isBrowser } from '../utils/is-browser.js'; // We check for event support via functions in case they've been mocked by a testing suite.\n\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\n\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\n\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };","function createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n\n    return false;\n  };\n}\n\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\n\nfunction getGlobalLock(drag) {\n  var lock = false;\n\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n\n  return lock;\n}\n\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };","import { isMouseEvent } from './utils/event-type.js';\nimport { AnimationType } from '../render/utils/types.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n\n    if (!isMouseEvent(event) || isDragActive()) return;\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n  };\n}\n\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n      onHoverEnd = _a.onHoverEnd,\n      whileHover = _a.whileHover,\n      visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\nexport { useHoverGesture };","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\n\nexport { isNodeOrChild };","var combineFunctions = function combineFunctions(a, b) {\n  return function (v) {\n    return b(a(v));\n  };\n};\n\nvar pipe = function pipe() {\n  var transformers = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    transformers[_i] = arguments[_i];\n  }\n\n  return transformers.reduce(combineFunctions);\n};\n\nexport { pipe };","var makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\nexport { makeRenderlessComponent };","import { useFocusGesture } from '../../gestures/use-focus-gesture.js';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.js';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar gestureAnimations = {\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nexport { gestureAnimations };","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.js';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.js';\nimport { isDragActive } from './drag/utils/lock.js';\n/**\n * @param handlers -\n * @internal\n */\n\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n      onTapStart = _a.onTapStart,\n      onTapCancel = _a.onTapCancel,\n      whileTap = _a.whileTap,\n      visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = useRef(false);\n  var cancelPointerEndListeners = useRef(null);\n\n  function removePointerEndListener() {\n    var _a;\n\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n\n  function checkPointerEnd() {\n    var _a;\n\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n\n  function onPointerDown(event, info) {\n    var _a;\n\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };","import { AnimationType } from '../render/utils/types.js';\nimport { useDomEvent } from '../events/use-dom-event.js';\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\n\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n      visualElement = _a.visualElement;\n\n  var onFocus = function onFocus() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n\n  var onBlur = function onBlur() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };","function shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n\n  return true;\n}\n\nexport { shallowCompare };","var clamp = function clamp(min, max, v) {\n  return Math.min(Math.max(v, min), max);\n};\n\nexport { clamp };","import { warning } from 'hey-listen';\nimport { clamp } from '../../utils/clamp.js';\nvar safeMin = 0.001;\nvar minDuration = 0.01;\nvar maxDuration = 10.0;\nvar minDamping = 0.05;\nvar maxDamping = 1;\n\nfunction findSpring(_a) {\n  var _b = _a.duration,\n      duration = _b === void 0 ? 800 : _b,\n      _c = _a.bounce,\n      bounce = _c === void 0 ? 0.25 : _c,\n      _d = _a.velocity,\n      velocity = _d === void 0 ? 0 : _d,\n      _e = _a.mass,\n      mass = _e === void 0 ? 1 : _e;\n  var envelope;\n  var derivative;\n  warning(duration <= maxDuration * 1000, \"Spring duration must be 10 seconds or less\");\n  var dampingRatio = 1 - bounce;\n  dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n  duration = clamp(minDuration, maxDuration, duration / 1000);\n\n  if (dampingRatio < 1) {\n    envelope = function envelope(undampedFreq) {\n      var exponentialDecay = undampedFreq * dampingRatio;\n      var delta = exponentialDecay * duration;\n      var a = exponentialDecay - velocity;\n      var b = calcAngularFreq(undampedFreq, dampingRatio);\n      var c = Math.exp(-delta);\n      return safeMin - a / b * c;\n    };\n\n    derivative = function derivative(undampedFreq) {\n      var exponentialDecay = undampedFreq * dampingRatio;\n      var delta = exponentialDecay * duration;\n      var d = delta * velocity + velocity;\n      var e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n      var f = Math.exp(-delta);\n      var g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n      var factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n      return factor * ((d - e) * f) / g;\n    };\n  } else {\n    envelope = function envelope(undampedFreq) {\n      var a = Math.exp(-undampedFreq * duration);\n      var b = (undampedFreq - velocity) * duration + 1;\n      return -safeMin + a * b;\n    };\n\n    derivative = function derivative(undampedFreq) {\n      var a = Math.exp(-undampedFreq * duration);\n      var b = (velocity - undampedFreq) * (duration * duration);\n      return a * b;\n    };\n  }\n\n  var initialGuess = 5 / duration;\n  var undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n  duration = duration * 1000;\n\n  if (isNaN(undampedFreq)) {\n    return {\n      stiffness: 100,\n      damping: 10,\n      duration: duration\n    };\n  } else {\n    var stiffness = Math.pow(undampedFreq, 2) * mass;\n    return {\n      stiffness: stiffness,\n      damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n      duration: duration\n    };\n  }\n}\n\nvar rootIterations = 12;\n\nfunction approximateRoot(envelope, derivative, initialGuess) {\n  var result = initialGuess;\n\n  for (var i = 1; i < rootIterations; i++) {\n    result = result - envelope(result) / derivative(result);\n  }\n\n  return result;\n}\n\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n  return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };","import { __rest, __assign } from 'tslib';\nimport { findSpring, calcAngularFreq } from '../utils/find-spring.js';\nvar durationKeys = [\"duration\", \"bounce\"];\nvar physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\n\nfunction isSpringType(options, keys) {\n  return keys.some(function (key) {\n    return options[key] !== undefined;\n  });\n}\n\nfunction getSpringOptions(options) {\n  var springOptions = __assign({\n    velocity: 0.0,\n    stiffness: 100,\n    damping: 10,\n    mass: 1.0,\n    isResolvedFromDuration: false\n  }, options);\n\n  if (!isSpringType(options, physicsKeys) && isSpringType(options, durationKeys)) {\n    var derived = findSpring(options);\n    springOptions = __assign(__assign(__assign({}, springOptions), derived), {\n      velocity: 0.0,\n      mass: 1.0\n    });\n    springOptions.isResolvedFromDuration = true;\n  }\n\n  return springOptions;\n}\n\nfunction spring(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0.0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1.0 : _c,\n      _d = _a.restSpeed,\n      restSpeed = _d === void 0 ? 2 : _d,\n      restDelta = _a.restDelta,\n      options = __rest(_a, [\"from\", \"to\", \"restSpeed\", \"restDelta\"]);\n\n  var state = {\n    done: false,\n    value: from\n  };\n\n  var _e = getSpringOptions(options),\n      stiffness = _e.stiffness,\n      damping = _e.damping,\n      mass = _e.mass,\n      velocity = _e.velocity,\n      duration = _e.duration,\n      isResolvedFromDuration = _e.isResolvedFromDuration;\n\n  var resolveSpring = zero;\n  var resolveVelocity = zero;\n\n  function createSpring() {\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var initialDelta = to - from;\n    var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    var undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n    restDelta !== null && restDelta !== void 0 ? restDelta : restDelta = Math.abs(to - from) <= 1 ? 0.01 : 0.4;\n\n    if (dampingRatio < 1) {\n      var angularFreq_1 = calcAngularFreq(undampedAngularFreq, dampingRatio);\n\n      resolveSpring = function resolveSpring(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        return to - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq_1 * Math.sin(angularFreq_1 * t) + initialDelta * Math.cos(angularFreq_1 * t));\n      };\n\n      resolveVelocity = function resolveVelocity(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        return dampingRatio * undampedAngularFreq * envelope * (Math.sin(angularFreq_1 * t) * (initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) / angularFreq_1 + initialDelta * Math.cos(angularFreq_1 * t)) - envelope * (Math.cos(angularFreq_1 * t) * (initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) - angularFreq_1 * initialDelta * Math.sin(angularFreq_1 * t));\n      };\n    } else if (dampingRatio === 1) {\n      resolveSpring = function resolveSpring(t) {\n        return to - Math.exp(-undampedAngularFreq * t) * (initialDelta + (initialVelocity + undampedAngularFreq * initialDelta) * t);\n      };\n    } else {\n      var dampedAngularFreq_1 = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n\n      resolveSpring = function resolveSpring(t) {\n        var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n        var freqForT = Math.min(dampedAngularFreq_1 * t, 300);\n        return to - envelope * ((initialVelocity + dampingRatio * undampedAngularFreq * initialDelta) * Math.sinh(freqForT) + dampedAngularFreq_1 * initialDelta * Math.cosh(freqForT)) / dampedAngularFreq_1;\n      };\n    }\n  }\n\n  createSpring();\n  return {\n    next: function next(t) {\n      var current = resolveSpring(t);\n\n      if (!isResolvedFromDuration) {\n        var currentVelocity = resolveVelocity(t) * 1000;\n        var isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n        var isBelowDisplacementThreshold = Math.abs(to - current) <= restDelta;\n        state.done = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n      } else {\n        state.done = t >= duration;\n      }\n\n      state.value = state.done ? to : current;\n      return state;\n    },\n    flipTarget: function flipTarget() {\n      var _a;\n\n      velocity = -velocity;\n      _a = [to, from], from = _a[0], to = _a[1];\n      createSpring();\n    }\n  };\n}\n\nspring.needsInterpolation = function (a, b) {\n  return typeof a === \"string\" || typeof b === \"string\";\n};\n\nvar zero = function zero(_t) {\n  return 0;\n};\n\nexport { spring };","var progress = function progress(from, to, value) {\n  var toFromDifference = to - from;\n  return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };","var mix = function mix(from, to, progress) {\n  return -progress * from + progress * to + from;\n};\n\nexport { mix };","import { isString, singleColorRegex, floatRegex } from '../utils.js';\n\nvar isColorString = function isColorString(type, testProp) {\n  return function (v) {\n    return Boolean(isString(v) && singleColorRegex.test(v) && v.startsWith(type) || testProp && Object.prototype.hasOwnProperty.call(v, testProp));\n  };\n};\n\nvar splitColor = function splitColor(aName, bName, cName) {\n  return function (v) {\n    var _a;\n\n    if (!isString(v)) return v;\n\n    var _b = v.match(floatRegex),\n        a = _b[0],\n        b = _b[1],\n        c = _b[2],\n        alpha = _b[3];\n\n    return _a = {}, _a[aName] = parseFloat(a), _a[bName] = parseFloat(b), _a[cName] = parseFloat(c), _a.alpha = alpha !== undefined ? parseFloat(alpha) : 1, _a;\n  };\n};\n\nexport { isColorString, splitColor };","import { __assign } from 'tslib';\nimport { number, alpha } from '../numbers/index.js';\nimport { sanitize, clamp } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\nvar clampRgbUnit = clamp(0, 255);\n\nvar rgbUnit = __assign(__assign({}, number), {\n  transform: function transform(v) {\n    return Math.round(clampRgbUnit(v));\n  }\n});\n\nvar rgba = {\n  test: isColorString('rgb', 'red'),\n  parse: splitColor('red', 'green', 'blue'),\n  transform: function transform(_a) {\n    var red = _a.red,\n        green = _a.green,\n        blue = _a.blue,\n        _b = _a.alpha,\n        alpha$1 = _b === void 0 ? 1 : _b;\n    return 'rgba(' + rgbUnit.transform(red) + ', ' + rgbUnit.transform(green) + ', ' + rgbUnit.transform(blue) + ', ' + sanitize(alpha.transform(alpha$1)) + ')';\n  }\n};\nexport { rgbUnit, rgba };","import { rgba } from './rgba.js';\nimport { isColorString } from './utils.js';\n\nfunction parseHex(v) {\n  var r = '';\n  var g = '';\n  var b = '';\n  var a = '';\n\n  if (v.length > 5) {\n    r = v.substr(1, 2);\n    g = v.substr(3, 2);\n    b = v.substr(5, 2);\n    a = v.substr(7, 2);\n  } else {\n    r = v.substr(1, 1);\n    g = v.substr(2, 1);\n    b = v.substr(3, 1);\n    a = v.substr(4, 1);\n    r += r;\n    g += g;\n    b += b;\n    a += a;\n  }\n\n  return {\n    red: parseInt(r, 16),\n    green: parseInt(g, 16),\n    blue: parseInt(b, 16),\n    alpha: a ? parseInt(a, 16) / 255 : 1\n  };\n}\n\nvar hex = {\n  test: isColorString('#'),\n  parse: parseHex,\n  transform: rgba.transform\n};\nexport { hex };","import { alpha } from '../numbers/index.js';\nimport { percent } from '../numbers/units.js';\nimport { sanitize } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\nvar hsla = {\n  test: isColorString('hsl', 'hue'),\n  parse: splitColor('hue', 'saturation', 'lightness'),\n  transform: function transform(_a) {\n    var hue = _a.hue,\n        saturation = _a.saturation,\n        lightness = _a.lightness,\n        _b = _a.alpha,\n        alpha$1 = _b === void 0 ? 1 : _b;\n    return 'hsla(' + Math.round(hue) + ', ' + percent.transform(sanitize(saturation)) + ', ' + percent.transform(sanitize(lightness)) + ', ' + sanitize(alpha.transform(alpha$1)) + ')';\n  }\n};\nexport { hsla };","import { __assign } from 'tslib';\nimport { mix } from './mix.js';\nimport { hex, rgba, hsla } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar mixLinearColor = function mixLinearColor(from, to, v) {\n  var fromExpo = from * from;\n  var toExpo = to * to;\n  return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\n};\n\nvar colorTypes = [hex, rgba, hsla];\n\nvar getColorType = function getColorType(v) {\n  return colorTypes.find(function (type) {\n    return type.test(v);\n  });\n};\n\nvar notAnimatable = function notAnimatable(color) {\n  return \"'\" + color + \"' is not an animatable color. Use the equivalent color code instead.\";\n};\n\nvar mixColor = function mixColor(from, to) {\n  var fromColorType = getColorType(from);\n  var toColorType = getColorType(to);\n  invariant(!!fromColorType, notAnimatable(from));\n  invariant(!!toColorType, notAnimatable(to));\n  invariant(fromColorType.transform === toColorType.transform, \"Both colors must be hex/RGBA, OR both must be HSLA.\");\n  var fromColor = fromColorType.parse(from);\n  var toColor = toColorType.parse(to);\n\n  var blended = __assign({}, fromColor);\n\n  var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\n  return function (v) {\n    for (var key in blended) {\n      if (key !== \"alpha\") {\n        blended[key] = mixFunc(fromColor[key], toColor[key], v);\n      }\n    }\n\n    blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\n    return fromColorType.transform(blended);\n  };\n};\n\nexport { mixColor, mixLinearColor };","import { isString } from '../utils.js';\nimport { hex } from './hex.js';\nimport { hsla } from './hsla.js';\nimport { rgba } from './rgba.js';\nvar color = {\n  test: function test(v) {\n    return rgba.test(v) || hex.test(v) || hsla.test(v);\n  },\n  parse: function parse(v) {\n    if (rgba.test(v)) {\n      return rgba.parse(v);\n    } else if (hsla.test(v)) {\n      return hsla.parse(v);\n    } else {\n      return hex.parse(v);\n    }\n  },\n  transform: function transform(v) {\n    return isString(v) ? v : v.hasOwnProperty('red') ? rgba.transform(v) : hsla.transform(v);\n  }\n};\nexport { color };","import { color } from '../color/index.js';\nimport { number } from '../numbers/index.js';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.js';\nvar colorToken = '${c}';\nvar numberToken = '${n}';\n\nfunction test(v) {\n  var _a, _b, _c, _d;\n\n  return isNaN(v) && isString(v) && ((_b = (_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = v.match(colorRegex)) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 0;\n}\n\nfunction analyse(v) {\n  var values = [];\n  var numColors = 0;\n  var colors = v.match(colorRegex);\n\n  if (colors) {\n    numColors = colors.length;\n    v = v.replace(colorRegex, colorToken);\n    values.push.apply(values, colors.map(color.parse));\n  }\n\n  var numbers = v.match(floatRegex);\n\n  if (numbers) {\n    v = v.replace(floatRegex, numberToken);\n    values.push.apply(values, numbers.map(number.parse));\n  }\n\n  return {\n    values: values,\n    numColors: numColors,\n    tokenised: v\n  };\n}\n\nfunction parse(v) {\n  return analyse(v).values;\n}\n\nfunction createTransformer(v) {\n  var _a = analyse(v),\n      values = _a.values,\n      numColors = _a.numColors,\n      tokenised = _a.tokenised;\n\n  var numValues = values.length;\n  return function (v) {\n    var output = tokenised;\n\n    for (var i = 0; i < numValues; i++) {\n      output = output.replace(i < numColors ? colorToken : numberToken, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n    }\n\n    return output;\n  };\n}\n\nvar convertNumbersToZero = function convertNumbersToZero(v) {\n  return typeof v === 'number' ? 0 : v;\n};\n\nfunction getAnimatableNone(v) {\n  var parsed = parse(v);\n  var transformer = createTransformer(v);\n  return transformer(parsed.map(convertNumbersToZero));\n}\n\nvar complex = {\n  test: test,\n  parse: parse,\n  createTransformer: createTransformer,\n  getAnimatableNone: getAnimatableNone\n};\nexport { complex };","var zeroPoint = {\n  x: 0,\n  y: 0,\n  z: 0\n};\n\nvar isNum = function isNum(v) {\n  return typeof v === 'number';\n};\n\nexport { isNum, zeroPoint };","import { __spreadArray, __assign } from 'tslib';\nimport { complex, color } from 'style-value-types';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { isNum } from './inc.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n  if (isNum(origin)) {\n    return function (v) {\n      return mix(origin, target, v);\n    };\n  } else if (color.test(origin)) {\n    return mixColor(origin, target);\n  } else {\n    return mixComplex(origin, target);\n  }\n}\n\nvar mixArray = function mixArray(from, to) {\n  var output = __spreadArray([], from);\n\n  var numValues = output.length;\n  var blendValue = from.map(function (fromThis, i) {\n    return getMixer(fromThis, to[i]);\n  });\n  return function (v) {\n    for (var i = 0; i < numValues; i++) {\n      output[i] = blendValue[i](v);\n    }\n\n    return output;\n  };\n};\n\nvar mixObject = function mixObject(origin, target) {\n  var output = __assign(__assign({}, origin), target);\n\n  var blendValue = {};\n\n  for (var key in output) {\n    if (origin[key] !== undefined && target[key] !== undefined) {\n      blendValue[key] = getMixer(origin[key], target[key]);\n    }\n  }\n\n  return function (v) {\n    for (var key in blendValue) {\n      output[key] = blendValue[key](v);\n    }\n\n    return output;\n  };\n};\n\nfunction analyse(value) {\n  var parsed = complex.parse(value);\n  var numValues = parsed.length;\n  var numNumbers = 0;\n  var numRGB = 0;\n  var numHSL = 0;\n\n  for (var i = 0; i < numValues; i++) {\n    if (numNumbers || typeof parsed[i] === \"number\") {\n      numNumbers++;\n    } else {\n      if (parsed[i].hue !== undefined) {\n        numHSL++;\n      } else {\n        numRGB++;\n      }\n    }\n  }\n\n  return {\n    parsed: parsed,\n    numNumbers: numNumbers,\n    numRGB: numRGB,\n    numHSL: numHSL\n  };\n}\n\nvar mixComplex = function mixComplex(origin, target) {\n  var template = complex.createTransformer(target);\n  var originStats = analyse(origin);\n  var targetStats = analyse(target);\n  invariant(originStats.numHSL === targetStats.numHSL && originStats.numRGB === targetStats.numRGB && originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\n  return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n};\n\nexport { mixArray, mixComplex, mixObject };","import { progress } from './progress.js';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.js';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nvar mixNumber = function mixNumber(from, to) {\n  return function (p) {\n    return mix(from, to, p);\n  };\n};\n\nfunction detectMixerFactory(v) {\n  if (typeof v === 'number') {\n    return mixNumber;\n  } else if (typeof v === 'string') {\n    if (color.test(v)) {\n      return mixColor;\n    } else {\n      return mixComplex;\n    }\n  } else if (Array.isArray(v)) {\n    return mixArray;\n  } else if (typeof v === 'object') {\n    return mixObject;\n  }\n}\n\nfunction createMixers(output, ease, customMixer) {\n  var mixers = [];\n  var mixerFactory = customMixer || detectMixerFactory(output[0]);\n  var numMixers = output.length - 1;\n\n  for (var i = 0; i < numMixers; i++) {\n    var mixer = mixerFactory(output[i], output[i + 1]);\n\n    if (ease) {\n      var easingFunction = Array.isArray(ease) ? ease[i] : ease;\n      mixer = pipe(easingFunction, mixer);\n    }\n\n    mixers.push(mixer);\n  }\n\n  return mixers;\n}\n\nfunction fastInterpolate(_a, _b) {\n  var from = _a[0],\n      to = _a[1];\n  var mixer = _b[0];\n  return function (v) {\n    return mixer(progress(from, to, v));\n  };\n}\n\nfunction slowInterpolate(input, mixers) {\n  var inputLength = input.length;\n  var lastInputIndex = inputLength - 1;\n  return function (v) {\n    var mixerIndex = 0;\n    var foundMixerIndex = false;\n\n    if (v <= input[0]) {\n      foundMixerIndex = true;\n    } else if (v >= input[lastInputIndex]) {\n      mixerIndex = lastInputIndex - 1;\n      foundMixerIndex = true;\n    }\n\n    if (!foundMixerIndex) {\n      var i = 1;\n\n      for (; i < inputLength; i++) {\n        if (input[i] > v || i === lastInputIndex) {\n          break;\n        }\n      }\n\n      mixerIndex = i - 1;\n    }\n\n    var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n    return mixers[mixerIndex](progressInRange);\n  };\n}\n\nfunction interpolate(input, output, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.clamp,\n      isClamp = _c === void 0 ? true : _c,\n      ease = _b.ease,\n      mixer = _b.mixer;\n\n  var inputLength = input.length;\n  invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n  invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n\n  if (input[0] > input[inputLength - 1]) {\n    input = [].concat(input);\n    output = [].concat(output);\n    input.reverse();\n    output.reverse();\n  }\n\n  var mixers = createMixers(output, ease, mixer);\n  var interpolator = inputLength === 2 ? fastInterpolate(input, mixers) : slowInterpolate(input, mixers);\n  return isClamp ? function (v) {\n    return interpolator(clamp(input[0], input[inputLength - 1], v));\n  } : interpolator;\n}\n\nexport { interpolate };","var reverseEasing = function reverseEasing(easing) {\n  return function (p) {\n    return 1 - easing(1 - p);\n  };\n};\n\nvar mirrorEasing = function mirrorEasing(easing) {\n  return function (p) {\n    return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n  };\n};\n\nvar createExpoIn = function createExpoIn(power) {\n  return function (p) {\n    return Math.pow(p, power);\n  };\n};\n\nvar createBackIn = function createBackIn(power) {\n  return function (p) {\n    return p * p * ((power + 1) * p - power);\n  };\n};\n\nvar createAnticipate = function createAnticipate(power) {\n  var backEasing = createBackIn(power);\n  return function (p) {\n    return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n  };\n};\n\nexport { createAnticipate, createBackIn, createExpoIn, mirrorEasing, reverseEasing };","import { createExpoIn, reverseEasing, mirrorEasing, createBackIn, createAnticipate } from './utils.js';\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\n\nvar linear = function linear(p) {\n  return p;\n};\n\nvar easeIn = createExpoIn(2);\nvar easeOut = reverseEasing(easeIn);\nvar easeInOut = mirrorEasing(easeIn);\n\nvar circIn = function circIn(p) {\n  return 1 - Math.sin(Math.acos(p));\n};\n\nvar circOut = reverseEasing(circIn);\nvar circInOut = mirrorEasing(circOut);\nvar backIn = createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = reverseEasing(backIn);\nvar backInOut = mirrorEasing(backIn);\nvar anticipate = createAnticipate(DEFAULT_OVERSHOOT_STRENGTH);\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\n\nvar bounceOut = function bounceOut(p) {\n  if (p === 1 || p === 0) return p;\n  var p2 = p * p;\n  return p < BOUNCE_FIRST_THRESHOLD ? 7.5625 * p2 : p < BOUNCE_SECOND_THRESHOLD ? 9.075 * p2 - 9.9 * p + 3.4 : p < BOUNCE_THIRD_THRESHOLD ? ca * p2 - cb * p + cc : 10.8 * p * p - 20.52 * p + 10.72;\n};\n\nvar bounceIn = reverseEasing(bounceOut);\n\nvar bounceInOut = function bounceInOut(p) {\n  return p < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0)) : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\n\nexport { anticipate, backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, easeIn, easeInOut, easeOut, linear };","import { interpolate } from '../../utils/interpolate.js';\nimport { easeInOut } from '../../easing/index.js';\n\nfunction defaultEasing(values, easing) {\n  return values.map(function () {\n    return easing || easeInOut;\n  }).splice(0, values.length - 1);\n}\n\nfunction defaultOffset(values) {\n  var numValues = values.length;\n  return values.map(function (_value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n}\n\nfunction convertOffsetToTimes(offset, duration) {\n  return offset.map(function (o) {\n    return o * duration;\n  });\n}\n\nfunction keyframes(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      ease = _a.ease,\n      offset = _a.offset,\n      _d = _a.duration,\n      duration = _d === void 0 ? 300 : _d;\n  var state = {\n    done: false,\n    value: from\n  };\n  var values = Array.isArray(to) ? to : [from, to];\n  var times = convertOffsetToTimes(offset && offset.length === values.length ? offset : defaultOffset(values), duration);\n\n  function createInterpolator() {\n    return interpolate(times, values, {\n      ease: Array.isArray(ease) ? ease : defaultEasing(values, ease)\n    });\n  }\n\n  var interpolator = createInterpolator();\n  return {\n    next: function next(t) {\n      state.value = interpolator(t);\n      state.done = t >= duration;\n      return state;\n    },\n    flipTarget: function flipTarget() {\n      values.reverse();\n      interpolator = createInterpolator();\n    }\n  };\n}\n\nexport { convertOffsetToTimes, defaultEasing, defaultOffset, keyframes };","import { spring } from '../generators/spring.js';\nimport { keyframes } from '../generators/keyframes.js';\nimport { decay } from '../generators/decay.js';\nvar types = {\n  keyframes: keyframes,\n  spring: spring,\n  decay: decay\n};\n\nfunction detectAnimationFromOptions(config) {\n  if (Array.isArray(config.to)) {\n    return keyframes;\n  } else if (types[config.type]) {\n    return types[config.type];\n  }\n\n  var keys = new Set(Object.keys(config));\n\n  if (keys.has(\"ease\") || keys.has(\"duration\") && !keys.has(\"dampingRatio\")) {\n    return keyframes;\n  } else if (keys.has(\"dampingRatio\") || keys.has(\"stiffness\") || keys.has(\"mass\") || keys.has(\"damping\") || keys.has(\"restSpeed\") || keys.has(\"restDelta\")) {\n    return spring;\n  }\n\n  return keyframes;\n}\n\nexport { detectAnimationFromOptions };","function decay(_a) {\n  var _b = _a.velocity,\n      velocity = _b === void 0 ? 0 : _b,\n      _c = _a.from,\n      from = _c === void 0 ? 0 : _c,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 350 : _e,\n      _f = _a.restDelta,\n      restDelta = _f === void 0 ? 0.5 : _f,\n      modifyTarget = _a.modifyTarget;\n  var state = {\n    done: false,\n    value: from\n  };\n  var amplitude = power * velocity;\n  var ideal = from + amplitude;\n  var target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n  if (target !== ideal) amplitude = target - from;\n  return {\n    next: function next(t) {\n      var delta = -amplitude * Math.exp(-t / timeConstant);\n      state.done = !(delta > restDelta || delta < -restDelta);\n      state.value = state.done ? target : target + delta;\n      return state;\n    },\n    flipTarget: function flipTarget() {}\n  };\n}\n\nexport { decay };","function loopElapsed(elapsed, duration, delay) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  return elapsed - duration - delay;\n}\n\nfunction reverseElapsed(elapsed, duration, delay, isForwardPlayback) {\n  if (delay === void 0) {\n    delay = 0;\n  }\n\n  if (isForwardPlayback === void 0) {\n    isForwardPlayback = true;\n  }\n\n  return isForwardPlayback ? loopElapsed(duration + -elapsed, duration, delay) : duration - (elapsed - duration) + delay;\n}\n\nfunction hasRepeatDelayElapsed(elapsed, duration, delay, isForwardPlayback) {\n  return isForwardPlayback ? elapsed >= duration + delay : elapsed <= -delay;\n}\n\nexport { hasRepeatDelayElapsed, loopElapsed, reverseElapsed };","import { __rest, __assign } from 'tslib';\nimport { detectAnimationFromOptions } from './utils/detect-animation-from-options.js';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../utils/interpolate.js';\nimport { hasRepeatDelayElapsed, reverseElapsed, loopElapsed } from './utils/elapsed.js';\n\nvar framesync = function framesync(update) {\n  var passTimestamp = function passTimestamp(_a) {\n    var delta = _a.delta;\n    return update(delta);\n  };\n\n  return {\n    start: function start() {\n      return sync.update(passTimestamp, true);\n    },\n    stop: function stop() {\n      return cancelSync.update(passTimestamp);\n    }\n  };\n};\n\nfunction animate(_a) {\n  var _b, _c;\n\n  var from = _a.from,\n      _d = _a.autoplay,\n      autoplay = _d === void 0 ? true : _d,\n      _e = _a.driver,\n      driver = _e === void 0 ? framesync : _e,\n      _f = _a.elapsed,\n      elapsed = _f === void 0 ? 0 : _f,\n      _g = _a.repeat,\n      repeatMax = _g === void 0 ? 0 : _g,\n      _h = _a.repeatType,\n      repeatType = _h === void 0 ? \"loop\" : _h,\n      _j = _a.repeatDelay,\n      repeatDelay = _j === void 0 ? 0 : _j,\n      onPlay = _a.onPlay,\n      onStop = _a.onStop,\n      onComplete = _a.onComplete,\n      onRepeat = _a.onRepeat,\n      onUpdate = _a.onUpdate,\n      options = __rest(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n\n  var to = options.to;\n  var driverControls;\n  var repeatCount = 0;\n  var computedDuration = options.duration;\n  var latest;\n  var isComplete = false;\n  var isForwardPlayback = true;\n  var interpolateFromNumber;\n  var animator = detectAnimationFromOptions(options);\n\n  if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n    interpolateFromNumber = interpolate([0, 100], [from, to], {\n      clamp: false\n    });\n    from = 0;\n    to = 100;\n  }\n\n  var animation = animator(__assign(__assign({}, options), {\n    from: from,\n    to: to\n  }));\n\n  function repeat() {\n    repeatCount++;\n\n    if (repeatType === \"reverse\") {\n      isForwardPlayback = repeatCount % 2 === 0;\n      elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n    } else {\n      elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n      if (repeatType === \"mirror\") animation.flipTarget();\n    }\n\n    isComplete = false;\n    onRepeat && onRepeat();\n  }\n\n  function complete() {\n    driverControls.stop();\n    onComplete && onComplete();\n  }\n\n  function update(delta) {\n    if (!isForwardPlayback) delta = -delta;\n    elapsed += delta;\n\n    if (!isComplete) {\n      var state = animation.next(Math.max(0, elapsed));\n      latest = state.value;\n      if (interpolateFromNumber) latest = interpolateFromNumber(latest);\n      isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n    }\n\n    onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n\n    if (isComplete) {\n      if (repeatCount === 0) computedDuration !== null && computedDuration !== void 0 ? computedDuration : computedDuration = elapsed;\n\n      if (repeatCount < repeatMax) {\n        hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n      } else {\n        complete();\n      }\n    }\n  }\n\n  function play() {\n    onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n    driverControls = driver(update);\n    driverControls.start();\n  }\n\n  autoplay && play();\n  return {\n    stop: function stop() {\n      onStop === null || onStop === void 0 ? void 0 : onStop();\n      driverControls.stop();\n    }\n  };\n}\n\nexport { animate };","function velocityPerSecond(velocity, frameDuration) {\n  return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\n\nexport { secondsToMilliseconds };","import { linear } from './index.js';\n\nvar a = function a(a1, a2) {\n  return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\n\nvar b = function b(a1, a2) {\n  return 3.0 * a2 - 6.0 * a1;\n};\n\nvar c = function c(a1) {\n  return 3.0 * a1;\n};\n\nvar calcBezier = function calcBezier(t, a1, a2) {\n  return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\n\nvar getSlope = function getSlope(t, a1, a2) {\n  return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\n\nvar subdivisionPrecision = 0.0000001;\nvar subdivisionMaxIterations = 10;\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX;\n  var currentT;\n  var i = 0;\n\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > subdivisionPrecision && ++i < subdivisionMaxIterations);\n\n  return currentT;\n}\n\nvar newtonIterations = 8;\nvar newtonMinSlope = 0.001;\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < newtonIterations; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n}\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n  if (mX1 === mY1 && mX2 === mY2) return linear;\n  var sampleValues = new Float32Array(kSplineTableSize);\n\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n\n    --currentSample;\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n\n    if (initialSlope >= newtonMinSlope) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function (t) {\n    return t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n  };\n}\n\nexport { cubicBezier };","import { __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { cubicBezier, linear, easeIn, easeInOut, easeOut, circIn, circInOut, circOut, backIn, backInOut, backOut, anticipate, bounceIn, bounceInOut, bounceOut } from 'popmotion';\nvar easingLookup = {\n  linear: linear,\n  easeIn: easeIn,\n  easeInOut: easeInOut,\n  easeOut: easeOut,\n  circIn: circIn,\n  circInOut: circInOut,\n  circOut: circOut,\n  backIn: backIn,\n  backInOut: backInOut,\n  backOut: backOut,\n  anticipate: anticipate,\n  bounceIn: bounceIn,\n  bounceInOut: bounceInOut,\n  bounceOut: bounceOut\n};\n\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n\n    var _a = __read(definition, 4),\n        x1 = _a[0],\n        y1 = _a[1],\n        x2 = _a[2],\n        y2 = _a[3];\n\n    return cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n    return easingLookup[definition];\n  }\n\n  return definition;\n};\n\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };","import { complex } from 'style-value-types';\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\n\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false; // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n\n  if (typeof value === \"string\" && // It's animatable if we have a string\n  complex.test(value) && // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n      return true;\n    }\n\n  return false;\n};\n\nexport { isAnimatable };","import { __assign } from 'tslib';\nimport { isKeyframesTarget } from './is-keyframes-target.js';\n\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10\n  };\n};\n\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restDelta: 0.01,\n    restSpeed: 10\n  };\n};\n\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\n\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\n\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\n\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n\n  return __assign({\n    to: to\n  }, transitionFactory(to));\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };","import { __assign } from 'tslib';\nimport { complex } from './index.js';\nimport { floatRegex } from '../utils.js';\nvar maxDefaults = new Set(['brightness', 'contrast', 'saturate', 'opacity']);\n\nfunction applyDefaultFilter(v) {\n  var _a = v.slice(0, -1).split('('),\n      name = _a[0],\n      value = _a[1];\n\n  if (name === 'drop-shadow') return v;\n  var number = (value.match(floatRegex) || [])[0];\n  if (!number) return v;\n  var unit = value.replace(number, '');\n  var defaultValue = maxDefaults.has(name) ? 1 : 0;\n  if (number !== value) defaultValue *= 100;\n  return name + '(' + defaultValue + unit + ')';\n}\n\nvar functionRegex = /([a-z-]*)\\(.*?\\)/g;\n\nvar filter = __assign(__assign({}, complex), {\n  getAnimatableNone: function getAnimatableNone(v) {\n    var functions = v.match(functionRegex);\n    return functions ? functions.map(applyDefaultFilter).join(' ') : v;\n  }\n});\n\nexport { filter };","import { __assign } from 'tslib';\nimport { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.js';\n/**\n * A map of default value types for common values\n */\n\nvar defaultValueTypes = __assign(__assign({}, numberValueTypes), {\n  // Color props\n  color: color,\n  backgroundColor: color,\n  outlineColor: color,\n  fill: color,\n  stroke: color,\n  // Border props\n  borderColor: color,\n  borderTopColor: color,\n  borderRightColor: color,\n  borderBottomColor: color,\n  borderLeftColor: color,\n  filter: filter,\n  WebkitFilter: filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\n\n\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\n\nexport { defaultValueTypes, getDefaultValueType };","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.js';\n\nfunction getAnimatableNone(key, value) {\n  var _a;\n\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== filter) defaultValueType = complex; // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };","import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\n\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n\n  var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n\n  return !!Object.keys(transition).length;\n}\n\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\n\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n      times = _a.times,\n      yoyo = _a.yoyo,\n      flip = _a.flip,\n      loop = _a.loop,\n      transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n\n  var options = __assign({}, transition);\n\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n\n\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n\n  if (yoyo || loop || flip) {\n    warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n\n\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\n\n\nfunction getDelayFromTransition(transition, key) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\n\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = __spreadArray([], __read(options.to));\n    options.to[0] = options.from;\n  }\n\n  return options;\n}\n\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n\n  if (!isTransitionDefined(transition)) {\n    transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n\n  return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\n\n\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n\n  var isOriginAnimatable = isAnimatable(key, origin);\n  warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? inertia(__assign(__assign({}, options), valueTransition)) : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n\n  function set() {\n    var _a;\n\n    value.set(target);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\n\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\n\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\n\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\n\n\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n\n    var start = function start() {\n      return controls = animation();\n    };\n\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };","import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 750 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget,\n      driver = _a.driver,\n      _onUpdate = _a.onUpdate,\n      onComplete = _a.onComplete;\n  var currentAnimation;\n\n  function isOutOfBounds(v) {\n    return min !== undefined && v < min || max !== undefined && v > max;\n  }\n\n  function boundaryNearest(v) {\n    if (min === undefined) return max;\n    if (max === undefined) return min;\n    return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n  }\n\n  function startAnimation(options) {\n    currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    currentAnimation = animate(__assign(__assign({}, options), {\n      driver: driver,\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        _onUpdate === null || _onUpdate === void 0 ? void 0 : _onUpdate(v);\n        (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n      },\n      onComplete: onComplete\n    }));\n  }\n\n  function startSpring(options) {\n    startAnimation(__assign({\n      type: \"spring\",\n      stiffness: bounceStiffness,\n      damping: bounceDamping,\n      restDelta: restDelta\n    }, options));\n  }\n\n  if (isOutOfBounds(from)) {\n    startSpring({\n      from: from,\n      velocity: velocity,\n      to: boundaryNearest(from)\n    });\n  } else {\n    var target = power * velocity + from;\n    if (typeof modifyTarget !== \"undefined\") target = modifyTarget(target);\n    var boundary_1 = boundaryNearest(target);\n    var heading_1 = boundary_1 === min ? -1 : 1;\n    var prev_1;\n    var current_1;\n\n    var checkBoundary = function checkBoundary(v) {\n      prev_1 = current_1;\n      current_1 = v;\n      velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n\n      if (heading_1 === 1 && v > boundary_1 || heading_1 === -1 && v < boundary_1) {\n        startSpring({\n          from: v,\n          to: boundary_1,\n          velocity: velocity\n        });\n      }\n    };\n\n    startAnimation({\n      type: \"decay\",\n      from: from,\n      velocity: velocity,\n      timeConstant: timeConstant,\n      power: power,\n      restDelta: restDelta,\n      modifyTarget: modifyTarget,\n      onUpdate: isOutOfBounds(target) ? checkBoundary : undefined\n    });\n  }\n\n  return {\n    stop: function stop() {\n      return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n    }\n  };\n}\n\nexport { inertia };","function addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\n\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n}\n\nexport { addUniqueItem, removeItem };","import { addUniqueItem, removeItem } from './array.js';\n\nvar SubscriptionManager =\n/** @class */\nfunction () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n\n  return SubscriptionManager;\n}();\n\nexport { SubscriptionManager };","import sync, { getFrameData } from 'framesync';\nimport { velocityPerSecond } from 'popmotion';\nimport { SubscriptionManager } from '../utils/subscription-manager.js';\n\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\n\n\nvar MotionValue =\n/** @class */\nfunction () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n\n\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n\n    this.canTrackVelocity = false;\n\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n\n      _this.prev = _this.current;\n      _this.current = v; // Update timestamp\n\n      var _a = getFrameData(),\n          delta = _a.delta,\n          timestamp = _a.timestamp;\n\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync.postRender(_this.scheduleVelocityCheck);\n      } // Update update subscribers\n\n\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      } // Update velocity subscribers\n\n\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      } // Update render subscribers\n\n\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * @library\n   *\n   * ```jsx\n   * function MyComponent() {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <Frame x={x} />\n   * }\n   * ```\n   *\n   * @motion\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @internalremarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n\n\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ? // These casts could be avoided if parseFloat would be typed better\n    velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n\n  return MotionValue;\n}();\n/**\n * @internal\n */\n\n\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };","/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\nexport { testValueType };","import { number, px, percent, degrees, vw, vh } from 'style-value-types';\nimport { testValueType } from './test.js';\nimport { auto } from './type-auto.js';\n/**\n * A list of value types commonly used for dimensions\n */\n\nvar dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\n\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\nexport { dimensionValueTypes, findDimensionValueType };","/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nexport { auto };","import { __spreadArray, __read } from 'tslib';\nimport { color, complex } from 'style-value-types';\nimport { dimensionValueTypes } from './dimensions.js';\nimport { testValueType } from './test.js';\n/**\n * A list of all ValueTypes\n */\n\nvar valueTypes = __spreadArray(__spreadArray([], __read(dimensionValueTypes)), [color, complex]);\n/**\n * Tests a value against the list of ValueTypes\n */\n\n\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\nexport { findValueType };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { complex } from 'style-value-types';\nimport { isNumericalString } from '../../utils/is-numerical-string.js';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.js';\nimport { motionValue } from '../../value/index.js';\nimport { getAnimatableNone } from '../dom/value-types/animatable-none.js';\nimport { findValueType } from '../dom/value-types/find.js';\nimport { resolveVariant } from './variants.js';\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\n\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\n\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n      _b = _a.transitionEnd,\n      transitionEnd = _b === void 0 ? {} : _b;\n\n  _a.transition;\n\n  var target = __rest(_a, [\"transitionEnd\", \"transition\"]);\n\n  target = __assign(__assign({}, target), transitionEnd);\n\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\n\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = __spreadArray([], __read(variantLabels)).reverse();\n\n  reversedLabels.forEach(function (key) {\n    var _a;\n\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\n\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\n\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n\n  var _d;\n\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n\n\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n\n\n    if (value === undefined || value === null) continue;\n\n    if (typeof value === \"string\" && isNumericalString(value)) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\n\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\n\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n\n  var origin = {};\n\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n\n  return origin;\n}\n\nexport { checkTargetForNewValues, getOrigin, getOriginFromTransition, setTarget, setValues };","import { __read, __rest, __assign } from 'tslib';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { setTarget } from './setters.js';\nimport { resolveVariant } from './variants.js';\n/**\n * @internal\n */\n\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  visualElement.notifyAnimationStart();\n  var animation;\n\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\n\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n      transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n\n    var _a = transition.delayChildren,\n        delayChildren = _a === void 0 ? 0 : _a,\n        staggerChildren = transition.staggerChildren,\n        staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n\n  var when = transition.when;\n\n  if (when) {\n    var _c = __read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n        first = _c[0],\n        last = _c[1];\n\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\n\n\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n\n  var _c = _a === void 0 ? {} : _a,\n      _d = _c.delay,\n      delay = _d === void 0 ? 0 : _d,\n      transitionOverride = _c.transitionOverride,\n      type = _c.type;\n\n  var _e = visualElement.makeTargetAnimatable(definition),\n      _f = _e.transition,\n      transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n      transitionEnd = _e.transitionEnd,\n      target = __rest(_e, [\"transition\", \"transitionEnd\"]);\n\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n\n    var animation = startAnimation(key, value, valueTarget, __assign({\n      delay: delay\n    }, transition));\n    animations.push(animation);\n  }\n\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\n\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, __assign(__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\n\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\n\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\n\n\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n      needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\n\nexport { animateVisualElement, sortByTreeOrder, stopAnimation };","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.js';\nimport { shallowCompare } from '../../utils/shallow-compare.js';\nimport { animateVisualElement } from './animation.js';\nimport { AnimationType } from './types.js';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.js';\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Focus, AnimationType.Exit];\n\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder)).reverse();\n\nvar numAnimationTypes = variantPriorityOrder.length;\n\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n          options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\n\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n\n    if (resolved) {\n      resolved.transition;\n\n      var transitionEnd = resolved.transitionEnd,\n          target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n\n      acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n    }\n\n    return acc;\n  };\n\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n\n\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n\n\n  function animateChanges(options, changedActiveType) {\n    var _a;\n\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n\n    var removedVariantIndex = Infinity;\n\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n\n\n      typeState.protectedKeys = __assign({}, encounteredKeys); // Check if we can skip analysing this prop early\n\n      if ( // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null || // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp || // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n\n\n      var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) || // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n\n      var _b = typeState.prevResolvedValues,\n          prevResolvedValues = _b === void 0 ? {} : _b;\n\n      var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key]; // If we've already handled this we can just skip ahead\n\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev)) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n\n\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n\n      if (typeState.isActive) {\n        encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n      }\n\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n\n\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: __assign({\n              type: type\n            }, options)\n          };\n        }))));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n\n\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n\n    allAnimatedKeys = __assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n\n    var shouldAnimate = Boolean(animations.length);\n\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n\n\n  function setActive(type, isActive, options) {\n    var _a; // If the active state hasn't changed, we can safely do nothing here\n\n\n    if (state[type].isActive === isActive) return Promise.resolve(); // Propagate active change to children\n\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\n\nfunction variantsHaveChanged(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n\n  return false;\n}\n\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\n\nfunction createState() {\n  var _a;\n\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\n\nexport { createAnimationState, variantPriorityOrder, variantsHaveChanged };","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { createAnimationState } from '../../render/utils/animation-state.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n        animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n\n    if (isAnimationControls(animate)) {\n      useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n        visualElement = props.visualElement;\n\n    var _a = __read(usePresence(), 2),\n        isPresent = _a[0],\n        onExitComplete = _a[1];\n\n    var presenceContext = useContext(PresenceContext);\n    useEffect(function () {\n      var _a, _b;\n\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n  })\n};\nexport { animations };","var isPoint = function isPoint(point) {\n  return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function isPoint3D(point) {\n  return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nfunction distance(a, b) {\n  if (isNum(a) && isNum(b)) {\n    return distance1D(a, b);\n  } else if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n  }\n}\n\nexport { distance };","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n/**\n * @internal\n */\n\nvar PanSession =\n/** @class */\nfunction () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n\n\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n\n    this.handlers = {};\n\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null; // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n\n      var isDistancePastThreshold = distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = getFrameData().timestamp;\n\n      _this.history.push(__assign(__assign({}, point), {\n        timestamp: timestamp\n      }));\n\n      var _a = _this.handlers,\n          onStart = _a.onStart,\n          onMove = _a.onMove;\n\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint); // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n\n        return;\n      } // Throttle mouse move event to once per frame\n\n\n      sync.update(_this.updatePoint, true);\n    };\n\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n\n      var _a = _this.handlers,\n          onEnd = _a.onEnd,\n          onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n\n      onSessionEnd && onSessionEnd(event, panInfo);\n    }; // If we have more than one touch, don't start detecting this gesture\n\n\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = getFrameData().timestamp;\n    this.history = [__assign(__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    cancelSync.update(this.updatePoint);\n  };\n\n  return PanSession;\n}();\n\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\n\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\n\nfunction startDevicePoint(history) {\n  return history[0];\n}\n\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\n\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n\n  while (i >= 0) {\n    timestampedPoint = history[i];\n\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n\n    i--;\n  }\n\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n\n  return currentVelocity;\n}\n\nexport { PanSession };","// Call a handler once for each axis\nfunction eachAxis(handler) {\n  return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\n\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n      max = _a.max;\n\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n  }\n\n  return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\n\n\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n  // Calculate a min point for this axis and apply it to the current pointer\n  var min = point - length * progress;\n  return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\n\n\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\n\n\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\n\n\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max; // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = __read([max, min], 2), min = _a[0], max = _a[1];\n  }\n\n  return {\n    min: layoutAxis.min + min,\n    max: layoutAxis.min + max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\n\n\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\n\n\nfunction calcPositionFromProgress(axis, constraints, progress) {\n  var axisLength = axis.max - axis.min;\n  var min = mix(constraints.min, constraints.max - axisLength, progress);\n  return {\n    min: min,\n    max: min + axisLength\n  };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\n\n\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n\n  return relativeConstraints;\n}\n\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\n\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\n\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\n\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\n\nfunction getBoundingBox(element, transformPagePoint) {\n  var box = element.getBoundingClientRect();\n  return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function clampProgress(v) {\n  return clamp(0, 1, v);\n};\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\n\n\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n\n  return distance(value, target) < maxDistance;\n}\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\n\n\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n\n  if (targetLength > sourceLength) {\n    origin = progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = progress(source.min, source.max - targetLength, target.min);\n  }\n\n  return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  delta.origin = origin;\n  delta.originPoint = mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001)) delta.scale = 1;\n  delta.translate = mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate)) delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateBoxDelta(delta, source, target, origin) {\n  updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n  updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\n\n\nfunction defaultOrigin(origin) {\n  return typeof origin === \"number\" ? origin : 0.5;\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(projection, parentProjection) {\n  calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n  calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n  target.min = mix(prev.min, next.min, p);\n  target.max = mix(prev.max, next.max, p);\n}\n\nfunction calcRelativeOffsetAxis(parent, child) {\n  return {\n    min: child.min - parent.min,\n    max: child.max - parent.min\n  };\n}\n\nfunction calcRelativeOffset(parent, child) {\n  return {\n    x: calcRelativeOffsetAxis(parent.x, child.x),\n    y: calcRelativeOffsetAxis(parent.y, child.y)\n  };\n}\n\nfunction checkIfParentHasChanged(prev, next) {\n  var prevId = prev.getLayoutId();\n  var nextId = next.getLayoutId();\n  return prevId !== nextId || nextId === undefined && prev !== next;\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };","function isDraggable(visualElement) {\n  var _a = visualElement.getProps(),\n      drag = _a.drag,\n      _dragX = _a._dragX;\n\n  return drag && !_dragX;\n}\n\nexport { isDraggable };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\n\nfunction resetAxis(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\n\n\nfunction resetBox(box, originBox) {\n  resetAxis(box.x, originBox.x);\n  resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\n\n\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\n\n\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\n\n\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\n\n\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n      y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\n\n\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2]; // Copy the current axis to the final axis before mutation\n\n\n  final.min = axis.min;\n  final.max = axis.max;\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = mix(axis.min, axis.max, axisOrigin); // Apply the axis delta to the final axis\n\n  applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\n\nfunction applyBoxTransforms(finalBox, box, transforms) {\n  applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n  applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\n\n\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\n\n\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  var originPoint = mix(axis.min, axis.max, origin) - translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeAxisTransforms(axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeBoxTransforms(box, transforms) {\n  removeAxisTransforms(box.x, transforms, xKeys);\n  removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\n\n\nfunction applyTreeDeltas(box, treeScale, treePath) {\n  var treeLength = treePath.length;\n  if (!treeLength) return; // Reset the treeScale\n\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.getLayoutState().delta; // Incoporate each ancestor's scale into a culmulative treeScale for this component\n\n    treeScale.x *= delta.x.scale;\n    treeScale.y *= delta.y.scale; // Apply each ancestor's calculated delta into this component's recorded layout box\n\n    applyBoxDelta(box, delta); // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n\n    if (isDraggable(node)) {\n      applyBoxTransforms(box, box, node.getLatestValues());\n    }\n  }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { collectProjectingAncestors, updateLayoutMeasurement, collectProjectingChildren } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\nimport { flushLayout, batchLayout } from '../../render/dom/utils/batch-layout.js';\nimport { flushSync } from 'framesync';\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n\nvar lastPointerEvent;\n\nvar VisualElementDragControls =\n/** @class */\nfunction () {\n  function VisualElementDragControls(_a) {\n    var visualElement = _a.visualElement;\n    /**\n     * Track whether we're currently dragging.\n     *\n     * @internal\n     */\n\n    this.isDragging = false;\n    /**\n     * The current direction of drag, or `null` if both.\n     *\n     * @internal\n     */\n\n    this.currentDirection = null;\n    /**\n     * The permitted boundaries of travel, in pixels.\n     *\n     * @internal\n     */\n\n    this.constraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     *\n     * @internal\n     */\n\n    this.elastic = axisBox();\n    /**\n     * A reference to the host component's latest props.\n     *\n     * @internal\n     */\n\n    this.props = {};\n    /**\n     * @internal\n     */\n\n    this.hasMutatedConstraints = false;\n    /**\n     * Track the initial position of the cursor relative to the dragging element\n     * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n     * an ideal bounding box for the VisualElement renderer to project into every frame.\n     *\n     * @internal\n     */\n\n    this.cursorProgress = {\n      x: 0.5,\n      y: 0.5\n    }; // When updating _dragX, or _dragY instead of the VisualElement,\n    // persist their values between drag gestures.\n\n    this.originPoint = {}; // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n\n    this.openGlobalLock = null;\n    /**\n     * @internal\n     */\n\n    this.panSession = null;\n    this.visualElement = visualElement;\n    this.visualElement.enableLayoutProjection();\n    elementDragControls.set(visualElement, this);\n  }\n  /**\n   * Instantiate a PanSession for the drag gesture\n   *\n   * @public\n   */\n\n\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.snapToCursor,\n        snapToCursor = _c === void 0 ? false : _c,\n        cursorProgress = _b.cursorProgress;\n\n    var onSessionStart = function onSessionStart(event) {\n      var _a; // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n\n\n      _this.stopMotion();\n      /**\n       * Save the initial point. We'll use this to calculate the pointer's position rather\n       * than the one we receive when the gesture actually starts. By then, the pointer will\n       * have already moved, and the perception will be of the pointer \"slipping\" across the element\n       */\n\n\n      var initialPoint = getViewportPointFromEvent(event).point;\n      (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n      _this.cancelLayout = batchLayout(function (read, write) {\n        var ancestors = collectProjectingAncestors(_this.visualElement);\n        var children = collectProjectingChildren(_this.visualElement);\n\n        var tree = __spreadArray(__spreadArray([], __read(ancestors)), __read(children));\n\n        var hasManuallySetCursorOrigin = false;\n        /**\n         * Apply a simple lock to the projection target. This ensures no animations\n         * can run on the projection box while this lock is active.\n         */\n\n        _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n        write(function () {\n          tree.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          updateLayoutMeasurement(_this.visualElement);\n          children.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          tree.forEach(function (element) {\n            return element.restoreTransform();\n          });\n\n          if (snapToCursor) {\n            hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n          }\n        });\n        read(function () {\n          var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n\n          if (!isRelativeDrag) {\n            _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n          }\n\n          _this.visualElement.scheduleUpdateLayoutProjection();\n          /**\n           * When dragging starts, we want to find where the cursor is relative to the bounding box\n           * of the element. Every frame, we calculate a new bounding box using this relative position\n           * and let the visualElement renderer figure out how to reproject the element into this bounding\n           * box.\n           *\n           * By doing it this way, rather than applying an x/y transform directly to the element,\n           * we can ensure the component always visually sticks to the cursor as we'd expect, even\n           * if the DOM element itself changes layout as a result of React updates the user might\n           * make based on the drag position.\n           */\n\n\n          var projection = _this.visualElement.projection;\n          eachAxis(function (axis) {\n            if (!hasManuallySetCursorOrigin) {\n              var _a = projection.target[axis],\n                  min = _a.min,\n                  max = _a.max;\n              _this.cursorProgress[axis] = cursorProgress ? cursorProgress[axis] : progress(min, max, initialPoint[axis]);\n            }\n            /**\n             * If we have external drag MotionValues, record their origin point. On pointermove\n             * we'll apply the pan gesture offset directly to this value.\n             */\n\n\n            var axisValue = _this.getAxisMotionValue(axis);\n\n            if (axisValue) {\n              _this.originPoint[axis] = axisValue.get();\n            }\n          });\n        });\n        write(function () {\n          flushSync.update();\n          flushSync.preRender();\n          flushSync.render();\n          flushSync.postRender();\n        });\n        read(function () {\n          return _this.resolveDragConstraints();\n        });\n      });\n    };\n\n    var onStart = function onStart(event, info) {\n      var _a, _b, _c; // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n\n\n      var _d = _this.props,\n          drag = _d.drag,\n          dragPropagation = _d.dragPropagation;\n\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag); // If we don 't have the lock, don't start dragging\n\n        if (!_this.openGlobalLock) return;\n      }\n\n      flushLayout(); // Set current drag status\n\n      _this.isDragging = true;\n      _this.currentDirection = null; // Fire onDragStart event\n\n      (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n      (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n    };\n\n    var onMove = function onMove(event, info) {\n      var _a, _b, _c, _d;\n\n      var _e = _this.props,\n          dragPropagation = _e.dragPropagation,\n          dragDirectionLock = _e.dragDirectionLock; // If we didn't successfully receive the gesture lock, early return.\n\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset; // Attempt to detect drag direction if directionLock is true\n\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset); // If we've successfully set a direction, notify listener\n\n        if (_this.currentDirection !== null) {\n          (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n        }\n\n        return;\n      } // Update each point with the latest position\n\n\n      _this.updateAxis(\"x\", info.point, offset);\n\n      _this.updateAxis(\"y\", info.point, offset); // Fire onDrag event\n\n\n      (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info); // Update the last pointer event\n\n      lastPointerEvent = event;\n    };\n\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n\n    var transformPagePoint = this.props.transformPagePoint;\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: transformPagePoint\n    });\n  };\n\n  VisualElementDragControls.prototype.resolveDragConstraints = function () {\n    var _this = this;\n\n    var _a = this.props,\n        dragConstraints = _a.dragConstraints,\n        dragElastic = _a.dragElastic;\n    var layout = this.visualElement.getLayoutState().layoutCorrected;\n\n    if (dragConstraints) {\n      this.constraints = isRefObject(dragConstraints) ? this.resolveRefConstraints(layout, dragConstraints) : calcRelativeConstraints(layout, dragConstraints);\n    } else {\n      this.constraints = false;\n    }\n\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n\n    if (this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n\n  VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n    var _a = this.props,\n        onMeasureDragConstraints = _a.onMeasureDragConstraints,\n        transformPagePoint = _a.transformPagePoint;\n    var constraintsElement = constraints.current;\n    invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n    var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n      }\n    }\n\n    return measuredConstraints;\n  };\n\n  VisualElementDragControls.prototype.cancelDrag = function () {\n    var _a, _b;\n\n    this.visualElement.unlockProjectionTarget();\n    (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.isDragging = false;\n    this.panSession && this.panSession.end();\n    this.panSession = null;\n\n    if (!this.props.dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var _a, _b, _c;\n\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = null;\n    var isDragging = this.isDragging;\n    this.cancelDrag();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.animateDragEnd(velocity);\n    (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n  };\n\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n\n    return eachAxis(function (axis) {\n      var drag = _this.props.drag; // If we're not dragging this axis, do an early return.\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (axisValue) {\n        var box = _this.visualElement.getLayoutState().layout;\n\n        var length_1 = box[axis].max - box[axis].min;\n        var center = box[axis].min + length_1 / 2;\n        var offset = point[axis] - center;\n        _this.originPoint[axis] = point[axis];\n        axisValue.set(offset);\n      } else {\n        _this.cursorProgress[axis] = 0.5;\n        return true;\n      }\n    }).includes(true);\n  };\n  /**\n   * Update the specified axis with the latest pointer information.\n   */\n\n\n  VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n    var drag = this.props.drag; // If we're not dragging this axis, do an early return.\n\n    if (!shouldDrag(axis, drag, this.currentDirection)) return;\n    return this.getAxisMotionValue(axis) ? this.updateAxisMotionValue(axis, offset) : this.updateVisualElementAxis(axis, point);\n  };\n\n  VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!offset || !axisValue) return;\n    var nextValue = this.originPoint[axis] + offset[axis];\n    var update = this.constraints ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis]) : nextValue;\n    axisValue.set(update);\n  };\n\n  VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n    var _a; // Get the actual layout bounding box of the element\n\n\n    var axisLayout = this.visualElement.getLayoutState().layout[axis]; // Calculate its current length. In the future we might want to lerp this to animate\n    // between lengths if the layout changes as we change the DOM\n\n    var axisLength = axisLayout.max - axisLayout.min; // Get the initial progress that the pointer sat on this axis on gesture start.\n\n    var axisProgress = this.cursorProgress[axis]; // Calculate a new min point based on the latest pointer position, constraints and elastic\n\n    var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]); // Update the axis viewport target with this new min and the length\n\n    this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n  };\n\n  VisualElementDragControls.prototype.setProps = function (_a) {\n    var _b = _a.drag,\n        drag = _b === void 0 ? false : _b,\n        _c = _a.dragDirectionLock,\n        dragDirectionLock = _c === void 0 ? false : _c,\n        _d = _a.dragPropagation,\n        dragPropagation = _d === void 0 ? false : _d,\n        _e = _a.dragConstraints,\n        dragConstraints = _e === void 0 ? false : _e,\n        _f = _a.dragElastic,\n        dragElastic = _f === void 0 ? defaultElastic : _f,\n        _g = _a.dragMomentum,\n        dragMomentum = _g === void 0 ? true : _g,\n        remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n\n    this.props = __assign({\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    }, remainingProps);\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - If the component will perform layout animations, we output the gesture to the component's\n   *      visual bounding box\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n\n\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a = this.props,\n        layout = _a.layout,\n        layoutId = _a.layoutId;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n\n    if (this.props[dragKey]) {\n      return this.props[dragKey];\n    } else if (!layout && layoutId === undefined) {\n      return this.visualElement.getValue(axis, 0);\n    }\n  };\n\n  VisualElementDragControls.prototype.isLayoutDrag = function () {\n    return !this.getAxisMotionValue(\"x\");\n  };\n\n  VisualElementDragControls.prototype.isExternalDrag = function () {\n    var _a = this.props,\n        _dragX = _a._dragX,\n        _dragY = _a._dragY;\n    return _dragX || _dragY;\n  };\n\n  VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragMomentum = _a.dragMomentum,\n        dragElastic = _a.dragElastic,\n        dragTransition = _a.dragTransition;\n    /**\n     * Everything beyond the drag gesture should be performed with\n     * relative projection so children stay in sync with their parent element.\n     */\n\n    var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n    /**\n     * If we had previously resolved constraints relative to the viewport,\n     * we need to also convert those to a relative coordinate space for the animation\n     */\n\n    var constraints = this.constraints || {};\n\n    if (isRelative && Object.keys(constraints).length && this.isLayoutDrag()) {\n      var projectionParent = this.visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n        eachAxis(function (axis) {\n          var _a = relativeConstraints_1[axis],\n              min = _a.min,\n              max = _a.max;\n          constraints[axis] = {\n            min: isNaN(min) ? undefined : min,\n            max: isNaN(max) ? undefined : max\n          };\n        });\n      }\n    }\n\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n\n      var inertia = __assign(__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition); // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n\n\n      return _this.getAxisMotionValue(axis) ? _this.startAxisValueAnimation(axis, inertia) : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n    }); // Run all animations and then resolve the new drag constraints.\n\n    return Promise.all(momentumAnimations).then(function () {\n      var _a, _b;\n\n      (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n\n  VisualElementDragControls.prototype.stopMotion = function () {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      axisValue ? axisValue.stop() : _this.visualElement.stopLayoutAnimation();\n    });\n  };\n\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!axisValue) return;\n    var currentValue = axisValue.get();\n    axisValue.set(currentValue);\n    axisValue.set(currentValue); // Set twice to hard-reset velocity\n\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n\n  VisualElementDragControls.prototype.scalePoint = function () {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragConstraints = _a.dragConstraints;\n    if (!isRefObject(dragConstraints) || !this.constraintsBox) return; // Stop any current animations as there can be some visual glitching if we resize mid animation\n\n    this.stopMotion(); // Record the relative progress of the targetBox relative to the constraintsBox\n\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n    });\n    /**\n     * For each axis, calculate the current progress of the layout axis within the constraints.\n     * Then, using the latest layout and constraints measurements, reposition the new layout axis\n     * proportionally within the constraints.\n     */\n\n    this.updateConstraints(function () {\n      eachAxis(function (axis) {\n        if (!shouldDrag(axis, drag, null)) return; // Calculate the position of the targetBox relative to the constraintsBox using the\n        // previously calculated progress\n\n        var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]),\n            min = _a.min,\n            max = _a.max;\n\n        _this.visualElement.setProjectionTargetAxis(axis, min, max);\n      });\n    });\n    /**\n     * If any other draggable components are queuing the same tasks synchronously\n     * this will wait until they've all been scheduled before flushing.\n     */\n\n    setTimeout(flushLayout, 1);\n  };\n\n  VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n    var _this = this;\n\n    this.cancelLayout = batchLayout(function (read, write) {\n      var ancestors = collectProjectingAncestors(_this.visualElement);\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.resetTransform();\n        });\n      });\n      read(function () {\n        return updateLayoutMeasurement(_this.visualElement);\n      });\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.restoreTransform();\n        });\n      });\n      read(function () {\n        _this.resolveDragConstraints();\n      });\n      if (onReady) write(onReady);\n    });\n  };\n\n  VisualElementDragControls.prototype.mount = function (visualElement) {\n    var _this = this;\n\n    var element = visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.props,\n          drag = _a.drag,\n          _b = _a.dragListener,\n          dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePoint();\n    });\n    /**\n     * Ensure drag constraints are resolved correctly relative to the dragging element\n     * whenever its layout changes.\n     */\n\n    var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n      if (_this.isDragging) {\n        _this.resolveDragConstraints();\n      }\n    });\n    /**\n     * If the previous component with this same layoutId was dragging at the time\n     * it was unmounted, we want to continue the same gesture on this component.\n     */\n\n    var prevDragCursor = visualElement.prevDragCursor;\n\n    if (prevDragCursor) {\n      this.start(lastPointerEvent, {\n        cursorProgress: prevDragCursor\n      });\n    }\n    /**\n     * Return a function that will teardown the drag gesture\n     */\n\n\n    return function () {\n      stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n      stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n      stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n\n      _this.cancelDrag();\n    };\n  };\n\n  return VisualElementDragControls;\n}();\n\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\n\n\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n\n  var direction = null;\n\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n\n  return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\n\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n  if (isLayoutDrag === void 0) {\n    isLayoutDrag = true;\n  }\n\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) return false;\n  var offset;\n\n  if (isLayoutDrag) {\n    offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n    removeBoxTransforms(offset, projectionParent.getLatestValues());\n  } else {\n    offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  }\n\n  eachAxis(function (axis) {\n    return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n  });\n  return true;\n}\n\nexport { convertToRelativeProjection };","import { useDrag } from '../../gestures/drag/use-drag.js';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\nexport { drag };","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { PanSession } from './PanSession.js';\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\n\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n      onPanStart = _a.onPanStart,\n      onPanEnd = _a.onPanEnd,\n      onPanSessionStart = _a.onPanSessionStart,\n      visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = useRef(null);\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\n\nexport { usePanGesture };","import { __assign } from 'tslib';\nimport { useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { VisualElementDragControls } from './VisualElementDragControls.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\n\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n      visualElement = props.visualElement;\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls({\n      visualElement: visualElement\n    });\n  });\n  dragControls.setProps(__assign(__assign({}, props), {\n    transformPagePoint: transformPagePoint\n  })); // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n\n  useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls]); // Mount the drag controls with the visualElement\n\n  useEffect(function () {\n    return dragControls.mount(visualElement);\n  }, []);\n}\n\nexport { useDrag };","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\n\n\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n\n  var _a = __read(match, 3),\n      token = _a[1],\n      fallback = _a[2];\n\n  return [token, fallback];\n}\n\nvar maxDepth = 4;\n\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n\n  invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n\n  var _a = __read(parseCSSVariable(current), 2),\n      token = _a[0],\n      fallback = _a[1]; // No CSS variable detected\n\n\n  if (!token) return; // Attempt to read this CSS variable off the element\n\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\n\n\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n\n  var target = __rest(_a, []);\n\n  var element = visualElement.getInstance();\n  if (!(element instanceof HTMLElement)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  }; // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n\n  if (transitionEnd) {\n    transitionEnd = __assign({}, transitionEnd);\n  } // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n\n\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  }); // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue; // Clone target if it hasn't already been\n\n    target[key] = resolved; // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };","import { __assign } from 'tslib';\nimport { complex, px } from 'style-value-types';\nimport { mix } from 'popmotion';\nimport { cssVariableRegex } from '../utils/css-variables-conversion.js';\n\nfunction pixelsToPercent(pixels, axis) {\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nfunction correctBorderRadius(latest, _layoutState, _a) {\n  var target = _a.target;\n  /**\n   * If latest is a string, if it's a percentage we can return immediately as it's\n   * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n   */\n\n  if (typeof latest === \"string\") {\n    if (px.test(latest)) {\n      latest = parseFloat(latest);\n    } else {\n      return latest;\n    }\n  }\n  /**\n   * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n   * pixel value as a percentage of each axis\n   */\n\n\n  var x = pixelsToPercent(latest, target.x);\n  var y = pixelsToPercent(latest, target.y);\n  return x + \"% \" + y + \"%\";\n}\n\nvar varToken = \"_$css\";\n\nfunction correctBoxShadow(latest, _a) {\n  var delta = _a.delta,\n      treeScale = _a.treeScale;\n  var original = latest;\n  /**\n   * We need to first strip and store CSS variables from the string.\n   */\n\n  var containsCSSVariables = latest.includes(\"var(\");\n  var cssVariables = [];\n\n  if (containsCSSVariables) {\n    latest = latest.replace(cssVariableRegex, function (match) {\n      cssVariables.push(match);\n      return varToken;\n    });\n  }\n\n  var shadow = complex.parse(latest); // TODO: Doesn't support multiple shadows\n\n  if (shadow.length > 5) return original;\n  var template = complex.createTransformer(latest);\n  var offset = typeof shadow[0] !== \"number\" ? 1 : 0; // Calculate the overall context scale\n\n  var xScale = delta.x.scale * treeScale.x;\n  var yScale = delta.y.scale * treeScale.y;\n  shadow[0 + offset] /= xScale;\n  shadow[1 + offset] /= yScale;\n  /**\n   * Ideally we'd correct x and y scales individually, but because blur and\n   * spread apply to both we have to take a scale average and apply that instead.\n   * We could potentially improve the outcome of this by incorporating the ratio between\n   * the two scales.\n   */\n\n  var averageScale = mix(xScale, yScale, 0.5); // Blur\n\n  if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale; // Spread\n\n  if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n  var output = template(shadow);\n\n  if (containsCSSVariables) {\n    var i_1 = 0;\n    output = output.replace(varToken, function () {\n      var cssVariable = cssVariables[i_1];\n      i_1++;\n      return cssVariable;\n    });\n  }\n\n  return output;\n}\n\nvar borderCorrectionDefinition = {\n  process: correctBorderRadius\n};\nvar defaultScaleCorrectors = {\n  borderRadius: __assign(__assign({}, borderCorrectionDefinition), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: borderCorrectionDefinition,\n  borderTopRightRadius: borderCorrectionDefinition,\n  borderBottomLeftRadius: borderCorrectionDefinition,\n  borderBottomRightRadius: borderCorrectionDefinition,\n  boxShadow: {\n    process: correctBoxShadow\n  }\n};\nexport { correctBorderRadius, correctBoxShadow, defaultScaleCorrectors, pixelsToPercent };","import { __extends, __rest, __assign, __read } from 'tslib';\nimport * as React from 'react';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { startAnimation, getValueTransition } from '../../../animation/utils/transitions.js';\nimport { checkIfParentHasChanged, calcRelativeOffset, tweenAxis } from './utils.js';\nimport { VisibilityAction } from '../../../components/AnimateSharedLayout/types.js';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.js';\nimport { axisBox } from '../../../utils/geometry/index.js';\nimport { addScaleCorrection } from '../../../render/dom/projection/scale-correction.js';\nimport { defaultScaleCorrectors } from '../../../render/dom/projection/default-scale-correctors.js';\nvar progressTarget = 1000;\n\nvar Animate =\n/** @class */\nfunction (_super) {\n  __extends(Animate, _super);\n\n  function Animate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A mutable object that tracks the target viewport box\n     * for the current animation frame.\n     */\n\n\n    _this.frameTarget = axisBox();\n    /**\n     * The current animation target, we use this to check whether to start\n     * a new animation or continue the existing one.\n     */\n\n    _this.currentAnimationTarget = axisBox();\n    /**\n     * Track whether we're animating this axis.\n     */\n\n    _this.isAnimating = {\n      x: false,\n      y: false\n    };\n    _this.stopAxisAnimation = {\n      x: undefined,\n      y: undefined\n    };\n    _this.isAnimatingTree = false;\n\n    _this.animate = function (target, origin, _a) {\n      if (_a === void 0) {\n        _a = {};\n      }\n\n      var originBox = _a.originBox,\n          targetBox = _a.targetBox,\n          visibilityAction = _a.visibilityAction,\n          shouldStackAnimate = _a.shouldStackAnimate,\n          onComplete = _a.onComplete,\n          prevParent = _a.prevParent,\n          config = __rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n\n      var _b = _this.props,\n          visualElement = _b.visualElement,\n          layout = _b.layout;\n      /**\n       * Early return if we've been instructed not to animate this render.\n       */\n\n      if (shouldStackAnimate === false) {\n        _this.isAnimatingTree = false;\n        return _this.safeToRemove();\n      }\n      /**\n       * Prioritise tree animations\n       */\n\n\n      if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n        return;\n      } else if (shouldStackAnimate) {\n        _this.isAnimatingTree = true;\n      }\n      /**\n       * Allow the measured origin (prev bounding box) and target (actual layout) to be\n       * overridden by the provided config.\n       */\n\n\n      origin = originBox || origin;\n      target = targetBox || target;\n      /**\n       * If this element has a projecting parent, there's an opportunity to animate\n       * it relatively to that parent rather than relatively to the viewport. This\n       * allows us to add orchestrated animations.\n       */\n\n      var isRelative = false;\n      var projectionParent = visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var prevParentViewportBox = projectionParent.prevViewportBox;\n        var parentLayout = projectionParent.getLayoutState().layout;\n        /**\n         * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n         */\n\n        if (prevParent) {\n          /**\n           * If we've been provided an explicit target box it means we're animating back\n           * to this previous parent. So we can make a relative box by comparing to the previous\n           * parent's layout\n           */\n          if (targetBox) {\n            parentLayout = prevParent.getLayoutState().layout;\n          }\n          /**\n           * Likewise if we've been provided an explicit origin box it means we're\n           * animating out from a different element. So we should figure out where that was\n           * on screen relative to the new parent element.\n           */\n\n\n          if (originBox && !checkIfParentHasChanged(prevParent, projectionParent) && prevParent.prevViewportBox) {\n            prevParentViewportBox = prevParent.prevViewportBox;\n          }\n        }\n\n        if (prevParentViewportBox && isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n          isRelative = true;\n          origin = calcRelativeOffset(prevParentViewportBox, origin);\n          target = calcRelativeOffset(parentLayout, target);\n        }\n      }\n\n      var boxHasMoved = hasMoved(origin, target);\n      var animations = eachAxis(function (axis) {\n        var _a, _b;\n        /**\n         * If layout is set to \"position\", we can resize the origin box based on the target\n         * box and only animate its position.\n         */\n\n\n        if (layout === \"position\") {\n          var targetLength = target[axis].max - target[axis].min;\n          origin[axis].max = origin[axis].min + targetLength;\n        }\n\n        if (visualElement.projection.isTargetLocked) {\n          return;\n        } else if (visibilityAction !== undefined) {\n          visualElement.setVisibility(visibilityAction === VisibilityAction.Show);\n        } else if (boxHasMoved) {\n          // If the box has moved, animate between it's current visual state and its\n          // final state\n          return _this.animateAxis(axis, target[axis], origin[axis], __assign(__assign({}, config), {\n            isRelative: isRelative\n          }));\n        } else {\n          (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); // If the box has remained in the same place, immediately set the axis target\n          // to the final desired state\n\n          return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n        }\n      }); // Force a render to ensure there's no flash of uncorrected bounding box.\n\n      visualElement.syncRender();\n      /**\n       * If this visualElement isn't present (ie it's been removed from the tree by the user but\n       * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n       * have successfully finished.\n       */\n\n      return Promise.all(animations).then(function () {\n        _this.isAnimatingTree = false;\n        onComplete && onComplete();\n        visualElement.notifyLayoutAnimationComplete();\n      });\n    };\n\n    return _this;\n  }\n\n  Animate.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var visualElement = this.props.visualElement;\n    visualElement.animateMotionValue = startAnimation;\n    visualElement.enableLayoutProjection();\n    this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n\n    visualElement.layoutSafeToRemove = function () {\n      return _this.safeToRemove();\n    };\n\n    addScaleCorrection(defaultScaleCorrectors);\n  };\n\n  Animate.prototype.componentWillUnmount = function () {\n    var _this = this;\n\n    this.unsubLayoutReady();\n    eachAxis(function (axis) {\n      var _a, _b;\n\n      return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  /**\n   * TODO: This manually performs animations on the visualElement's layout progress\n   * values. It'd be preferable to amend the startLayoutAxisAnimation\n   * API to accept more custom animations like this.\n   */\n\n\n  Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n    var _this = this;\n\n    var _b, _c;\n\n    var _d = _a === void 0 ? {} : _a,\n        transition = _d.transition,\n        isRelative = _d.isRelative;\n    /**\n     * If we're not animating to a new target, don't run this animation\n     */\n\n\n    if (this.isAnimating[axis] && axisIsEqual(target, this.currentAnimationTarget[axis])) {\n      return;\n    }\n\n    (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n    this.isAnimating[axis] = true;\n    var visualElement = this.props.visualElement;\n    var frameTarget = this.frameTarget[axis];\n    var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n    /**\n     * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n     * be re-incoporated into a subsequent spring animation.\n     */\n\n    layoutProgress.clearListeners();\n    layoutProgress.set(0);\n    layoutProgress.set(0);\n    /**\n     * Create an animation function to run once per frame. This will tween the visual bounding box from\n     * origin to target using the latest progress value.\n     */\n\n    var frame = function frame() {\n      // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n      var p = layoutProgress.get() / progressTarget; // Tween the axis and update the visualElement with the latest values\n\n      tweenAxis(frameTarget, origin, target, p);\n      visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n    }; // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n\n\n    frame(); // Create a function to stop animation on this specific axis\n\n    var unsubscribeProgress = layoutProgress.onChange(frame);\n\n    this.stopAxisAnimation[axis] = function () {\n      _this.isAnimating[axis] = false;\n      layoutProgress.stop();\n      unsubscribeProgress();\n    };\n\n    this.currentAnimationTarget[axis] = target;\n    var layoutTransition = transition || visualElement.getDefaultTransition() || defaultLayoutTransition; // Start the animation on this axis\n\n    var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n    return animation;\n  };\n\n  Animate.prototype.safeToRemove = function () {\n    var _a, _b;\n\n    (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n\n  Animate.prototype.render = function () {\n    return null;\n  };\n\n  return Animate;\n}(React.Component);\n\nfunction AnimateLayoutContextProvider(props) {\n  var _a = __read(usePresence(), 2),\n      safeToRemove = _a[1];\n\n  return React.createElement(Animate, __assign({}, props, {\n    safeToRemove: safeToRemove\n  }));\n}\n\nfunction hasMoved(a, b) {\n  return !isZeroBox(a) && !isZeroBox(b) && (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y));\n}\n\nvar zeroAxis = {\n  min: 0,\n  max: 0\n};\n\nfunction isZeroBox(a) {\n  return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\n\nfunction axisIsEqual(a, b) {\n  return a.min === b.min && a.max === b.max;\n}\n\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\n\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n  return prevParent || !prevParent && !(originBox || targetBox);\n}\n\nexport { AnimateLayoutContextProvider };","import { __extends, __assign } from 'tslib';\nimport React__default, { useContext } from 'react';\nimport { isSharedLayout, SharedLayoutContext, FramerTreeLayoutContext } from '../../../context/SharedLayoutContext.js';\nimport { snapshotViewportBox } from '../../../render/dom/projection/utils.js';\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\n\nvar Measure =\n/** @class */\nfunction (_super) {\n  __extends(Measure, _super);\n\n  function Measure() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * If this is a child of a SyncContext, register the VisualElement with it on mount.\n   */\n\n\n  Measure.prototype.componentDidMount = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        framerSyncLayout = _a.framerSyncLayout,\n        visualElement = _a.visualElement;\n    isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n    isSharedLayout(framerSyncLayout) && framerSyncLayout.register(visualElement);\n    visualElement.onUnmount(function () {\n      if (isSharedLayout(syncLayout)) {\n        syncLayout.remove(visualElement);\n      }\n\n      if (isSharedLayout(framerSyncLayout)) {\n        framerSyncLayout.remove(visualElement);\n      }\n    });\n  };\n  /**\n   * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n   * handle the snapshotting.\n   *\n   * If it is stand-alone component, add it to the batcher.\n   */\n\n\n  Measure.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        visualElement = _a.visualElement;\n\n    if (isSharedLayout(syncLayout)) {\n      syncLayout.syncUpdate();\n    } else {\n      snapshotViewportBox(visualElement);\n      syncLayout.add(visualElement);\n    }\n\n    return null;\n  };\n\n  Measure.prototype.componentDidUpdate = function () {\n    var syncLayout = this.props.syncLayout;\n    if (!isSharedLayout(syncLayout)) syncLayout.flush();\n  };\n\n  Measure.prototype.render = function () {\n    return null;\n  };\n\n  return Measure;\n}(React__default.Component);\n\nfunction MeasureContextProvider(props) {\n  var syncLayout = useContext(SharedLayoutContext);\n  var framerSyncLayout = useContext(FramerTreeLayoutContext);\n  return React__default.createElement(Measure, __assign({}, props, {\n    syncLayout: syncLayout,\n    framerSyncLayout: framerSyncLayout\n  }));\n}\n\nexport { MeasureContextProvider };","import { AnimateLayoutContextProvider } from './Animate.js';\nimport { MeasureContextProvider } from './Measure.js';\nvar layoutAnimations = {\n  measureLayout: MeasureContextProvider,\n  layoutAnimation: AnimateLayoutContextProvider\n};\nexport { layoutAnimations };","import { axisBox, delta } from '../../utils/geometry/index.js';\n\nvar createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox()\n  };\n};\n\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: axisBox(),\n    layoutCorrected: axisBox(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: delta(),\n    deltaFinal: delta(),\n    deltaTransform: \"\"\n  };\n}\n\nvar zeroLayout = createLayoutState();\nexport { createLayoutState, createProjectionState, zeroLayout };","import { zeroLayout } from '../../utils/state.js';\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\n\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n  var x = _a.x,\n      y = _a.y;\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n\n  var xTranslate = x.translate / treeScale.x;\n  var yTranslate = y.translate / treeScale.y;\n  var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n        rotateX = latestTransform.rotateX,\n        rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\" + rotate + \") \";\n    if (rotateX) transform += \"rotateX(\" + rotateX + \") \";\n    if (rotateY) transform += \"rotateY(\" + rotateY + \") \";\n  }\n\n  transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n  return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\n\n\nfunction buildLayoutProjectionTransformOrigin(_a) {\n  var deltaFinal = _a.deltaFinal;\n  return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\n\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, {\n  x: 1,\n  y: 1\n});\nexport { buildLayoutProjectionTransform, buildLayoutProjectionTransformOrigin, identityProjection };","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.js';\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\n\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      return names.forEach(function (name) {\n        var _a;\n\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        var on = \"on\" + name;\n        var propListener = props[on];\n\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return manager.notify.apply(manager, __spreadArray([], __read(args)));\n    };\n  });\n  return lifecycles;\n}\n\nexport { createLifecycles };","import { resetBox, applyTreeDeltas } from '../../utils/geometry/delta-apply.js';\nimport { updateBoxDelta } from '../../utils/geometry/delta-calc.js';\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n  var delta = _a.delta,\n      layout = _a.layout,\n      layoutCorrected = _a.layoutCorrected,\n      treeScale = _a.treeScale;\n  var target = _b.target;\n  /**\n   * Reset the corrected box with the latest values from box, as we're then going\n   * to perform mutative operations on it.\n   */\n\n  resetBox(layoutCorrected, layout);\n  /**\n   * Apply all the parent deltas to this box to produce the corrected box. This\n   * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n   */\n\n  applyTreeDeltas(layoutCorrected, treeScale, treePath);\n  /**\n   * Update the delta between the corrected box and the target box before user-set transforms were applied.\n   * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n   * for our layout reprojection, but still allow them to be scaled correctly by the user.\n   * It might be that to simplify this we may want to accept that user-set scale is also corrected\n   * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n   * to allow people to choose whether these styles are corrected based on just the\n   * layout reprojection or the final bounding box.\n   */\n\n  updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\nexport { updateLayoutDeltas };","import { addUniqueItem, removeItem } from '../../utils/array.js';\nimport { compareByDepth } from './compare-by-depth.js';\n\nvar FlatTree =\n/** @class */\nfunction () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n\n  return FlatTree;\n}();\n\nexport { FlatTree };","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { pipe } from 'popmotion';\nimport { Presence } from '../components/AnimateSharedLayout/types.js';\nimport { eachAxis } from '../utils/each-axis.js';\nimport { axisBox } from '../utils/geometry/index.js';\nimport { removeBoxTransforms, applyBoxTransforms } from '../utils/geometry/delta-apply.js';\nimport { calcRelativeBox, updateBoxDelta } from '../utils/geometry/delta-calc.js';\nimport { motionValue } from '../value/index.js';\nimport { isMotionValue } from '../value/utils/is-motion-value.js';\nimport { buildLayoutProjectionTransform } from './html/utils/build-projection-transform.js';\nimport { variantPriorityOrder } from './utils/animation-state.js';\nimport { createLifecycles } from './utils/lifecycles.js';\nimport { updateMotionValuesFromProps } from './utils/motion-values.js';\nimport { updateLayoutDeltas } from './utils/projection.js';\nimport { createLayoutState, createProjectionState } from './utils/state.js';\nimport { FlatTree } from './utils/flat-tree.js';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.js';\nimport { setCurrentViewportBox } from './dom/projection/relative-set.js';\nimport { isDraggable } from './utils/is-draggable.js';\n\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n      treeType = _b === void 0 ? \"\" : _b,\n      build = _a.build,\n      _getBaseTarget = _a.getBaseTarget,\n      _makeTargetAnimatable = _a.makeTargetAnimatable,\n      _measureViewportBox = _a.measureViewportBox,\n      renderInstance = _a.render,\n      readValueFromInstance = _a.readValueFromInstance,\n      _resetTransform = _a.resetTransform,\n      _restoreTransform = _a.restoreTransform,\n      removeValueFromRenderState = _a.removeValueFromRenderState,\n      _sortNodePosition = _a.sortNodePosition,\n      scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n        props = _a.props,\n        presenceId = _a.presenceId,\n        blockInitialAnimation = _a.blockInitialAnimation,\n        visualState = _a.visualState;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var latestValues = visualState.latestValues,\n        renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender and onViewportBoxUpdate.\n     */\n\n    var lifecycles = createLifecycles();\n    /**\n     *\n     */\n\n    var projection = createProjectionState();\n    /**\n     * A reference to the nearest projecting parent. This is either\n     * undefined if we haven't looked for the nearest projecting parent,\n     * false if there is no parent performing layout projection, or a reference\n     * to the projecting parent.\n     */\n\n    var projectionParent;\n    /**\n     * This is a reference to the visual state of the \"lead\" visual element.\n     * Usually, this will be this visual element. But if it shares a layoutId\n     * with other visual elements, only one of them will be designated lead by\n     * AnimateSharedLayout. All the other visual elements will take on the visual\n     * appearance of the lead while they crossfade to it.\n     */\n\n    var leadProjection = projection;\n    var leadLatestValues = latestValues;\n    var unsubscribeFromLeadVisualElement;\n    /**\n     * The latest layout measurements and calculated projections. This\n     * is seperate from the target projection data in visualState as\n     * many visual elements might point to the same piece of visualState as\n     * a target, whereas they might each have different layouts and thus\n     * projection calculations needed to project into the same viewport box.\n     */\n\n    var layoutState = createLayoutState();\n    /**\n     *\n     */\n\n    var crossfader;\n    /**\n     * Keep track of whether the viewport box has been updated since the\n     * last time the layout projection was re-calculated.\n     */\n\n    var hasViewportBoxUpdated = false;\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n\n    var prevMotionValues = {};\n    /**\n     * x/y motion values that track the progress of initiated layout\n     * animations.\n     *\n     * TODO: Target for removal\n     */\n\n    var projectionTargetProgress;\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n\n    var baseTarget = __assign({}, latestValues); // Internal methods ========================\n\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n\n\n    var removeFromVariantTree;\n    /**\n     *\n     */\n\n    function render() {\n      if (!instance) return;\n\n      if (element.isProjectionReady()) {\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n\n        updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n      }\n\n      triggerBuild();\n      renderInstance(instance, renderState);\n    }\n\n    function triggerBuild() {\n      var valuesToRender = latestValues;\n\n      if (crossfader && crossfader.isActive()) {\n        var crossfadedValues = crossfader.getCrossfadeState(element);\n        if (crossfadedValues) valuesToRender = crossfadedValues;\n      }\n\n      build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n    }\n\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n\n    function updateLayoutProjection() {\n      if (!element.isProjectionReady()) return;\n      var delta = layoutState.delta,\n          treeScale = layoutState.treeScale;\n      var prevTreeScaleX = treeScale.x;\n      var prevTreeScaleY = treeScale.y;\n      var prevDeltaTransform = layoutState.deltaTransform;\n      updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n      hasViewportBoxUpdated && element.notifyViewportBoxUpdate(leadProjection.target, delta);\n      hasViewportBoxUpdated = false;\n      var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n\n      if (deltaTransform !== prevDeltaTransform || // Also compare calculated treeScale, for values that rely on this only for scale correction\n      prevTreeScaleX !== treeScale.x || prevTreeScaleY !== treeScale.y) {\n        element.scheduleRender();\n      }\n\n      layoutState.deltaTransform = deltaTransform;\n    }\n\n    function _updateTreeLayoutProjection() {\n      element.layoutTree.forEach(fireUpdateLayoutProjection);\n    }\n    /**\n     *\n     */\n\n\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync.update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n\n\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n\n\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n\n    var element = __assign(__assign({\n      treeType: treeType,\n\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n\n      /**\n       * An ancestor path back to the root visual element. This is used\n       * by layout projection to quickly recurse back up the tree.\n       */\n      path: parent ? __spreadArray(__spreadArray([], __read(parent.path)), [parent]) : [],\n      layoutTree: parent ? parent.layoutTree : new FlatTree(),\n\n      /**\n       *\n       */\n      presenceId: presenceId,\n      projection: projection,\n\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by AnimateSharedLayout, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        instance = element.current = newInstance;\n        element.pointTo(element);\n\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n      },\n\n      /**\n       *\n       */\n      unmount: function unmount() {\n        cancelSync.update(update);\n        cancelSync.render(render);\n        cancelSync.preRender(element.updateLayoutProjection);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        element.stopLayoutAnimation();\n        element.layoutTree.remove(element);\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        lifecycles.clearAllListeners();\n      },\n\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n\n        var closestVariantNode = element.getClosestVariantNode();\n\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n\n      /**\n       * A method that schedules an update to layout projections throughout\n       * the tree. We inherit from the parent so there's only ever one\n       * job scheduled on the next frame - that of the root visual element.\n       */\n      scheduleUpdateLayoutProjection: parent ? parent.scheduleUpdateLayoutProjection : function () {\n        return sync.preRender(element.updateTreeLayoutProjection, false, true);\n      },\n\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      // Motion values ========================\n\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n\n        return value;\n      },\n\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync.render(render, false, true);\n      },\n\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n\n          return context_1;\n        }\n\n        var context = {};\n\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n\n        return context;\n      },\n      // Layout projection ==============================\n\n      /**\n       * Enable layout projection for this visual element. Won't actually\n       * occur until we also have hydrated layout measurements.\n       */\n      enableLayoutProjection: function enableLayoutProjection() {\n        projection.isEnabled = true;\n        element.layoutTree.add(element);\n      },\n\n      /**\n       * Lock the projection target, for instance when dragging, so\n       * nothing else can try and animate it.\n       */\n      lockProjectionTarget: function lockProjectionTarget() {\n        projection.isTargetLocked = true;\n      },\n      unlockProjectionTarget: function unlockProjectionTarget() {\n        element.stopLayoutAnimation();\n        projection.isTargetLocked = false;\n      },\n      getLayoutState: function getLayoutState() {\n        return layoutState;\n      },\n      setCrossfader: function setCrossfader(newCrossfader) {\n        crossfader = newCrossfader;\n      },\n      isProjectionReady: function isProjectionReady() {\n        return projection.isEnabled && projection.isHydrated && layoutState.isHydrated;\n      },\n\n      /**\n       * Start a layout animation on a given axis.\n       */\n      startLayoutAnimation: function startLayoutAnimation(axis, transition, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var progress = element.getProjectionAnimationProgress()[axis];\n\n        var _a = isRelative ? projection.relativeTarget[axis] : projection.target[axis],\n            min = _a.min,\n            max = _a.max;\n\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n\n        progress.onChange(function (v) {\n          element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n        });\n        return element.animateMotionValue(axis, progress, 0, transition);\n      },\n\n      /**\n       * Stop layout animations.\n       */\n      stopLayoutAnimation: function stopLayoutAnimation() {\n        eachAxis(function (axis) {\n          return element.getProjectionAnimationProgress()[axis].stop();\n        });\n      },\n\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox(withTransform) {\n        if (withTransform === void 0) {\n          withTransform = true;\n        }\n\n        var viewportBox = _measureViewportBox(instance, options);\n\n        if (!withTransform) removeBoxTransforms(viewportBox, latestValues);\n        return viewportBox;\n      },\n\n      /**\n       * Get the motion values tracking the layout animations on each\n       * axis. Lazy init if not already created.\n       */\n      getProjectionAnimationProgress: function getProjectionAnimationProgress() {\n        projectionTargetProgress || (projectionTargetProgress = {\n          x: motionValue(0),\n          y: motionValue(0)\n        });\n        return projectionTargetProgress;\n      },\n\n      /**\n       * Update the projection of a single axis. Schedule an update to\n       * the tree layout projection.\n       */\n      setProjectionTargetAxis: function setProjectionTargetAxis(axis, min, max, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var target;\n\n        if (isRelative) {\n          if (!projection.relativeTarget) {\n            projection.relativeTarget = axisBox();\n          }\n\n          target = projection.relativeTarget[axis];\n        } else {\n          projection.relativeTarget = undefined;\n          target = projection.target[axis];\n        }\n\n        projection.isHydrated = true;\n        target.min = min;\n        target.max = max; // Flag that we want to fire the onViewportBoxUpdate event handler\n\n        hasViewportBoxUpdated = true;\n        lifecycles.notifySetAxisTarget();\n      },\n\n      /**\n       * Rebase the projection target on top of the provided viewport box\n       * or the measured layout. This ensures that non-animating elements\n       * don't fall out of sync differences in measurements vs projections\n       * after a page scroll or other relayout.\n       */\n      rebaseProjectionTarget: function rebaseProjectionTarget(force, box) {\n        if (box === void 0) {\n          box = layoutState.layout;\n        }\n\n        var _a = element.getProjectionAnimationProgress(),\n            x = _a.x,\n            y = _a.y;\n\n        var shouldRebase = !projection.relativeTarget && !projection.isTargetLocked && !x.isAnimating() && !y.isAnimating();\n\n        if (force || shouldRebase) {\n          eachAxis(function (axis) {\n            var _a = box[axis],\n                min = _a.min,\n                max = _a.max;\n            element.setProjectionTargetAxis(axis, min, max);\n          });\n        }\n      },\n\n      /**\n       * Notify the visual element that its layout is up-to-date.\n       * Currently Animate.tsx uses this to check whether a layout animation\n       * needs to be performed.\n       */\n      notifyLayoutReady: function notifyLayoutReady(config) {\n        setCurrentViewportBox(element);\n        element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n      },\n\n      /**\n       * Temporarily reset the transform of the instance.\n       */\n      resetTransform: function resetTransform() {\n        return _resetTransform(element, instance, props);\n      },\n      restoreTransform: function restoreTransform() {\n        return _restoreTransform(instance, renderState);\n      },\n      updateLayoutProjection: updateLayoutProjection,\n      updateTreeLayoutProjection: function updateTreeLayoutProjection() {\n        element.layoutTree.forEach(fireResolveRelativeTargetBox);\n        /**\n         * Schedule the projection updates at the end of the current preRender\n         * step. This will ensure that all layout trees will first resolve\n         * relative projection boxes into viewport boxes, and *then*\n         * update projections.\n         */\n\n        sync.preRender(_updateTreeLayoutProjection, false, true); // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n      },\n      getProjectionParent: function getProjectionParent() {\n        if (projectionParent === undefined) {\n          var foundParent = false; // Search backwards through the tree path\n\n          for (var i = element.path.length - 1; i >= 0; i--) {\n            var ancestor = element.path[i];\n\n            if (ancestor.projection.isEnabled) {\n              foundParent = ancestor;\n              break;\n            }\n          }\n\n          projectionParent = foundParent;\n        }\n\n        return projectionParent;\n      },\n      resolveRelativeTargetBox: function resolveRelativeTargetBox() {\n        var relativeParent = element.getProjectionParent();\n        if (!projection.relativeTarget || !relativeParent) return;\n        calcRelativeBox(projection, relativeParent.projection);\n\n        if (isDraggable(relativeParent)) {\n          var target = projection.target;\n          applyBoxTransforms(target, target, relativeParent.getLatestValues());\n        }\n      },\n      shouldResetTransform: function shouldResetTransform() {\n        return Boolean(props._layoutResetTransform);\n      },\n\n      /**\n       *\n       */\n      pointTo: function pointTo(newLead) {\n        leadProjection = newLead.projection;\n        leadLatestValues = newLead.getLatestValues();\n        /**\n         * Subscribe to lead component's layout animations\n         */\n\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        unsubscribeFromLeadVisualElement = pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n          var _a;\n\n          if (element.isPresent) {\n            element.presence = Presence.Present;\n          } else {\n            (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n          }\n        }));\n      },\n      // TODO: Clean this up\n      isPresent: true,\n      presence: Presence.Entering\n    });\n\n    return element;\n  };\n};\n\nfunction fireResolveRelativeTargetBox(child) {\n  child.resolveRelativeTargetBox();\n}\n\nfunction fireUpdateLayoutProjection(child) {\n  child.updateLayoutProjection();\n}\n\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder));\n\nvar numVariantProps = variantProps.length;\nexport { visualElement };","import { motionValue } from '../../value/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key); // TODO: Only update values that aren't being animated or even looked at\n\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  } // Handle removed values\n\n\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n\n  return next;\n}\n\nexport { updateMotionValuesFromProps };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\n\nfunction setCurrentViewportBox(visualElement) {\n  var projectionParent = visualElement.getProjectionParent();\n\n  if (!projectionParent) {\n    visualElement.rebaseProjectionTarget();\n    return;\n  }\n\n  var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  eachAxis(function (axis) {\n    visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n  });\n}\n\nexport { setCurrentViewportBox };","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.js';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.js';\nimport { findDimensionValueType } from '../value-types/dimensions.js';\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\n\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\n\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\n\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\n\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === number || v === px;\n};\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\n\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\n\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  }); // Apply changes to element before measurement\n\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\n\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a) {\n    var x = _a.x;\n    return x.max - x.min;\n  },\n  height: function height(_a) {\n    var y = _a.y;\n    return y.max - y.min;\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\n\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display,\n      top = elementComputedStyle.top,\n      left = elementComputedStyle.left,\n      bottom = elementComputedStyle.bottom,\n      right = elementComputedStyle.right,\n      transform = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform\n  }; // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  } // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n\n\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\n\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n\n  target = __assign({}, target);\n  transitionEnd = __assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey); // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var to = target[key];\n    var fromType = findDimensionValueType(from);\n    var toType; // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n\n      for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys); // If we removed transform values, reapply them before the next render\n\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = __read(_a, 2),\n            key = _b[0],\n            value = _b[1];\n\n        visualElement.getValue(key).set(value);\n      });\n    } // Reapply original values\n\n\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\n\n\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { BoundingBoxDimension, unitConversion };","import { resolveCSSVariables } from './css-variables-conversion.js';\nimport { unitConversion } from './unit-conversion.js';\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\n\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.js';\nimport { getBoundingBox } from '../dom/projection/measure.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.js';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.js';\nimport { isTransformProp } from './utils/transform.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { renderHTML } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from './utils/build-projection-transform.js';\n\nfunction getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle(domElement);\n      return (isCSSVariable(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return getBoundingBox(element, transformPagePoint);\n  },\n\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\"; // Ensure that whatever happens next, we restore our transform on the next frame\n\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n        style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n\n    var transition = _a.transition,\n        transitionEnd = _a.transitionEnd,\n        target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n\n    return __assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(element, renderState, latestValues, projection, layoutState, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nexport { getComputedStyle, htmlConfig, htmlVisualElement };","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\n\nexport { isNumericalString };","import { __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { htmlConfig } from '../html/visual-element.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { camelToDash } from '../dom/utils/camel-to-dash.js';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.js';\nimport { isTransformProp } from '../html/utils/transform.js';\nimport { renderSVG } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from '../html/utils/build-projection-transform.js';\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, projection, layoutState, options, props) {\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderSVG\n}));\nexport { svgVisualElement };","import { htmlVisualElement } from '../html/visual-element.js';\nimport { svgVisualElement } from '../svg/visual-element.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\n\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\n\nexport { createDomVisualElement };","import { __assign } from 'tslib';\nimport { createMotionComponent } from '../../motion/index.js';\nimport { createMotionProxy } from './motion-proxy.js';\nimport { createDomMotionConfig } from './utils/create-config.js';\nimport { gestureAnimations } from '../../motion/features/gestures.js';\nimport { animations } from '../../motion/features/animations.js';\nimport { drag } from '../../motion/features/drag.js';\nimport { layoutAnimations } from '../../motion/features/layout/index.js';\nimport { createDomVisualElement } from './create-visual-element.js';\n\nvar featureBundle = __assign(__assign(__assign(__assign({}, animations), gestureAnimations), drag), layoutAnimations);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\n\n\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\n\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };","import { __assign } from 'tslib';\nimport { isSVGComponent } from './is-svg-component.js';\nimport { createUseRender } from '../use-render.js';\nimport { svgMotionConfig } from '../../svg/config-motion.js';\nimport { htmlMotionConfig } from '../../html/config-motion.js';\n\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement) {\n  var _b = _a.forwardMotionProps,\n      forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return __assign(__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    Component: Component\n  });\n}\n\nexport { createDomMotionConfig };","import * as React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useLocation } from '@reach/router';\n\nconst duration = 0.3;\n\nconst variants = {\n\tinitial: {\n\t\topacity: 0.6,\n\t\ty: -10,\n\t},\n\texit: {\n\t\topacity: 0,\n\t\ttransition: { duration: 0, delay: 0, when: 'beforeChidlren' },\n\t},\n\tenter: {\n\t\ty: 0,\n\t\topacity: 1,\n\t\ttransition: { duration: duration, delay: 0, when: 'beforeChidlren' },\n\t},\n};\n\nexport const FramerWrapper: React.FC<{ className?: string }> = ({ children, className }) => {\n\tconst location = useLocation();\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t<motion.div\n\t\t\t\tclassName={className}\n\t\t\t\tkey={location.pathname}\n\t\t\t\tvariants={variants}\n\t\t\t\tinitial=\"initial\"\n\t\t\t\tanimate=\"enter\"\n\t\t\t\texit=\"exit\"\n\t\t\t\tid=\"FramerWrapper\">\n\t\t\t\t<>{children}</>\n\t\t\t</motion.div>\n\t\t</AnimatePresence>\n\t);\n};\n\nexport default FramerWrapper;\n","import * as React from 'react';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport * as styles from './Subscribe.module.scss';\n\nconst SubscribeNotification = () => {\n\tconst { formatMessage } = useIntlHelper();\n\tfunction handleClose() {\n\t\tdocument.documentElement.classList.remove(styles.subscribeSuccess, styles.subscribeFailure);\n\t}\n\treturn (\n\t\t<>\n\t\t\t<div className={`${styles.subscribeNotification} ${styles.subscribeSuccessMessage}`}>\n\t\t\t\t<a onClick={() => handleClose()} className={styles.subscribeCloseButton}></a>\n\t\t\t\t{formatMessage('subscribe.notification.success')}\n\t\t\t</div>\n\t\t\t<div className={`${styles.subscribeNotification} ${styles.subscribeFailureMessage}`}>\n\t\t\t\t<a onClick={() => handleClose()} className={styles.subscribeCloseButton}></a>\n\t\t\t\t{formatMessage('subscribe.notification.failure')}\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default SubscribeNotification;\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport Granim from 'granim';\nimport * as GranimTypes from './__types__/index';\n\nconst ReactGranim: React.FC<GranimProps> = (props = defaultProps) => {\n\tconst style: React.CSSProperties = {\n\t\tposition: 'absolute',\n\t\tdisplay: 'block',\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\ttop: 0,\n\t\tright: 0,\n\t\tbottom: 0,\n\t\tleft: 0,\n\t};\n\n\tReact.useEffect(() => {\n\t\tconst config = {\n\t\t\telement: `#${props.id}`,\n\t\t\tstates: {\n\t\t\t\t[props.defaultStateName]: {\n\t\t\t\t\tgradients: [\n\t\t\t\t\t\t['#8af094', '#ffd1ff'],\n\t\t\t\t\t\t['#f6d365', '#fda085'],\n\t\t\t\t\t\t['#84fab0', '#8fd3f4'],\n\t\t\t\t\t\t['#fa709a', '#fee140'],\n\t\t\t\t\t\t['#4facfe', '#00f2fe'],\n\t\t\t\t\t\t['#43e97b', '#38c9f7'],\n\t\t\t\t\t\t['#f83600', '#f9d423'],\n\t\t\t\t\t],\n\t\t\t\t\ttransitionSpeed: 5000,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst granim: GranimTypes = new Granim(Object.assign({}, config, props));\n\n\t\t//console.log('initial render');\n\t\tif (props.granimRef) {\n\t\t\tprops.granimRef(granim);\n\t\t}\n\t\treturn granim !== null && typeof window == 'undefined' && granim.clear();\n\t}, [props]);\n\n\tconst { id, className } = props;\n\treturn <canvas className={className} id={id} style={props.style || style} />;\n};\n\nReactGranim.propTypes = {\n\tclassName: PropTypes.string,\n\tdefaultStateName: PropTypes.string,\n\tdirection: PropTypes.oneOf(['diagonal' || 'left-right' || 'top-bottom' || 'radial']),\n\telToSetClassOn: PropTypes.string,\n\telement: PropTypes.string,\n\tgranimRef: PropTypes.func,\n\tid: PropTypes.string,\n\tisPausedWhenNotInView: PropTypes.bool,\n\tstateTransitionSpeed: PropTypes.number,\n\tstates: PropTypes.objectOf(\n\t\tPropTypes.shape({\n\t\t\tgradients: PropTypes.oneOfType([\n\t\t\t\tPropTypes.arrayOf(\n\t\t\t\t\tPropTypes.shape({\n\t\t\t\t\t\tcolor: PropTypes.string,\n\t\t\t\t\t\tpos: PropTypes.number,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tPropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n\t\t\t]),\n\t\t\ttransitionSpeed: PropTypes.number,\n\t\t}),\n\t),\n\tstyle: PropTypes.object,\n};\n\nconst defaultProps: GranimProps = {\n\t//id: `granim-canvas-${Math.random().toString(36).substring(2)}`,\n\tid: `granim-canvas-background`,\n\tdefaultStateName: 'default-state',\n\tisPausedWhenNotInView: true,\n};\n\n// Same approach for defaultProps too\nReactGranim.defaultProps = defaultProps;\n\ntype GranimProps = {\n\tid?: string;\n\tclassName?: string;\n\telement?: string;\n\tname?: string;\n\tstates?: {\n\t\t[key: string]: {\n\t\t\ttransitionSpeed?: number;\n\t\t\tgradients?: { color: string; pos: number }[][] | string[][] | any;\n\t\t};\n\t};\n\tstyle?: React.CSSProperties;\n\tdefaultStateName?: string;\n\telToSetClassOn?: string;\n\tdirection?: 'diagonal' | 'left-right' | 'top-bottom' | 'radial';\n\tisPausedWhenNotInView?: boolean;\n\tstateTransitionSpeed?: number;\n\tgranimRef?: (granim) => void;\n};\n\nexport default ReactGranim;\n","const darkGradients = [\n\t['#000', '#022248'],\n\t['#000', '#023707'],\n\t['#000', '#3b0101'],\n\t['#030E32', '#000'],\n\t['#200122', '#000'],\n];\n\nconst lightGradients = [\n\t['#fff', '#E1F4FB'],\n\t['#fff', '#ffdde1'],\n\t['#E0EAFC', '#fff'],\n];\n\nfunction shuffle(a: string[][]) {\n\tlet j: number, x: string[], i: number;\n\tfor (i = a.length - 1; i > 0; i--) {\n\t\tj = Math.floor(Math.random() * (i + 1));\n\t\tx = a[i];\n\t\ta[i] = a[j];\n\t\ta[j] = x;\n\t}\n\treturn a;\n}\nexport const granimStates = {\n\t'default-state': {\n\t\tgradients: shuffle(darkGradients),\n\t\ttransitionSpeed: 5000,\n\t},\n\tdark: {\n\t\tgradients: shuffle(darkGradients),\n\t\ttransitionSpeed: 5000,\n\t},\n\tlight: {\n\t\tgradients: shuffle(lightGradients),\n\t\ttransitionSpeed: 5000,\n\t},\n};\n","import * as React from 'react';\nimport Granim from '~src/components/Granim/Granim';\nimport { granimStates } from '~src/components/Granim/granim_options';\nimport * as GranimTypes from '~src/components/Granim/__types__/index';\nimport { ThemeContext } from '~src/context/Context/ThemeContext';\nimport * as styles from './GranimSSR.module.scss';\n\nexport const GranimSSR = () => {\n\tconst granimRef = React.useRef<GranimTypes>();\n\tconst { theme } = React.useContext(ThemeContext);\n\tReact.useEffect(() => {\n\t\tif (typeof window !== 'undefined') {\n\t\t\tgranimRef?.current && granimRef?.current?.changeState(theme);\n\t\t\treturn () => {\n\t\t\t\t//\tconsole.log('cleanup');\n\t\t\t\tgranimRef?.current?.destroy();\n\t\t\t};\n\t\t}\n\t}, [theme]);\n\tif (typeof window !== 'undefined') {\n\t\treturn (\n\t\t\t<Granim\n\t\t\t\tclassName={styles.granimClass}\n\t\t\t\t//style={{ zIndex: -1 }}\n\t\t\t\tstates={granimStates}\n\t\t\t\tdirection=\"diagonal\"\n\t\t\t\tisPausedWhenNotInView\n\t\t\t\tgranimRef={granim => (granimRef.current = granim)}\n\t\t\t/>\n\t\t);\n\t}\n\treturn <span />;\n};\n","// extracted by mini-css-extract-plugin\nexport var granimClass = \"x_cf\";","import * as React from 'react';\nimport Footer from './Footer/Footer';\nimport DocumentHead from './Metadata/DocumentHead';\n//import { BodyClass } from '~src/components/Helpers/Classname';\n//import Header from '~src/components/Layout/Header/SiteHeader';\nimport Subscribe from '~src/components/Layout/Subscribe/SubscribeOverlay';\nimport FramerWrapper from '~src/context/Context/FramerContext';\nimport SubscribeNotification from './Subscribe/SubscribeNotification';\nimport * as styles from './Layout.module.scss';\nimport { StickyNavigation } from './Navigation/Navigation';\n\nimport { GranimSSR } from '~src/components/Granim/GranimSSR';\n\nconst BodyClass = (template: string): string => {\n\tconst classes = [];\n\n\tif (template === 'home') {\n\t\t//classes.push(styles2.homeTemplate);\n\t} else if (template === 'post') {\n\t\tclasses.push(styles.postTemplate);\n\t} else if (template === 'page') {\n\t\tclasses.push(styles.postTemplate);\n\t} else if (template === 'author') {\n\t\t//\tclasses.push(`author-template`);\n\t}\n\n\treturn classes.join(` `).trim();\n};\n\nconst Layout: React.FC<LayoutProps> = ({ children, template, stickyRef, data, header }) => {\n\tconst bodyClass = BodyClass(template);\n\n\treturn (\n\t\t<div>\n\t\t\t<DocumentHead className={bodyClass} template={template} data={data} />\n\t\t\t<div className={styles.siteWrapper}>\n\t\t\t\t{typeof window !== 'undefined' && <GranimSSR />}\n\t\t\t\t{template === 'home' && header}\n\t\t\t\t<FramerWrapper className={styles.framerWrapper}>\n\t\t\t\t\t{template !== 'home' && header}\n\t\t\t\t\t<main\n\t\t\t\t\t\t//ref={template !== 'post' ? stickyRef : null}\n\t\t\t\t\t\tid=\"site-main\"\n\t\t\t\t\t\tclassName={styles.siteMain}>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</main>\n\t\t\t\t\t{/* \t{template === 'post' && readNext} */}\n\t\t\t\t</FramerWrapper>\n\t\t\t\t<StickyNavigation data={data} stickyRef={stickyRef} template={template} />\n\t\t\t\t<Footer />\n\t\t\t\t<SubscribeNotification />\n\t\t\t\t<Subscribe />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Layout;\n\ninterface LayoutProps {\n\ttemplate?: string;\n\tstickyRef?: React.RefObject<HTMLElement>;\n\tdata?: unknown;\n\theader?: JSX.Element;\n}\n","// extracted by mini-css-extract-plugin\nexport var siteWrapper = \"g_x\";\nexport var siteMain = \"g_y\";\nexport var postTemplate = \"g_z\";\nexport var framerWrapper = \"g_B\";","// extracted by mini-css-extract-plugin\nexport var socialLink = \"t_by\";\nexport var socialLinkedIn = \"t_bz\";\nexport var socialInstagram = \"t_bB\";\nexport var socialYoutube = \"t_bC\";\nexport var socialArtstation = \"t_bD\";\nexport var socialLinks = \"t_bF\";\nexport var siteNavMain = \"t_bG\";\nexport var siteNavBackground = \"t_bH\";\nexport var siteNav = \"t_bJ\";\nexport var siteNavLeftWrapper = \"t_bK\";\nexport var siteNavLeft = \"t_bL\";\nexport var nav = \"t_bM\";\nexport var siteNavLogo = \"t_bN\";\nexport var siteHomeHeader = \"t_bP\";\nexport var siteNavContent = \"t_bQ\";\nexport var navPostTitleActive = \"t_bR\";\nexport var navPostTitle = \"t_bS\";\nexport var dash = \"t_bT\";\nexport var siteNavRight = \"t_bV\";\nexport var subscribeButton = \"t_bW\";\nexport var homeTemplate = \"t_bX\";\nexport var fixedNavActive = \"t_bY\";","import * as React from 'react';\n//import * as PropTypes from 'prop-types';\n\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport Link from '~src/_i18n/components/Link';\nimport * as styles from '../Navigation.module.scss';\n\nconst navigation = [\n\t{\n\t\tlabel: 'navigation.home',\n\t\turl: '/',\n\t},\n\t{\n\t\tlabel: 'navigation.projects',\n\t\turl: '/filmography',\n\t},\n\n\t{\n\t\tlabel: 'navigation.careers',\n\t\turl: '/careers/',\n\t},\n\t{\n\t\tlabel: 'navigation.about',\n\t\turl: '/about',\n\t},\n];\n/**\n * Navigation component\n *\n * The Navigation component takes an array of your Ghost\n * navigation property that is fetched from the settings.\n * It differentiates between absolute (external) and relative link (internal).\n * You can pass it a custom class for your own styles, but it will always fallback\n * to a `site-nav-item` class.\n *\n */\nconst Navigation = ({ navClass }) => {\n\tconst { formatMessage } = useIntlHelper();\n\n\tconst items = [];\n\n\tnavigation.map((navItem: { url: string; label: string }, i: React.Key) => {\n\t\tif (navItem.url.match(/^\\s?http(s?)/gi)) {\n\t\t\titems.push(\n\t\t\t\t<li key={i} className={`nav-${navItem.label.toLowerCase()}`} role=\"menuitem\">\n\t\t\t\t\t<a className={navClass} href={navItem.url} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t{navItem.label}\n\t\t\t\t\t</a>\n\t\t\t\t</li>,\n\t\t\t);\n\t\t} else {\n\t\t\titems.push(\n\t\t\t\t<li key={i} className={`nav-${navItem.label.toLowerCase()}`} role=\"menuitem\">\n\t\t\t\t\t<Link className={navClass} to={navItem.url}>\n\t\t\t\t\t\t{formatMessage(navItem.label)}\n\t\t\t\t\t</Link>\n\t\t\t\t</li>,\n\t\t\t);\n\t\t}\n\t});\n\n\treturn (\n\t\t<ul className={styles.nav} role=\"menu\">\n\t\t\t{items}\n\t\t</ul>\n\t);\n};\n\nNavigation.defaultProps = {\n\tnavClass: `nav-home nav-current`,\n};\n\n/* Navigation.propTypes = {\n\tdata: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\turl: PropTypes.string.isRequired,\n\t\t}).isRequired,\n\t).isRequired,\n\tnavClass: PropTypes.string,\n}; */\n\nexport default Navigation;\n","// tslint:disable:no-http-string\nimport * as React from 'react';\n\nexport const Instagram: React.FC = () => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t<path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\" />\n\t</svg>\n);\n","// tslint:disable:no-http-string\nimport * as React from 'react';\n\nexport const LinkedIn: React.FC = () => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t<path d=\"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z\" />\n\t</svg>\n);\n","// tslint:disable:no-http-string\nimport * as React from 'react';\n\nexport const Youtube: React.FC = () => (\n\t<svg\n\t\theight=\"100%\"\n\t\tversion=\"1.1\"\n\t\tviewBox=\"0 0 512 512\"\n\t\txmlSpace=\"preserve\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\">\n\t\t<path d=\"M256,0c141.29,0 256,114.71 256,256c0,141.29 -114.71,256 -256,256c-141.29,0 -256,-114.71 -256,-256c0,-141.29 114.71,-256 256,-256Zm153.315,178.978c-3.68,-13.769 -14.522,-24.61 -28.29,-28.29c-24.958,-6.688 -125.025,-6.688 -125.025,-6.688c0,0 -100.067,0 -125.025,6.688c-13.765,3.68 -24.61,14.521 -28.29,28.29c-6.685,24.955 -6.685,77.024 -6.685,77.024c0,0 0,52.067 6.685,77.02c3.68,13.769 14.525,24.614 28.29,28.293c24.958,6.685 125.025,6.685 125.025,6.685c0,0 100.067,0 125.025,-6.685c13.768,-3.679 24.61,-14.524 28.29,-28.293c6.685,-24.953 6.685,-77.02 6.685,-77.02c0,0 0,-52.069 -6.685,-77.024Zm-185.316,125.025l0,-96.002l83.137,48.001l-83.137,48.001Z\" />\n\t</svg>\n);\n","// tslint:disable:no-http-string\nimport * as React from 'react';\n\nexport const Twitter: React.FC = () => (\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n\t\t<path d=\"M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z\" />\n\t</svg>\n);\n","import * as React from 'react';\nimport { Instagram } from '~src/_assets/icons/social/instagram';\nimport { LinkedIn } from '~src/_assets/icons/social/linkedin';\nimport { Youtube } from '~src/_assets/icons/social/youtube';\nimport { Twitter } from '~src/_assets/icons/social/twitter';\n//import { IMDB } from '~src/_assets/icons/social/imdb';\n//import * as PropTypes from 'prop-types';\n\nimport * as styles from '../Navigation.module.scss';\n\nconst SocialLinks = () => {\n\treturn (\n\t\t<>\n\t\t\t<a\n\t\t\t\tclassName={`${styles.socialLink} ${styles.socialLinkedIn}`}\n\t\t\t\thref=\"https://www.linkedin.com/company/alzahra\"\n\t\t\t\ttitle=\"LinkedIn\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\">\n\t\t\t\t<LinkedIn />\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={`${styles.socialLink} ${styles.socialYoutube}`}\n\t\t\t\thref=\"https://www.youtube.com/channel/UCwXkdC8RzLRXxGawDQB9bpw\"\n\t\t\t\ttitle=\"YouTube\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\">\n\t\t\t\t<Youtube />\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={`${styles.socialLink} ${styles.socialInstagram}`}\n\t\t\t\thref=\"https://www.instagram.com/alzahravfx\"\n\t\t\t\ttitle=\"Instagram\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\">\n\t\t\t\t<Instagram />\n\t\t\t</a>\n\t\t\t<a\n\t\t\t\tclassName={`${styles.socialLink} ${styles.socialArtstation}`}\n\t\t\t\thref=\"https://twitter.com/AlzahraStudio\"\n\t\t\t\ttitle=\"ArtStation\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener noreferrer\">\n\t\t\t\t<Twitter />\n\t\t\t</a>\n\t\t</>\n\t);\n};\n\nexport default SocialLinks;\n","import * as React from 'react';\n\nconst SunIcon = () => (\n\t<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path d=\"M256,118a22,22,0,0,1-22-22V48a22,22,0,0,1,44,0V96A22,22,0,0,1,256,118Z\" />\n\t\t<path d=\"M256,486a22,22,0,0,1-22-22V416a22,22,0,0,1,44,0v48A22,22,0,0,1,256,486Z\" />\n\t\t<path d=\"M369.14,164.86a22,22,0,0,1-15.56-37.55l33.94-33.94a22,22,0,0,1,31.11,31.11l-33.94,33.94A21.93,21.93,0,0,1,369.14,164.86Z\" />\n\t\t<path d=\"M108.92,425.08a22,22,0,0,1-15.55-37.56l33.94-33.94a22,22,0,1,1,31.11,31.11l-33.94,33.94A21.94,21.94,0,0,1,108.92,425.08Z\" />\n\t\t<path d=\"M464,278H416a22,22,0,0,1,0-44h48a22,22,0,0,1,0,44Z\" />\n\t\t<path d=\"M96,278H48a22,22,0,0,1,0-44H96a22,22,0,0,1,0,44Z\" />\n\t\t<path d=\"M403.08,425.08a21.94,21.94,0,0,1-15.56-6.45l-33.94-33.94a22,22,0,0,1,31.11-31.11l33.94,33.94a22,22,0,0,1-15.55,37.56Z\" />\n\t\t<path d=\"M142.86,164.86a21.89,21.89,0,0,1-15.55-6.44L93.37,124.48a22,22,0,0,1,31.11-31.11l33.94,33.94a22,22,0,0,1-15.56,37.55Z\" />\n\t\t<path d=\"M256,358A102,102,0,1,1,358,256,102.12,102.12,0,0,1,256,358Z\" />\n\t</svg>\n);\n\nexport default SunIcon;\n","import * as React from 'react';\n\nconst MoonIcon = () => (\n\t<svg viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path d=\"M264,480A232,232,0,0,1,32,248C32,154,86,69.72,169.61,33.33a16,16,0,0,1,21.06,21.06C181.07,76.43,176,104.66,176,136c0,110.28,89.72,200,200,200,31.34,0,59.57-5.07,81.61-14.67a16,16,0,0,1,21.06,21.06C442.28,426,358,480,264,480Z\" />\n\t</svg>\n);\n\nexport default MoonIcon;\n","import * as React from 'react';\nimport SunIcon from '~src/_assets/icons/theme/SunIcon';\nimport MoonIcon from '~src/_assets/icons/theme/MoonIcon';\n//import { Moon as MoonIcon } from '@styled-icons/fa-solid/Moon';\n//import { WbSunny as SunIcon } from '@styled-icons/material-twotone/WbSunny';\n\nimport { ThemeContext } from '~src/context/Context/ThemeContext';\nimport * as styles from '../Navigation.module.scss';\n\nexport const Switch = ({ theme }) => {\n\treturn theme === 'light' ? <MoonIcon /> : <SunIcon />;\n};\n\nconst ThemeSwitch: React.FC = () => {\n\tconst { theme, setTheme } = React.useContext(ThemeContext);\n\n\tReact.useEffect(() => {\n\t\t//return () => {};\n\t}, [theme]);\n\n\tif (typeof window == 'undefined') {\n\t\treturn <div className={`${styles.socialLink}`} title=\"Switch Theme\"></div>;\n\t}\n\n\treturn (\n\t\t<div className={`${styles.socialLink}`} title=\"Switch Theme\" onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}>\n\t\t\t<Switch theme={theme} />\n\t\t</div>\n\t);\n};\n\nexport default ThemeSwitch;\n","import * as React from 'react';\nimport * as styles from './Navigation.module.scss';\n\nexport function useStickynav(stickyRef: React.RefObject<HTMLElement>, isPost: boolean, activeClass: string) {\n\tconst [currentClass, setCurrentClass] = React.useState(null);\n\tconst [navBackgroundClass, setNavBackgroundClass] = React.useState(null);\n\tlet lastScrollY = typeof window !== `undefined` && window.scrollY;\n\tlet ticking = false;\n\n\tconst update = () => {\n\t\tif (stickyRef && stickyRef.current !== null) {\n\t\t\tconst top = stickyRef.current.getBoundingClientRect().top;\n\t\t\tconst trigger = top + window.scrollY;\n\t\t\tlet triggerOffset = -20;\n\n\t\t\tif (isPost) {\n\t\t\t\ttriggerOffset = stickyRef.current.offsetHeight + 35;\n\t\t\t}\n\n\t\t\tif (lastScrollY >= trigger + triggerOffset) {\n\t\t\t\tsetCurrentClass(activeClass);\n\t\t\t\tsetNavBackgroundClass(styles.siteNavBackground);\n\t\t\t} else {\n\t\t\t\tsetCurrentClass('');\n\t\t\t\tsetNavBackgroundClass('');\n\t\t\t}\n\t\t\tticking = false;\n\t\t}\n\t};\n\tconst requestTick = () => {\n\t\tif (!ticking) {\n\t\t\trequestAnimationFrame(update);\n\t\t}\n\t\tticking = true;\n\t};\n\n\tconst onScroll = () => {\n\t\tlastScrollY = window.scrollY;\n\t\trequestTick();\n\t\t//console.log(lastScrollY);\n\t};\n\tconst throttledScroll = () => setTimeout(onScroll, 50);\n\n\tReact.useEffect(() => {\n\t\t// Add scroll event when the component is loaded\n\t\twindow.addEventListener('scroll', throttledScroll, { passive: true });\n\t\treturn () => {\n\t\t\t// Remove scroll event after the component is unmount,\n\t\t\t// like componentWillUnmount()\n\t\t\twindow.removeEventListener('scroll', () => throttledScroll);\n\t\t};\n\t\t// Here, we set useEffect() arguments as empty array.\n\t\t// This means useEffect() will only run once after component loaded\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\t/* \tconst handleScroll = () => {\n\t\t// Make sure ref has current attibute and getBoundingClientRect function\n\t\t// otherwise, it could cause getBoundingClientRect undefined error.\n\t\tif (ref && ref.current && ref.current.getBoundingClientRect()) {\n\t\t\t// Then, we compare the distance of the ref component to the top\n\t\t\t// with top value we set. If less than, we set isStick ture.\n\t\t\tsetSticky(ref.current.getBoundingClientRect().top <= top);\n\t\t}\n  }; */\n\treturn { currentClass, navBackgroundClass };\n}\n","import * as React from 'react';\nimport NavigationItems from './Items/Navigation';\nimport SocialLinks from './Items/SocialLinks';\nimport ThemeSwitch from './Items/ThemeSwitch';\nimport Link from '~src/_i18n/components/Link';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport navLogo from '~src/_assets/images/alzahra-logo.png';\nimport { useStickynav } from './useStickynav';\nimport { Helmet } from 'react-helmet';\nimport * as styles from './Navigation.module.scss';\n\ninterface SiteNav {\n\tclassName?: string;\n\n\tpostTitle?: string;\n}\n\nconst site = {\n\ttitle: 'Static Title',\n\tlogo: navLogo,\n};\n\nconst SiteNav: React.FC<SiteNav> = ({ className, postTitle }) => {\n\tconst { formatMessage } = useIntlHelper();\n\treturn (\n\t\t<nav className={`${styles.siteNav} ${className}`}>\n\t\t\t<div className={styles.siteNavLeftWrapper}>\n\t\t\t\t<div className={styles.siteNavLeft}>\n\t\t\t\t\t{site.logo ? (\n\t\t\t\t\t\t<Link className={styles.siteNavLogo} to=\"/\">\n\t\t\t\t\t\t\t{/* <Logo /> */}\n\t\t\t\t\t\t\t<img src={site.logo} alt={site.title} />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Link className={styles.siteNavLogo} to=\"/\">\n\t\t\t\t\t\t\t{formatMessage('meta.title')}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className={styles.siteNavContent}>\n\t\t\t\t\t\t<NavigationItems />\n\n\t\t\t\t\t\t{postTitle && <span className={`${styles.navPostTitle} ${site.logo && `dash`}`}>{postTitle}</span>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={styles.siteNavRight}>\n\t\t\t\t<div className={styles.socialLinks}>\n\t\t\t\t\t<ThemeSwitch />\n\t\t\t\t\t<SocialLinks />\n\t\t\t\t</div>\n\t\t\t\t<>\n\t\t\t\t\t<a className={styles.subscribeButton} href=\"#subscribe\" id=\"subscribe-button\">\n\t\t\t\t\t\t{formatMessage('navigation.subscribe')}\n\t\t\t\t\t</a>\n\t\t\t\t</>\n\t\t\t</div>\n\t\t</nav>\n\t);\n};\n\nexport interface SiteNavWrapper {\n\tclassName?: string;\n\tpostTitle?: string;\n\tisHome?: boolean;\n}\nexport const Navigation: React.FC<SiteNavWrapper> = ({ className, postTitle, isHome }) => {\n\treturn isHome ? (\n\t\t<header className={styles.siteHomeHeader}>\n\t\t\t<SiteNav className={className} />\n\t\t</header>\n\t) : (\n\t\t<SiteNav className={className} postTitle={postTitle} />\n\t);\n};\n\nexport const StickyNavigation = ({ template, stickyRef, data }) => {\n\tconst activeClass = template => (template == 'home' ? styles.fixedNavActive : styles.navPostTitleActive);\n\tconst { currentClass, navBackgroundClass } = useStickynav(stickyRef, false, activeClass(template));\n\tif (template === 'post') {\n\t\treturn (\n\t\t\t<div className={`outer ${styles.siteNavMain} ${styles.siteNavBackground}`}>\n\t\t\t\t<div className=\"inner\">\n\t\t\t\t\t<Navigation className={currentClass} postTitle={data.post.frontmatter.title} />{' '}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (template === 'home') {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Helmet>\n\t\t\t\t\t<body className={styles.homeTemplate} />\n\t\t\t\t</Helmet>\n\t\t\t\t<div className={`outer ${styles.siteNavMain} ${navBackgroundClass}`}>\n\t\t\t\t\t<div className=\"inner\">\n\t\t\t\t\t\t<Navigation className={currentClass} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t} else\n\t\treturn (\n\t\t\t<div className={`outer ${styles.siteNavMain} ${styles.siteNavBackground}`}>\n\t\t\t\t<div className=\"inner\">\n\t\t\t\t\t<Navigation className={currentClass} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n};\n","import * as React from 'react';\n\nconst Spinner = () => {\n\treturn (\n\t\t<svg\n\t\t\tversion=\"1.1\"\n\t\t\tid=\"loader-1\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\txmlnsXlink=\"http://www.w3.org/1999/xlink\"\n\t\t\tx=\"0px\"\n\t\t\ty=\"0px\"\n\t\t\twidth=\"40px\"\n\t\t\theight=\"40px\"\n\t\t\tviewBox=\"0 0 40 40\"\n\t\t\tenableBackground=\"new 0 0 40 40\"\n\t\t\txmlSpace=\"preserve\">\n\t\t\t<path\n\t\t\t\topacity=\"0.2\"\n\t\t\t\tfill=\"#000\"\n\t\t\t\td=\"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\ns14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\nc0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\tfill=\"#000\"\n\t\t\t\td=\"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\nC22.32,8.481,24.301,9.057,26.013,10.047z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nexport default Spinner;\n","import * as React from 'react';\nimport addToMailchimp from 'gatsby-plugin-mailchimp';\nimport useIntlHelper from '~src/_i18n/helpers/useIntlHelper';\nimport * as styles from './Subscribe.module.scss';\nimport Spinner from '~src/_assets/icons/general/loader';\n\nconst SubscribeForm = () => {\n\tconst { formatMessage } = useIntlHelper();\n\tconst [successMessage, setSuccessMessage] = React.useState('subscribe.confirm');\n\n\tconst [formClassname, setFormClassname] = React.useState('');\n\tconst [email, setEmail] = React.useState(null);\n\n\tconst handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n\t\te.preventDefault();\n\t\tsetFormClassname(styles.loading);\n\t\taddToMailchimp(email)\n\t\t\t.then(data => {\n\t\t\t\t//\talert(`${data.result}: ${data.msg}`);\n\n\t\t\t\tif (data.result === 'success') {\n\t\t\t\t\tsetFormClassname(styles.success);\n\t\t\t\t\tdocument.documentElement.classList.add(styles.subscribeSuccess);\n\t\t\t\t}\n\t\t\t\tif (data.result === 'error' && data.msg.includes(email)) {\n\t\t\t\t\tsetSuccessMessage('subscribe.subscribed');\n\t\t\t\t\tsetFormClassname(styles.success);\n\t\t\t\t\tdocument.documentElement.classList.add(styles.subscribeSuccess);\n\t\t\t\t}\n\t\t\t\tif (data.result === 'error' && data.msg.includes('too many')) {\n\t\t\t\t\tsetSuccessMessage('subscribe.subscribed');\n\t\t\t\t\tsetFormClassname(styles.success);\n\t\t\t\t\tdocument.documentElement.classList.add(styles.subscribeSuccess);\n\t\t\t\t} else {\n\t\t\t\t\tsetFormClassname(styles.error);\n\t\t\t\t\tdocument.documentElement.classList.add(styles.subscribeFailure);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error: Error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t// Errors in here are client side\n\t\t\t\t// Mailchimp always returns a 200\n\t\t\t});\n\t};\n\tconst handleEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tsetEmail(event.target.value);\n\t};\n\treturn (\n\t\t<form onSubmit={handleSubmit} className={formClassname} data-members-form=\"subscribe\">\n\t\t\t<div className={styles.formGroup}>\n\t\t\t\t<input\n\t\t\t\t\tclassName={styles.subscribeEmail}\n\t\t\t\t\tplaceholder={formatMessage('subscribe.placeholder')}\n\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\tonChange={handleEmailChange}\n\t\t\t\t/>\n\t\t\t\t<button className=\"button primary\" type=\"submit\">\n\t\t\t\t\t<span className={styles.buttonContent}>{formatMessage('subscribe.button')}</span>\n\t\t\t\t\t<span className={styles.buttonLoader}>\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className={styles.messageSuccess}>\n\t\t\t\t<strong>{formatMessage('subscribe.success')}</strong>\n\t\t\t\t{formatMessage(successMessage)}\n\t\t\t</div>\n\t\t\t<div className={styles.messageError}>{formatMessage('subscribe.error')}</div>\n\t\t</form>\n\t);\n};\n\nexport default SubscribeForm;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true,\n});\nexports['default'] = void 0;\n\nvar _jsonp = _interopRequireDefault(require('jsonp'));\n\nvar _emailValidator = require('email-validator');\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\n/**\n * Make a jsonp request to user's mailchimp list\n *  `param` object avoids CORS issues\n *  timeout to 3.5s so user isn't waiting forever\n *  usually occurs w/ privacy plugins enabled\n *  3.5s is a bit longer than the time it would take on a Slow 3G connection\n *\n * @param {String} url - concatenated string of user's gatsby-config.js\n *  options, along with any MC list fields as query params.\n *\n * @return {Promise} - a promise that resolves a data object\n *  or rejects an error object\n */\nvar subscribeEmailToMailchimp = function subscribeEmailToMailchimp(_ref) {\n    var url = _ref.url,\n        timeout = _ref.timeout;\n    return new Promise(function(resolve, reject) {\n        return (0, _jsonp['default'])(\n            url,\n            {\n                param: 'c',\n                timeout: timeout,\n            },\n            function(err, data) {\n                if (err) reject(err);\n                if (data) resolve(data);\n            },\n        );\n    });\n};\n/**\n * Build a query string of MC list fields\n *\n * @param {Object} fields - a list of mailchimp audience field labels\n *  and their values. We uppercase because that's what MC requires.\n *  NOTE: GROUPS stay as lowercase (ex: MC uses group field names as `group[21269]`)\n *\n * @return {String} - `&FIELD1=value1&FIELD2=value2&group[21265][2]=group1`\n */\n\nvar convertListFields = function convertListFields(fields) {\n    var queryParams = '';\n\n    for (var field in fields) {\n        if (Object.prototype.hasOwnProperty.call(fields, field)) {\n            // If this is a list group, not user field then keep lowercase, as per MC reqs\n            // https://github.com/benjaminhoffman/gatsby-plugin-mailchimp/blob/master/README.md#groups\n            var fieldTransformed = field.substring(0, 6) === 'group[' ? field : field.toUpperCase();\n            queryParams = queryParams.concat(\n                '&'.concat(fieldTransformed, '=').concat(fields[field]),\n            );\n        }\n    }\n\n    return queryParams;\n};\n/**\n * Subscribe an email address to a Mailchimp email list.\n * We use ES5 function syntax (instead of arrow) because we need `arguments.length`\n *\n * @param {String} email - required; the email address you want to subscribe\n * @param {Object} fields - optional; add'l info (columns) you want included w/ this subscriber\n * @param {String} endpointOverride - optional; if you want to override the default MC mailing list\n *  that's listed in your gatsby-config, pass the list in here\n *\n * @return {Object} -\n *  {\n *    result: <String>(`success` || `error`)\n *    msg: <String>(`Thank you for subscribing!` || `The email you entered is not valid.`),\n *  }\n */\n\nvar addToMailchimp = function addToMailchimp(email, fields, endpointOverride) {\n    var isEmailValid = (0, _emailValidator.validate)(email);\n    var emailEncoded = encodeURIComponent(email);\n\n    if (!isEmailValid) {\n        return Promise.resolve({\n            result: 'error',\n            msg: 'The email you entered is not valid.',\n        });\n    }\n\n    var endpoint = __GATSBY_PLUGIN_MAILCHIMP_ADDRESS__; // eslint-disable-line no-undef\n\n    var timeout = __GATSBY_PLUGIN_MAILCHIMP_TIMEOUT__; // eslint-disable-line no-undef\n    // The following tests for whether you passed in a `fields` object. If\n    // there are only two params and the second is a string, then we can safely\n    // assume the second param is a MC mailing list, and not a fields object.\n\n    if (arguments.length < 3 && typeof fields === 'string') {\n        endpoint = fields;\n    } else if (typeof endpointOverride === 'string') {\n        endpoint = endpointOverride;\n    } // Generates MC endpoint for our jsonp request. We have to\n    // change `/post` to `/post-json` otherwise, MC returns an error\n\n    endpoint = endpoint.replace(/\\/post/g, '/post-json');\n    var queryParams = '&EMAIL='.concat(emailEncoded).concat(convertListFields(fields));\n    var url = ''.concat(endpoint).concat(queryParams);\n    return subscribeEmailToMailchimp({\n        url: url,\n        timeout: timeout,\n    });\n};\n\nvar _default = addToMailchimp;\nexports['default'] = _default;\n","// extracted by mini-css-extract-plugin\nexport var subscribeSuccessMessage = \"l_S\";\nexport var subscribeCloseOverlay = \"l_T\";\nexport var subscribeCloseButton = \"l_V\";\nexport var subscribeOverlay = \"l_W\";\nexport var subscribeOverlayContent = \"l_X\";\nexport var subscribeForm = \"l_Y\";\nexport var subscribeOverlayLogo = \"l_Z\";\nexport var subscribeOverlayTitle = \"l_0\";\nexport var subscribeOverlayDescription = \"l_1\";\nexport var formGroup = \"l_2\";\nexport var subscribeEmail = \"l_3\";\nexport var loading = \"l_4\";\nexport var buttonLoader = \"l_5\";\nexport var subscribeFormTitle = \"l_6\";\nexport var subscribeFormDescription = \"l_7\";\nexport var messageError = \"l_8\";\nexport var messageSuccess = \"l_9\";\nexport var buttonContent = \"l_bb\";\nexport var error = \"l_bc\";\nexport var success = \"l_bd\";\nexport var subscribeNotification = \"l_bf\";\nexport var subscribeFailureMessage = \"l_bg\";\nexport var subscribeFailure = \"l_bh\";\nexport var subscribeSuccess = \"l_bj\";","export default __webpack_public_path__ + \"static/alzahra-logo-e29d0007efcd107caaecbc7fac9586cc.png\";"],"sourceRoot":""}